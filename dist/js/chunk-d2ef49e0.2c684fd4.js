(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2ef49e0"],{"0edc5":function(t,e,i){},"13ea":function(t,e,i){var a=i("03dd"),n=i("42a2"),s=i("d370"),r=i("6747"),o=i("30c9"),l=i("0d24"),c=i("eac5"),u=i("73ac"),m="[object Map]",d="[object Set]",_=Object.prototype,f=_.hasOwnProperty;function v(t){if(null==t)return!0;if(o(t)&&(r(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||s(t)))return!t.length;var e=n(t);if(e==m||e==d)return!t.size;if(c(t))return!a(t).length;for(var i in t)if(f.call(t,i))return!1;return!0}t.exports=v},"145e":function(t,e,i){"use strict";var a=i("a3ac"),n=i.n(a);n.a},"174f":function(t,e,i){},"259d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:t.paths},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:a.disabled}},[i("span",{on:{click:function(e){return t.navigate_from_breadcrumb(a)}}},[t._v(" "+t._s(a.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")])],1),t._t("extra")],2)},n=[],s={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(t){if(t.hasOwnProperty("path"))t.path&&this.$router.push({path:t.path});else{var e=t.router_name;e&&this.$router.push({name:e})}}}},r=s,o=(i("5e17"),i("79a2"),i("2877")),l=Object(o["a"])(r,a,n,!1,null,"3cda09ee",null);e["a"]=l.exports},"29d6":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{staticClass:"table-header",attrs:{wrap:""}},[i("breadcrumb",{attrs:{paths:t.paths}}),i("v-flex",[t.noButton?t._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click")}}},[i("v-icon",[t._v("add")])],1),t.noSortButton?t._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-sort-by")}}},[i("v-icon",[t._v("sort")])],1),t.noListButton?t._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-list-view")}}},[i("v-icon",[t._v("list")])],1),t.noGridButton?t._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-grid-view")}}},[i("v-icon",[t._v("mdi-view-dashboard")])],1),t._t("form-btn")],2)],1)},n=[],s=i("259d"),r={name:"TableHeader",props:{paths:{type:Array,default:[]},noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:s["a"]}},o=r,l=(i("337a"),i("2877")),c=Object(l["a"])(o,a,n,!1,null,"b8bfd1cc",null);e["a"]=c.exports},"2bf3":function(t,e,i){},"337a":function(t,e,i){"use strict";var a=i("9e25"),n=i.n(a);n.a},"5e17":function(t,e,i){"use strict";var a=i("8c6e"),n=i.n(a);n.a},"72c1":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"avatar-wrapper"},[i("ul",{staticClass:"avatars"},[t._l(t.cutList,(function(e,a){return t.cutList.length>0?i("li",{key:a,staticClass:"avatars__item"},[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[t.deep&&e.user?i("img",t._g({staticClass:"avatars__img",attrs:{src:e.user.image_url}},n)):e?i("img",t._g({staticClass:"avatars__img",attrs:{src:e.image_url}},n)):t._e()]}}],null,!0)},[t.deep&&e.user?i("span",[t._v(t._s(e.user.fullname))]):e?i("span",[t._v(t._s(e.fullname))]):t._e()])],1):t._e()})),t.less>0?i("li",{staticClass:"avatars__item"},[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("span",t._g({staticClass:"avatars__others"},a),[t._v("+"+t._s(t.less))])]}}],null,!1,1062212335)},[i("span",{domProps:{innerHTML:t._s(t.lessList)}})])],1):t._e(),t.hasAddMember?i("li",{staticClass:"avatars__item"},[i("span",{staticClass:"avatars__add"},[i("v-icon",{attrs:{dark:""},on:{click:function(e){return t.$emit("add-member",t.item)}}},[t._v("add")])],1)]):t._e()],2)])},n=[],s=(i("c5f6"),i("0644")),r=i.n(s),o={inheritAttrs:!1,props:{items:{type:Array,default:function(){return[]}},count:{type:Number,default:3},deep:{type:Boolean,default:!1},hasAddMember:{type:Boolean,default:!1}},computed:{less:function(){return this.items.length-this.count},cutList:function(){return this.items.length<this.count?this.items:r()(this.items).slice(0,this.count)},lessList:function(){var t=this,e=r()(this.items).slice(this.count,this.items.length);return e.length>0?e.map((function(e){return t.deep?e.user?e.user.fullname:"Deleted User":e?e.fullname:"Deleted User"})).join("<br>"):"Deleted User"}}},l=o,c=(i("145e"),i("2877")),u=Object(c["a"])(l,a,n,!1,null,"61c9581d",null);e["a"]=u.exports},"79a2":function(t,e,i){"use strict";var a=i("0edc5"),n=i.n(a);n.a},"7e7e":function(t,e,i){"use strict";var a=i("174f"),n=i.n(a);n.a},"80fa":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timer"},[i("table-header",{attrs:{paths:t.paths,noButton:!0},scopedSlots:t._u([{key:"form-btn",fn:function(){return[i("v-btn",{staticClass:"mx-1",attrs:{fab:"",outlined:"",small:"",color:"gray",icon:""}},[i("v-icon",[t._v("mdi-dots-horizontal")])],1),i("v-btn",{staticClass:"mx-1",attrs:{fab:"",outlined:"",small:"",color:"gray",icon:""}},[i("v-icon",[t._v("close")])],1)]},proxy:!0}])}),i("VueTable",{key:t.componentKey,attrs:{items:t.items,headers:t.headers,showRowActions:!0,loading:t.loading,icon:"widgets",title:"Task Timers",noMoreData:t.noMoreData,showSelect:!1},on:{"load-more":t.load_more},scopedSlots:t._u([{key:"header-toolbar",fn:function(){return[i("v-col",[i("v-select",{staticClass:"mt-7",attrs:{items:t.task_status,label:"Task Status",solo:"",value:t.filter_task},on:{change:t.filterTask}})],1),i("v-btn-toggle",{attrs:{mandatory:"",value:t.timer_tab},on:{change:t.handleChangeTab},model:{value:t.timer_tab,callback:function(e){t.timer_tab=e},expression:"timer_tab"}},[i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"task-timers"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-folder-clock-outline")]),t._v(" Task Timers ")],1),i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"global-timers"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-web-clock")]),t._v(" Global Timers ")],1),i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"alarm"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-alarm")]),t._v(" Alarms ")],1)],1)]},proxy:!0},{key:"row-slot",fn:function(e){var a=e.item;return[i("td",[i("Avatars",{staticStyle:{display:"inline-block"},attrs:{items:a.assignee,count:1}})],1),i("td",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("span",t._g({},n),[t._v(t._s(t._f("truncate")(t._f("ucwords")(a.title),15)))])]}}],null,!0)},[i("span",[t._v(t._s(t._f("ucwords")(a.title)))])])],1),i("td",[i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("span",t._g({},n),[t._v(t._s(t._f("truncate")(t._f("ucwords")(a.project.title),15)))])]}}],null,!0)},[i("span",[t._v(t._s(t._f("ucwords")(a.project.title)))])])],1),i("td",[t._v(t._s(t._f("format")(a.timer.timer_created,"MMM D YYYY HH:mm:ss")))]),i("td",[t._v(t._s(t.timerEnd(a)))]),i("td",[i("PlayPause",{attrs:{item:a},on:{"row-item-updated":function(t){a=t}}})],1)]}}])})],1)},n=[],s=(i("7514"),i("e06e")),r=(i("13ea"),i("0ebe")),o=i("ee09"),l=i("29d6"),c=i("72c1"),u=i("a71c"),m={name:"TaskTimer",mixins:[s["a"]],components:{VueTable:r["a"],Actions:o["a"],Avatars:c["a"],TableHeader:l["a"],PlayPause:u["a"]},data:function(){return{paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Timers",disabled:!0,router_name:null}],sortList:[{title:"Sort by Client"},{title:"Sort by Task"},{title:"Sort by Services"},{title:"Sort by Time"},{title:"Sort by Date"}],headers:[{text:"Assigned To",sortable:!1,align:"left",width:150},{text:"Task",sortable:!1,align:"left"},{text:"Project",sortable:!1,align:"left"},{text:"Time Start",sortable:!1,align:"left"},{text:"Time End",value:"time_end",sortable:!1,align:"left"},{text:"Total Time",sortable:!1,align:"center"}],timer_tab:"task-timers",currentTab:"task-timers",task_status:[{text:"All",value:"all"},{text:"Open",value:"open"},{text:"Behind",value:"behind"},{text:"Completed",value:"completed"}],filter_task:"all"}},created:function(){this.fill_table_via_url("api/timer/tasks?all=true&filter=".concat(this.filter_task))},computed:{loggeduser:function(){return this.$store.getters.user}},methods:{load_more:function(){this.load_more_via_url("api/timer/tasks?all=true&filter=".concat(this.filter_task))},can_run_timer:function(t){var e=this,i=t.assignee.find((function(t){return t.id===e.loggeduser.id}));return!!i},handleChangeTab:function(t){"global-timers"===this.timer_tab&&this.$router.push({name:"globalTimer"}),"alarm"===this.timer_tab&&this.$router.push({name:"alarm"})},timerEnd:function(t){return"ongoing"===t.timer.timer_status?"Ongoing":"pause"===t.timer.timer_status?"Paused":"-"},filterTask:function(t){this.filter_task=t,this.resetPagination(),this.fill_table_via_url("api/timer/tasks?&all=true&filter=".concat(t))}}},d=m,_=(i("c0e0"),i("2877")),f=Object(_["a"])(d,a,n,!1,null,"7a781eae",null);e["default"]=f.exports},"8c6e":function(t,e,i){},"993a":function(t,e,i){"use strict";var a=i("2bf3"),n=i.n(a);n.a},"9e25":function(t,e,i){},a3ac:function(t,e,i){},a71c:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{staticClass:"timer my-0 py-0"},[i("v-col",{staticClass:"time",class:t.timer_started?"success--text":""},[t._v(t._s(t.display))]),i("v-spacer"),i("v-col",{staticClass:"time-control"},[t.task_is_done?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-icon",t._g({attrs:{color:"error"}},a),[t._v("mdi-clock-alert-outline")])]}}],null,!1,1460511430)},[i("span",[t._v("Task is done!")])]):!t.timer_started&&t.can_start_timer?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:t.timerClick}},a),[i("v-icon",[t._v("play_arrow")])],1)]}}])},[i("span",[t._v("Start Timer")])]):t.timer_started&&t.can_stop_timer?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:t.timerClick}},a),[i("v-icon",[t._v("pause")])],1)]}}])},[i("span",[t._v("Pause Timer")])]):t._e()],1)],1)},n=[],s=(i("6b54"),i("28a5"),i("20d6"),i("2f62"),i("1be9")),r=(i("d4e9"),i("c1df")),o=i.n(r),l={name:"PlayPause",inheritAttrs:!1,props:{item:Object},data:function(){return{timer_started:!1,init_time:"00:00:00",interval:null,btnloading:!1}},computed:{display:{get:function(){return this.item.timer.timer_stats.format},set:function(t){this.init_time=t}},participants:function(){return this.item.assignee},is_viewer_a_participant:function(){var t=this,e=this.participants.findIndex((function(e){return e.id===t.viewer.id}));return!!~e},viewer:function(){return this.$store.getters.user},can_start_timer:function(){return this.is_viewer_a_participant},can_stop_timer:function(){return!!this.viewer.is_admin||this.is_viewer_a_participant},selectedDate:function(){return o()(this.forDate).format("YYYY-MM-DD")},now:function(){return o()().format("YYYY-MM-DD")},is_lapsed:function(){return o()(this.item.timer.timer_stopped,"YYYY-MM-DD")<o()()},task_is_done:function(){return!("Open"===this.item.status||"open"===this.item.status)},last_date_action:function(){return o()(this.item.timer.latest_timer.created_at).format("MMMM D YYYY")}},created:function(){this.is_open()&&(this.start_timer(),this.timer_started=!0)},methods:{is_open:function(){return"ongoing"===this.item.timer.timer_status},get_hours:function(t){return t.split(":")[0]},get_mins:function(t){return t.split(":")[1]},get_secs:function(t){return t.split(":")[2]},pause_timer:function(){var t=this;this.btnloading=!0,this.item.timer.timer_disabled=!0,s["a"].post("api/timer/pause",{type:"task",id:this.item.id}).then((function(){clearInterval(t.item.timer.timer_interval),t.item.timer.timer_disabled=!1,t.item.timer.timer_status="pause",t.timer_started=!1})).finally((function(){t.btnloading=!1}))},timerClick:function(){var t=this;if(!this.item.timer.timer_disabled)if(this.timer_started)this.pause_timer();else{this.btnloading=!0,this.start_timer();var e="api/timer/start";"pause"===this.item.timer.timer_status&&(e="api/timer/back"),this.item.timer.timer_disabled=!0,s["a"].post(e,{type:"task",id:this.item.id}).then((function(){t.item.timer.timer_disabled=!1,t.item.timer.timer_status="ongoing"})).finally((function(){t.btnloading=!1}))}},start_timer:function(){var t=this;this.timer_started=!0,this.item.timer.timer_interval=setInterval((function(){var e=t.get_hours(t.item.timer.timer_stats.format),i=t.get_mins(t.item.timer.timer_stats.format),a=t.get_secs(t.item.timer.timer_stats.format);a>=59&&i>=59?(e++,i=a="00"):a>=59?(i++,a="00"):a++,t.item.timer.timer_stats.format=t.set_time_running(e,i,a)}),1e3)},set_time_running:function(t,e,i){return 1===t.toString().length&&(t="0"+t),1===e.toString().length&&(e="0"+e),1===i.toString().length&&(i="0"+i),"".concat(t,":").concat(e,":").concat(i)}}},c=l,u=(i("993a"),i("2877")),m=Object(u["a"])(c,a,n,!1,null,"656912c2",null);e["a"]=m.exports},c0e0:function(t,e,i){"use strict";var a=i("e15c"),n=i.n(a);n.a},e15c:function(t,e,i){},ee09:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[t.hasEdit?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.can_edit,expression:"can_edit"}],attrs:{dense:"",dense:"",icon:""},on:{click:function(e){return t.handle_action("edit")}}},[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.editIcon))])],1):t._e(),t.hasDelete?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.can_delete,expression:"can_delete"}],attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("delete")}}},[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.deleteIcon))])],1):t._e(),t.hasView?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.can_view,expression:"can_view"}],attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("view")}}},[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.viewIcon))])],1):t._e()],1)},n=[],s={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-pencil"},viewIcon:{type:String,default:"pageview"},deleteIcon:{type:String,default:"mdi-delete"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(t){this.item&&this.$emit(t,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},r=s,o=(i("7e7e"),i("2877")),l=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-d2ef49e0.2c684fd4.js.map