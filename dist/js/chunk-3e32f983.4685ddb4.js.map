{"version":3,"sources":["webpack:///./src/modules/InvoiceTemplates/InvoiceTemplates.vue?29f4","webpack:///./src/modules/InvoiceTemplates/InvoiceTemplates.js","webpack:///./src/modules/InvoiceTemplates/InvoiceTemplates.js?5e37","webpack:///./src/modules/InvoiceTemplates/InvoiceTemplates.vue","webpack:///./src/modules/InvoiceTemplates/InvoiceTemplates.scss?7dae"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","headers","loading","items","noMoreData","on","getMoreInvoiceTemplates","scopedSlots","_u","key","fn","ref","_g","_b","open_add_dialog","_v","open_help_dialog","proxy","item","_s","_f","name","creator","company_id","created_at","can_action","can_delete","$_permissions","get","$event","open_delete_dialog","open_edit_dialog","open_view_dialog","defaultTemplates","invoicefields","handleSave","activeItem","delete_dialog","delete_item","staticRenderFns","mixins","list_functionality","components","VueTable","InvoiceTemplateDialog","InvoiceTemplatePreview","InvoiceTemplateHelp","Actions","DeleteDialog","data","text","align","sortable","width","paths","disabled","router_name","isEdit","computed","user","$store","getters","permissions","length","filter","template","mounted","$emit","getInvoiceTemplates","getFields","$on","methods","is_admin","delete","fill_table_via_url","load_more_via_url","$refs","add_edit_dialog","open_dialog","view_dialog","help_dialog","updateTemplate","createTemplate","request","post","then","push","clear_and_close","finally","put","index","findIndex","ii","id","splice","component"],"mappings":"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","file":"js/chunk-3e32f983.4685ddb4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"invoice-templates\"},[_c('VueTable',{attrs:{\"title\":\"Invoice Templates\",\"hasSearch\":false,\"headers\":_vm.headers,\"loading\":_vm.loading,\"items\":_vm.items,\"noMoreData\":_vm.noMoreData,\"showSelect\":false},on:{\"load-more\":_vm.getMoreInvoiceTemplates},scopedSlots:_vm._u([{key:\"header-toolbar\",fn:function(){return [_c('v-tooltip',{attrs:{\"left\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',_vm._g(_vm._b({staticClass:\"ml-2 action-btn\",attrs:{\"fab\":\"\"},on:{\"click\":_vm.open_add_dialog}},'v-icon',attrs,false),on),[_vm._v(\"add_circle_outline\")])]}}])},[_c('span',[_vm._v(\"Create Template\")])]),_c('v-tooltip',{attrs:{\"left\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',_vm._g(_vm._b({staticClass:\"ml-2 action-btn\",attrs:{\"fab\":\"\"},on:{\"click\":_vm.open_help_dialog}},'v-icon',attrs,false),on),[_vm._v(\"mdi-help-circle-outline\")])]}}])},[_c('span',[_vm._v(\"Invoice Template Guide and Rules\")])])]},proxy:true},{key:\"row-slot\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(_vm._f(\"ucwords\")(item.name)))]),(item.creator)?_c('td',[_c('Avatar',{attrs:{\"user\":item.creator}})],1):_c('td',[_c('v-avatar',[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-monitor-clean\")])],1),_vm._v(\" System Default \")],1),(item.company_id === 0)?_c('td'):_c('td',[_vm._v(_vm._s(_vm._f(\"bzFromNow\")(item.created_at)))]),_c('Actions',{attrs:{\"hasDelete\":_vm.can_action(item) && _vm.can_delete(item),\"hasEdit\":_vm.can_action(item),\"item\":item,\"permissions\":_vm.$_permissions.get('templates')},on:{\"delete\":function($event){return _vm.open_delete_dialog(item)},\"edit\":function($event){return _vm.open_edit_dialog(item)},\"view\":function($event){return _vm.open_view_dialog(item)}}})]}},{key:\"empty-slot\",fn:function(){return [_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"#3b589e\"},on:{\"click\":_vm.open_add_dialog}},[_vm._v(\"Add new invoice template\")])]},proxy:true}])}),_c('InvoiceTemplateDialog',{ref:\"add_edit_dialog\",attrs:{\"defaultTemplates\":_vm.defaultTemplates,\"invoicefields\":_vm.invoicefields},on:{\"save\":_vm.handleSave,\"preview\":_vm.open_view_dialog}}),_c('InvoiceTemplatePreview',{ref:\"view_dialog\",attrs:{\"item\":_vm.activeItem,\"invoicefields\":_vm.invoicefields}}),_c('InvoiceTemplateHelp',{ref:\"help_dialog\",attrs:{\"invoicefields\":_vm.invoicefields}}),_c('delete-dialog',{attrs:{\"open-dialog\":_vm.delete_dialog,\"title\":\"Delete Template\",\"text-content\":\"Are you sure you want to delete this invoice template?\"},on:{\"update:openDialog\":function($event){_vm.delete_dialog=$event},\"update:open-dialog\":function($event){_vm.delete_dialog=$event},\"delete\":function($event){return _vm.delete_item('delete_invoice_template', $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/services/axios_instance'\r\nimport { list_functionality } from '@/services/list-functionality/list-functionality'\r\n//components\r\n\r\nimport VueTable from '@/common/VueTable/VueTable.vue'\r\nimport InvoiceTemplateDialog from './components/InvoiceTemplateDialog.vue'\r\nimport InvoiceTemplatePreview from './components/InvoiceTemplatePreview.vue'\r\nimport InvoiceTemplateHelp from './components/InvoiceTemplateHelp.vue'\r\nimport Actions from '@/common/VueTable/Actions.vue'\r\nimport DeleteDialog from '@/common/DeleteDialog.vue'\r\n\r\nexport default {\r\n    name: 'InvoiceTemplates',\r\n    mixins: [list_functionality],\r\n    components: {\r\n        VueTable,\r\n        InvoiceTemplateDialog,\r\n        InvoiceTemplatePreview,\r\n        InvoiceTemplateHelp,\r\n        Actions,\r\n        DeleteDialog\r\n    },\r\n\r\n    data: () => ({\r\n        headers: [\r\n            { text: 'Name', align: 'left', sortable: false },\r\n            { text: 'Added By', sortable: false },\r\n            { text: 'Added On', sortable: false },\r\n            {\r\n                text: 'Action',\r\n                sortable: false,\r\n                align: 'center',\r\n                width: '140px'\r\n            }\r\n        ],\r\n        paths: [\r\n            { text: 'Dashboard', disabled: false, router_name: 'default-content' },\r\n            { text: 'Invoice Templates', disabled: false, router_name: 'templates' },\r\n        ],\r\n        activeItem: null,\r\n        isEdit: false,\r\n        invoicefields: []\r\n    }),\r\n    computed: {\r\n        user() {\r\n            return this.$store.getters.user\r\n        },\r\n        permissions() {\r\n            return this.$_permissions.get('templates')\r\n        },\r\n        defaultTemplates(){\r\n            if (this.items.length > 0) {\r\n                return this.items.filter(template => { return template.company_id === 0})\r\n            } else {\r\n                return []\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$event.$emit('path-change', this.paths)\r\n        this.getInvoiceTemplates()\r\n        this.getFields()\r\n        this.$event.$on('show-invoice-template-guide', ()=> {\r\n            this.open_help_dialog()\r\n        })\r\n    },\r\n\r\n    methods: {\r\n        can_action(item) {\r\n            return item.company_id !== 0\r\n        },\r\n        can_delete(item) {\r\n            if (this.user.is_admin) {\r\n                return true\r\n            }\r\n            return this.permissions && this.permissions.delete\r\n        },\r\n        getInvoiceTemplates() {\r\n            this.fill_table_via_url(`api/template/invoices`)\r\n        },\r\n        getMoreInvoiceTemplates() {\r\n            this.load_more_via_url(`api/template/invoices`)\r\n        },\r\n        open_add_dialog() {\r\n            this.isEdit = false\r\n            this.$refs.add_edit_dialog.open_dialog(false, null)\r\n        },\r\n        open_view_dialog(item) {\r\n            this.activeItem = item\r\n            this.$refs.view_dialog.open_dialog(item)\r\n        },\r\n        open_help_dialog() {\r\n            this.$refs.help_dialog.open_dialog()\r\n        },\r\n        open_edit_dialog(item) {\r\n            this.isEdit = true\r\n            this.activeItem = item\r\n            this.$refs.add_edit_dialog.open_dialog(true, item)\r\n        },\r\n        handleSave(data) {\r\n            if (this.isEdit) {\r\n                this.updateTemplate(data)\r\n            } else {\r\n                this.createTemplate(data)\r\n            }\r\n        },\r\n        createTemplate(data) {\r\n            request.post(`api/template/invoices`, data)\r\n                .then(({ data }) => {\r\n                    this.items.push(data)\r\n                    this.$refs.add_edit_dialog.clear_and_close()\r\n                })\r\n                .finally(() => {\r\n                    this.$event.$emit('btnloading_off', false)\r\n                })\r\n        },\r\n        updateTemplate(data) {\r\n            request.put(`api/template/invoices`, data)\r\n                .then(({ data }) => {\r\n                    let index = this.items.findIndex(ii => ii.id === data.id)\r\n                    if (~index) {\r\n                        this.items.splice(index, 1, data)\r\n                    }\r\n                    this.$refs.add_edit_dialog.clear_and_close()\r\n                })\r\n                .finally(() => {\r\n                    this.$event.$emit('btnloading_off', false)\r\n                })\r\n        },\r\n        getFields() {\r\n            request.get(`api/template/invoices/fields`)\r\n                .then(({ data }) => {\r\n                    this.invoicefields = data\r\n                })\r\n        },\r\n    }\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./InvoiceTemplates.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./InvoiceTemplates.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InvoiceTemplates.vue?vue&type=template&id=271e35ed&scoped=true&\"\nimport script from \"./InvoiceTemplates.js?vue&type=script&lang=js&\"\nexport * from \"./InvoiceTemplates.js?vue&type=script&lang=js&\"\nimport style0 from \"./InvoiceTemplates.scss?vue&type=style&index=0&id=271e35ed&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"271e35ed\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./InvoiceTemplates.scss?vue&type=style&index=0&id=271e35ed&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./InvoiceTemplates.scss?vue&type=style&index=0&id=271e35ed&lang=scss&scoped=true&\""],"sourceRoot":""}