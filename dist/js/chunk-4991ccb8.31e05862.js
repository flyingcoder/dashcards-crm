(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4991ccb8"],{"1ee9":function(e,t,a){"use strict";var o=a("ff50"),n=a.n(o);n.a},"69bf":function(e,t,a){"use strict";var o=a("6b1e"),n=a.n(o);n.a},"6b1e":function(e,t,a){},df67:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-picture"},[a("CustomDialog",{ref:"uploader",attrs:{title:e.title,"button2-text":"Save",open:e.dialog_is_open},on:{button1:e.cancel,"update:open":function(t){e.dialog_is_open=t}},scopedSlots:e._u([{key:"content",fn:function(){return[a("div",{staticClass:"content"},[a("Loader",{attrs:{loading:e.loading}}),e.file_uploaded?a("CropImage",{ref:"croppie",attrs:{image:e.image64,options:e.croppie.options,result:e.croppie.result}}):a("CustomDropzone",{ref:"dropzone",attrs:{duplicateCheck:!0,acceptedFiles:"image/*",options:e.dropzoneOptions,useCustomSlot:!0,dictFileTooBig:"File too big",dictInvalidFileType:"Invalid file type"},on:{"file-added":e.file_added}})],1)]},proxy:!0},{key:"button2",fn:function(){return[a("v-btn",{attrs:{disabled:!e.file_uploaded},on:{click:e.get_cropped_image}},[e._v(e._s(e.mainButton))])]},proxy:!0}])})],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("3835")),c=a("ade3"),s=(a("c5f6"),a("854b")),l=a("57e5"),r=a("8b7e"),p=a("8c75"),d=a("2f62"),u=a("7eac"),m=a("1be9");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(c["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:"IconUploader",components:{Loader:s["a"],CustomDialog:l["a"],CustomDropzone:r["a"],CropImage:p["a"]},props:{title:{type:String,default:"Upload Image "},type:{type:String,default:"square"},width:{type:Number,default:200},height:{type:Number,default:200},extraData:[Object,Array],dialog:{type:Boolean,default:!1},mainButton:{type:String,default:"Save"},allowResize:{type:Boolean,default:!1},filename:{type:String,default:""}},data:function(){return{file_uploaded:!1,image64:null,loading:!1,dialog_is_open:!1}},watch:{dialog:{handler:function(e){this.dialog_is_open=!!e,e&&(this.file_uploaded=!1)},immediate:!0}},computed:v(v({},Object(d["c"])(["user"])),{},{dropzoneOptions:function(){return{maxFiles:1,thumbnailWidth:this.width,addRemoveLinks:!0,method:"post",acceptedFiles:"image/*",url:u["a"].apiHostBaseURL+"/api/attachments/dropzone",headers:{Authorization:"Bearer "+localStorage.getItem("token")},autoProcessQueue:!1}},boundary:function(){return{width:this.width+100,height:this.height+100}},croppie:function(){return{options:{viewport:{width:this.width,height:this.height,type:this.type},showZoomer:!0,boundary:this.boundary,enableResize:this.allowResize,enableOrientation:!0},result:"blob"}}}),methods:{file_added:function(e){var t=this,a=Object(i["a"])(e,1),o=a[0],n=new FileReader;n.onload=function(){t.image64=n.result,t.file_uploaded=!0},n.readAsDataURL(o)},get_cropped_image:function(){this.$refs.croppie.get_result().then(this.upload_image)},upload_image:function(e){var t=this,a=new FormData;a.append("file",e),a.append("folder","icons"),a.append("name",this.filename),this.loading=!0,m["a"].post("api/file/image-upload",a).then((function(e){var a=e.data;t.$emit("uploaded-data",a),t.$refs.croppie.clear_component(),t.$event.$emit("open_snackbar","File uploaded successfully!"),Object.assign(t.$data,t.$options.data.apply(t))}))},cancel:function(){this.dialog_is_open=!1}}},b=h,g=(a("69bf"),a("2877")),_=Object(g["a"])(b,o,n,!1,null,"5827d113",null);t["a"]=_.exports},e512:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"company-wrapper"},[e.user?a("v-row",e._l(e.companies,(function(t){return a("v-col",{key:t.id,attrs:{xs:"12",sm:"6",md:"6"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[a("div",[a("v-card-title",{staticClass:"title"},[e._v(e._s(t.name))]),t.short_description?a("v-card-subtitle",[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-quote-open-outline")]),e._v(" "+e._s(t.short_description)+" ")],1):e._e(),t.domain?a("v-card-subtitle",[a("v-icon",{attrs:{left:""}},[e._v("mdi-web")]),e._v(" "+e._s(t.domain)+" ")],1):e._e(),t.email?a("v-card-subtitle",[a("v-icon",{attrs:{left:""}},[e._v("mdi-email-receive-outline")]),e._v(" "+e._s(t.email)+" ")],1):e._e(),t.long_description?a("v-card-subtitle",[a("v-icon",{attrs:{left:""}},[e._v("mdi-book-information-variant")]),e._v(" "+e._s(t.long_description)+" ")],1):e._e()],1),a("v-avatar",{staticClass:"ma-3 cursor-pointer",attrs:{size:"125",tile:""},on:{click:function(a){return e.changeIcon(t)}}},[t.company_logo?a("v-img",{attrs:{src:t.company_logo}}):a("v-icon",{attrs:{"x-large":""}},[e._v("mdi-image-edit-outline")])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.updateCompany(t)}}},[a("v-icon",[e._v("mdi-circle-edit-outline")])],1),a("v-btn",{attrs:{icon:"",disabled:""}},[a("v-icon",[e._v("mdi-delete-circle-outline")])],1)],1)],1)],1)],1)})),1):e._e(),a("IconUploader",{attrs:{dialog:e.open_dialog,filename:e.filename},on:{"uploaded-data":e.updateIcon}}),a("update-company-modal",{attrs:{company:e.activeCompany,"open-dialog":e.update_dialog},on:{updated:e.handleUpdate,"update:openDialog":function(t){e.update_dialog=t},"update:open-dialog":function(t){e.update_dialog=t}}})],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("20d6"),a("7f7f"),a("ade3")),c=(a("c5f6"),a("2f62")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("custom-dialog",{attrs:{title:"Update Company Info","button1-text":"Cancel","button2-text":"Save",open:e.open,"max-width":700},on:{"update:open":function(t){e.open=t},button2:e.save},scopedSlots:e._u([{key:"content",fn:function(){return[e.comp?a("v-row",[a("v-col",{staticClass:"mb-1",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"fullwidth",attrs:{filled:"",label:"Company Name *",dense:"","hide-details":"",value:e.comp.name},model:{value:e.comp.name,callback:function(t){e.$set(e.comp,"name",t)},expression:"comp.name"}})],1),a("v-col",{staticClass:"mb-1",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"fullwidth",attrs:{filled:"",label:"Company Slogan",dense:"","hide-details":"",value:e.comp.short_description},model:{value:e.comp.short_description,callback:function(t){e.$set(e.comp,"short_description",t)},expression:"comp.short_description"}})],1),a("v-col",{staticClass:"mb-1",attrs:{cols:"12"}},[a("v-textarea",{staticClass:"fullwidth",attrs:{rows:2,filled:"",label:"Long Description",dense:"","hide-details":"",value:e.comp.long_description},model:{value:e.comp.long_description,callback:function(t){e.$set(e.comp,"long_description",t)},expression:"comp.long_description"}})],1),a("v-col",{staticClass:"mb-1",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"fullwidth",attrs:{filled:"",label:"Company Website",dense:"","hide-details":"",value:e.comp.domain},model:{value:e.comp.domain,callback:function(t){e.$set(e.comp,"domain",t)},expression:"comp.domain"}})],1),a("v-col",{staticClass:"mb-2",attrs:{cols:"6"}},[a("v-text-field",{staticClass:"fullwidth",attrs:{filled:"",type:"email",label:"Company Email",dense:"","hide-details":"",value:e.comp.email},model:{value:e.comp.email,callback:function(t){e.$set(e.comp,"email",t)},expression:"comp.email"}})],1),a("v-col",{staticClass:"mb-2",attrs:{cols:"6"}},[a("v-text-field",{staticClass:"fullwidth",attrs:{filled:"",label:"Company Address",dense:"","hide-details":"",value:e.comp.address},model:{value:e.comp.address,callback:function(t){e.$set(e.comp,"address",t)},expression:"comp.address"}})],1),a("v-col",{attrs:{cols:"12"}},[a("span",{staticClass:"required"},[e._v("*")]),e._v(" Required Fields")])],1):e._e()]},proxy:!0}])})},l=[],r=a("57e5"),p=a("0644"),d=a.n(p),u=a("ec9c"),m={name:"UpdateCompanyModal",components:{CustomDialog:r["a"]},props:{openDialog:Boolean,company:Object},data:function(){return{open:!1,comp:null,btnloading:!1}},computed:{},watch:{openDialog:function(e){this.open=e},open:function(e){this.$emit("update:openDialog",e)},company:{handler:function(e){e&&(this.comp=d()(e))},immediate:!0,deep:!0}},methods:{save:function(){var e=this;if(this.comp.name){var t=this.comp;u["a"].update_company_profile(this.company.id,t).then((function(t){var a=t.data;e.$emit("updated",a),e.$event.$emit("open_snackbar","Company updated!"),e.closeDialog()})).finally((function(){e.btnloading=!1}))}else this.$event.$emit("open_snackbar","Company name is required!")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},f=m,v=a("2877"),h=Object(v["a"])(f,s,l,!1,null,"39ad3c81",null),b=h.exports,g=a("df67"),_=a("1be9");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={name:"Company",components:{IconUploader:g["a"],UpdateCompanyModal:b},props:{user_id:[Number,String]},computed:C(C({},Object(c["c"])("memberProfile",["user"])),{},{filename:function(){return this.activeCompany?this.activeCompany.name:""}}),mounted:function(){this.user&&(this.companies=d()(this.user.client_companies))},data:function(){return{activeCompany:{},update_dialog:!1,open_dialog:!1,companies:[]}},methods:{changeIcon:function(e){this.activeCompany=e,this.open_dialog=!0},updateIcon:function(e){var t=this,a={url:e.url,logo_details:e};_["a"].post("api/company/".concat(this.activeCompany.id,"/logo/via-url"),a).then((function(e){var a=e.data;t.handleUpdate(a),t.open_dialog=!1}))},updateCompany:function(e){this.activeCompany=e,this.update_dialog=!0},handleUpdate:function(e){var t=this.companies.findIndex((function(t){return t.id==e.id}));~t&&this.companies.splice(t,1,e)}}},w=O,j=(a("1ee9"),Object(v["a"])(w,o,n,!1,null,null,null));t["default"]=j.exports},ec9c:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a("1be9"),n={upload_image:function(e,t){return o["a"].post("api/company/".concat(e,"/logo"),t)},upload_image_via_url:function(e,t){return o["a"].post("api/company/".concat(e,"/logo/via-url"),t)},update_company_profile:function(e,t){return o["a"].put("api/company/".concat(e,"/info"),t)},get_company_info:function(e){return o["a"].get("api/company/".concat(e,"/info"))}}},ff50:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4991ccb8.31e05862.js.map