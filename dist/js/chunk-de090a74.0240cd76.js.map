{"version":3,"sources":["webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue?991a","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue?82c4","webpack:///./src/modules/ProjectPreview-Invoice/api.js","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.js","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.js?b763","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.scss?8c69"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","on","invoice_updated","view_item","delete_dialog","$event","delete_invoice","bulk_delete_dialog","bulk_delete","key","componentKey","items","headers","loading","tableTitle","noMoreData","getMoreInvoices","open_bulk_delete_dialog","scopedSlots","_u","fn","item","_v","_s","title","_g","billed_to","image_url","fullname","_f","due_date","total_amount","open_delete_dialog","open_edit_dialog","open_view_dialog","staticRenderFns","apiTo","getInvoices","projectId","page","request","get","id","delete","update_invoice","payload","post","get_all_projects","name","mixins","list_functionality","global_utils","components","VueTable","DeleteDialog","ViewInvoice","Actions","StepperInvoiceDialog","props","Number","String","data","text","value","width","align","view_invoice_dialog","mounted","$emit","paths","fetch_data","computed","type","$route","params","disabled","router_name","methods","mapMutations","delete_item_id","index","findIndex","splice","$refs","open_dialog","set_toolbar","open_invoice_for_editing","_cloneDeep","set_selected_project","project_id","set_dialog","open","invoiceEditDialog","openDialog","then","res2","set_projects","pagination","current","current_page","total","last_page","hasMoreData","finally","forEach","push","invoice","component"],"mappings":"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","file":"js/chunk-de090a74.0240cd76.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invoice.vue?vue&type=style&index=1&id=232f08f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invoice.vue?vue&type=style&index=1&id=232f08f4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"invoice\"},[_c('StepperInvoiceDialog',{ref:\"invoiceEditDialog\",attrs:{\"projectLock\":true,\"type\":\"edit\"},on:{\"updated\":_vm.invoice_updated}}),_c('ViewInvoice',{ref:\"view_invoice_dialog\",attrs:{\"item\":_vm.view_item}}),_c('delete-dialog',{attrs:{\"open-dialog\":_vm.delete_dialog,\"title\":\"Delete Invoice\",\"text-content\":\"Are you sure you want to delete this invoice?\"},on:{\"update:openDialog\":function($event){_vm.delete_dialog=$event},\"update:open-dialog\":function($event){_vm.delete_dialog=$event},\"delete\":_vm.delete_invoice}}),_c('delete-dialog',{attrs:{\"open-dialog\":_vm.bulk_delete_dialog,\"title\":\"Delete Invoices\",\"text-content\":\"Are you sure you want to delete these invoices? This can't be undone.\"},on:{\"update:openDialog\":function($event){_vm.bulk_delete_dialog=$event},\"update:open-dialog\":function($event){_vm.bulk_delete_dialog=$event},\"delete\":function($event){return _vm.bulk_delete('bulk_delete_invoices')}}}),_c('VueTable',{key:_vm.componentKey,attrs:{\"items\":_vm.items,\"headers\":_vm.headers,\"showRowActions\":true,\"icon\":\"list\",\"loading\":_vm.loading,\"title\":_vm.tableTitle,\"noMoreData\":_vm.noMoreData},on:{\"load-more\":_vm.getMoreInvoices,\"delete-selected\":function($event){return _vm.open_bulk_delete_dialog($event)}},scopedSlots:_vm._u([{key:\"row-slot\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(item.title))]),_c('td',[_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-avatar',_vm._g({attrs:{\"color\":\"teal\",\"size\":\"35\"}},on),[_c('v-img',{attrs:{\"src\":item.billed_to.image_url}})],1)]}}],null,true)},[_c('span',[_vm._v(_vm._s(item.billed_to.fullname))])]),_vm._v(\" \"+_vm._s(item.billed_to.fullname)+\" \")],1),_c('td',[_vm._v(_vm._s(_vm._f(\"format\")(item.due_date)))]),_c('td',[_vm._v(_vm._s(_vm._f(\"money\")(item.total_amount)))]),_c('Actions',{attrs:{\"item\":item},on:{\"delete\":function($event){return _vm.open_delete_dialog(item)},\"edit\":function($event){return _vm.open_edit_dialog(item)},\"view\":function($event){return _vm.open_view_dialog(item)}}})]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/services/axios_instance'\n\nexport const apiTo = {\n  getInvoices(projectId, page) {\n    return request.get(`api/projects/${projectId}/invoice?page=${page}`)\n  },\n\n  delete_invoice(id) {\n    return request.delete(`api/invoice/${id}`)\n  },\n  update_invoice(payload, id) {\n    return request.post(`api/invoice/${id}`, payload, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  },\n  get_all_projects() {\n    return request.get('api/projects?all=true')\n  }\n}\n","import { apiTo } from './api'\nimport { list_functionality } from '@/services/list-functionality/list-functionality'\nimport { mapMutations } from 'vuex'\nimport _cloneDeep from 'lodash/cloneDeep'\nimport { global_utils } from '@/global_utils/global_utils'\n//Components\n\nimport ViewInvoice from '@/modules/Invoice/components/ViewInvoice/ViewInvoice.vue'\nimport DeleteDialog from '@/common/DeleteDialog.vue'\nimport VueTable from '@/common/VueTable/VueTable.vue'\nimport Actions from '@/common/VueTable/Actions.vue'\nimport StepperInvoiceDialog from '@/modules/Invoice/components/StepperDialog/StepperInvoiceDialog.vue'\n\nexport default {\n    name: 'Invoice',\n    mixins: [list_functionality, global_utils],\n\n    components: {\n        VueTable,\n        DeleteDialog,\n        ViewInvoice,\n        Actions,\n        StepperInvoiceDialog\n    },\n\n    props: {\n        id: [Number, String]\n    },\n\n    data: () => ({\n        headers: [\n            { text: 'Invoice', value: 'invoice', width: '30%' },\n            { text: 'Client', value: 'client', width: '20%' },\n            { text: 'Due Date', value: 'due_date', width: '20%' },\n            { text: 'Amount', value: 'amount', width: '10%' },\n            { text: 'Actions', value: 'action', width: '20%', align: 'center' }\n        ],\n        view_invoice_dialog: false,\n        view_item: null,\n    }),\n\n    mounted() {\n        this.$event.$emit('path-change', this.paths)\n        this.loading = true\n        this.fetch_data()\n        this.getInvoices()\n    },\n    computed: {\n        type() {\n            return this.$route.params.type || 'project'\n        },\n        tableTitle() {\n            return this.type === 'project' ? `Project Invoice` : 'Campaign Invoice'\n        },\n        paths() {\n            return [\n                { text: 'Dashboard', disabled: false, router_name: 'default-content' },\n                { text: this.type, disabled: true, router_name: null },\n                { text: 'Invoice', disabled: true, router_name: null }\n            ]\n        }\n\n    },\n    methods: {\n        ...mapMutations('invoice', [\n            'set_dialog',\n            'set_toolbar',\n            'set_projects',\n            'open_invoice_for_editing',\n            'set_selected_project'\n        ]),\n        async delete_invoice() {\n            this.loading = true\n            this.delete_dialog = false\n            await apiTo.delete_invoice(this.delete_item_id)\n            this.loading = false\n            const index = this.items.findIndex(\n                item => item.id === this.delete_item_id\n            )\n            if (~index) this.items.splice(index, 1)\n        },\n        open_view_dialog(data) {\n            this.view_item = data\n            this.$refs.view_invoice_dialog.open_dialog(data)\n        },\n        open_edit_dialog(data) {\n            this.set_toolbar({ title: 'Edit Dialog' })\n            this.open_invoice_for_editing(_cloneDeep(data))\n            this.set_selected_project(data.project_id)\n            this.set_dialog({ type: 'edit', open: true })\n            this.$refs.invoiceEditDialog.openDialog()\n        },\n        fetch_data() {\n            apiTo.get_all_projects().then(res2 => {\n                this.set_projects(res2.data)\n            })\n        },\n        getInvoices() {\n            this.loading = true\n            apiTo\n                .getInvoices(this.id, this.pagination.current)\n                .then(({ data }) => {\n                    this.items = data.data\n                    this.pagination.current = data.current_page\n                    this.pagination.total = data.last_page\n                    this.hasMoreData()\n                })\n                .finally(() => {\n                    this.loading = false\n                    this.$event.$emit('btnloading_off', false)\n                })\n        },\n        getMoreInvoices() {\n            this.loading = true\n            apiTo\n                .getInvoices(this.id, this.pagination.current + 1)\n                .then(({ data }) => {\n                    data.data.forEach(item => {\n                        this.items.push(item)\n                    })\n                    this.pagination.current = data.current_page\n                    this.pagination.total = data.last_page\n                    this.hasMoreData()\n                })\n                .finally(() => {\n                    this.loading = false\n                    this.$event.$emit('btnloading_off', false)\n                })\n        },\n        invoice_updated(invoice) {\n            const index = this.items.findIndex(item => item.id === invoice.id)\n            if (~index) {\n                this.items.splice(index, 1, invoice)\n            }\n        }\n    }\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Invoice.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Invoice.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Invoice.vue?vue&type=template&id=232f08f4&scoped=true&\"\nimport script from \"./Invoice.js?vue&type=script&lang=js&\"\nexport * from \"./Invoice.js?vue&type=script&lang=js&\"\nimport style0 from \"./Invoice.scss?vue&type=style&index=0&id=232f08f4&lang=scss&scoped=true&\"\nimport style1 from \"./Invoice.vue?vue&type=style&index=1&id=232f08f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"232f08f4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Invoice.scss?vue&type=style&index=0&id=232f08f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Invoice.scss?vue&type=style&index=0&id=232f08f4&lang=scss&scoped=true&\""],"sourceRoot":""}