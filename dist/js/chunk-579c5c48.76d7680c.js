(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579c5c48"],{"0edc5":function(e,t,i){},"13ea":function(e,t,i){var n=i("03dd"),s=i("42a2"),a=i("d370"),o=i("6747"),l=i("30c9"),r=i("0d24"),c=i("eac5"),u=i("73ac"),d="[object Map]",p="[object Set]",f=Object.prototype,_=f.hasOwnProperty;function g(e){if(null==e)return!0;if(l(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||r(e)||u(e)||a(e)))return!e.length;var t=s(e);if(t==d||t==p)return!e.size;if(c(e))return!n(e).length;for(var i in e)if(_.call(e,i))return!1;return!0}e.exports=g},"174f":function(e,t,i){},2194:function(e,t,i){"use strict";var n=i("6b82"),s=i.n(n);s.a},"259d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:e.paths},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:n.disabled}},[i("span",{on:{click:function(t){return e.navigate_from_breadcrumb(n)}}},[e._v(" "+e._s(n.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("chevron_right")])],1),e._t("extra")],2)},s=[],a={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(e){if(e.hasOwnProperty("path"))e.path&&this.$router.push({path:e.path});else{var t=e.router_name;t&&this.$router.push({name:t})}}}},o=a,l=(i("5e17"),i("79a2"),i("2877")),r=Object(l["a"])(o,n,s,!1,null,"3cda09ee",null);t["a"]=r.exports},"29d6":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{staticClass:"table-header",attrs:{wrap:""}},[i("breadcrumb",{attrs:{paths:e.paths}}),i("v-flex",[e.noButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click")}}},[i("v-icon",[e._v("add")])],1),e.noSortButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-sort-by")}}},[i("v-icon",[e._v("sort")])],1),e.noListButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-list-view")}}},[i("v-icon",[e._v("list")])],1),e.noGridButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-grid-view")}}},[i("v-icon",[e._v("mdi-view-dashboard")])],1),e._t("form-btn")],2)],1)},s=[],a=i("259d"),o={name:"TableHeader",props:{paths:{type:Array,default:[]},noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:a["a"]}},l=o,r=(i("337a"),i("2877")),c=Object(r["a"])(l,n,s,!1,null,"b8bfd1cc",null);t["a"]=c.exports},"337a":function(e,t,i){"use strict";var n=i("9e25"),s=i.n(n);s.a},"4a58":function(e,t,i){},"57e5":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.loading?i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):i("v-card",{staticClass:"custom__dialog"},[i("v-card-title",{staticClass:"dialog__header"},[e._t("entire-header",[e._t("title",[i("span",{staticClass:"dialog__title"},[e._v(e._s(e.title))])]),e._t("cancel-icon",[i("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:"",depressed:""},on:{click:e.close_dialog}},[i("v-icon",[e._v("close")])],1)])])],2),i("v-card-text",{staticClass:"dialog__body"},[e._t("content",[e._v(" "+e._s(e.content)+" ")])],2),i("v-card-actions",{staticClass:"dialog__actions"},[e._t("entire-actions",[e._t("button1",[i("v-btn",{attrs:{disabled:e.btnloading},on:{click:e.button1clicked}},[e._v(e._s(e.button1Text))])]),e._t("button2",[i("v-btn",{attrs:{loading:e.btnloading,disabled:e.mainBtnDisabled},on:{click:e.button2clicked}},[e._v(e._s(e.button2Text))])])])],2)],1)],1)],1)},s=[],a={props:{title:{type:String,default:"Default Modal Title"},content:{type:String,default:"Default Modal Text Content"},button1Text:{type:String,default:"Cancel"},button2Text:{type:String,default:"Delete"},open:Boolean,value:Boolean,mainBtnDisabled:{type:Boolean,default:!1}},data:function(){return{dialog:!1,loading:!1,btnloading:!1}},mounted:function(){var e=this;this.$event.$on("btnloading_off",(function(t){return e.btnloading=t}))},watch:{value:{handler:function(e){this.dialog=e},immediate:!0},open:function(e){this.dialog=e},dialog:function(e){this.$emit("update:open",e),this.$emit("input",e)}},methods:{button1clicked:function(){this.$emit("button1"),this.close_dialog()},button2clicked:function(){this.btnloading=!0,this.$emit("button2")},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.close_dialog()},activate_loading:function(){this.loading=!0},disable_loading:function(){this.loading=!1}}},o=a,l=(i("b468"),i("2194"),i("2877")),r=Object(l["a"])(o,n,s,!1,null,"08620c7e",null);t["a"]=r.exports},"5b70":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("custom-dialog",{attrs:{title:e.title,content:e.textContent,"button1-text":e.cancelButtonText,"button2-text":e.deleteButtonText,open:e.open},on:{"update:open":function(t){e.open=t},button1:e.cancel_clicked,button2:e.delete_clicked}})],1)},s=[],a=i("57e5"),o={components:{CustomDialog:a["a"]},props:{title:{type:String,default:"Default Modal Title"},textContent:{type:String,default:"Default Modal Text Content"},cancelButtonText:{type:String,default:"Cancel"},deleteButtonText:{type:String,default:"Delete"},openDialog:Boolean},data:function(){return{open:!1}},watch:{openDialog:function(e){this.open=e},open:function(e){this.$emit("update:openDialog",e)}},methods:{cancel_clicked:function(){this.open=!1},delete_clicked:function(){this.$emit("delete")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},l=o,r=i("2877"),c=Object(r["a"])(l,n,s,!1,null,null,null);t["a"]=c.exports},"5e17":function(e,t,i){"use strict";var n=i("8c6e"),s=i.n(n);s.a},"6b82":function(e,t,i){},"79a2":function(e,t,i){"use strict";var n=i("0edc5"),s=i.n(n);s.a},"7c09":function(e,t,i){"use strict";var n=i("f4c6"),s=i.n(n);s.a},"7e7e":function(e,t,i){"use strict";var n=i("174f"),s=i.n(n);s.a},"8c6e":function(e,t,i){},"9e25":function(e,t,i){},b468:function(e,t,i){"use strict";var n=i("4a58"),s=i.n(n);s.a},bfa3:function(e,t,i){},cbd8:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"permissions-table"},[i("permissions-dialog",{ref:"add_dialog",attrs:{dialog:e.add_dialog,title:"Add Permission"},on:{"update:dialog":function(t){e.add_dialog=t},save:function(t){return e.add_item("add_new_permission",t)}}}),i("permissions-dialog",{ref:"edit_dialog",attrs:{dialog:e.edit_dialog,title:"Edit Permission","is-edit-dialog":e.edit_dialog,"fields-to-edit":e.edit_item},on:{"update:dialog":function(t){e.edit_dialog=t},save:function(t){return e.update_item("update_permission",t)}}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Permission","text-content":"Are you sure you want to delete this permission?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_permission")}}}),i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"widgets",title:"Permissions",noMoreData:e.noMoreData,showSelect:!1,loading:e.loading,hasFooter:!1},on:{"load-more":e.load_more_users},scopedSlots:e._u([{key:"header",fn:function(){return[i("v-row",{attrs:{"no-gutters":""}},[i("v-spacer"),i("v-col",{attrs:{md:"3",sm:"12"}},[i("v-select",{attrs:{solo:"",label:"Select Group",items:e.groups},model:{value:e.selected_group,callback:function(t){e.selected_group=t},expression:"selected_group"}})],1)],1)]},proxy:!0},{key:"row-slot",fn:function(t){var n=t.item;return[i("td",[e._v(e._s(e._f("removeSlug")(n.name)))]),i("td",[e._v(e._s(n.description))]),i("td",[e._v(e._s(e.capability_column(n.slug)))]),i("Actions",{attrs:{item:n,hasDelete:!1,hasView:!1,permissions:e.$_permissions.get("permissions")},on:{edit:function(t){return e.open_edit_dialog(n)}}})]}}])})],1)},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("28a5"),i("6b54"),i("7f7f"),i("bd86")),o=(i("386d"),i("a481"),i("c5f6"),i("e06e")),l=i("13ea"),r=i.n(l),c=i("1be9"),u={get_permissions:function(){return c["a"].get("api/permission?all=true")},get_default_permissions:function(){return c["a"].get("api/permission/defaults")},get_role_permissions:function(){return c["a"].get("api/roles/permissions")},get_default_roles:function(){return c["a"].get("api/roles/defaults")},get_company_roles:function(){return c["a"].get("api/roles/company")}},d=i("259d"),p=i("5b70"),f=i("29d6"),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{"justify-center":""}},[i("custom-dialog",{ref:"dialog",attrs:{title:e.title,open:e.open,"button2-text":"Save"},on:{"update:open":function(t){e.open=t},button1:function(t){e.open=!1},button2:e.save}},[i("template",{slot:"content"},[i("v-layout",{staticClass:"custom-dialog",attrs:{wrap:""}},[e.fieldsToEdit?e._e():i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{staticClass:"dialog__selectfield",attrs:{placeholder:"Select Group",items:e.group_items,solo:"","hide-details":"",color:"#657186","item-text":"name","item-value":"slug"},model:{value:e.selected_group,callback:function(t){e.selected_group="string"===typeof t?t.trim():t},expression:"selected_group"}})],1),e.fieldsToEdit?e._e():i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-autocomplete",{staticClass:"dialog__selectfield",attrs:{items:e.permissions,loading:e.loading_permissions,placeholder:"Select Permission","item-text":"name","item-value":"id",solo:"","hide-details":"",color:"#657186"},model:{value:e.selected_permission,callback:function(t){e.selected_permission="string"===typeof t?t.trim():t},expression:"selected_permission"}})],1),e.fieldsToEdit?i("v-flex",{attrs:{xs12:"",sm12:""}},[i("label",[e._v("Edit permission for "),i("strong",[e._v(e._s(e.permission_name))])])]):e._e(),i("div",{staticClass:"permissions"},[i("div",{staticClass:"title"},[i("div",{staticClass:"left-line line"}),i("h4",[e._v("Permissions")]),i("div",{staticClass:"right-line line"})]),i("div",{staticClass:"items"},[i("v-switch",{attrs:{label:"View"},model:{value:e.slug.view,callback:function(t){e.$set(e.slug,"view",t)},expression:"slug.view"}}),i("v-switch",{attrs:{label:"Create"},model:{value:e.slug.create,callback:function(t){e.$set(e.slug,"create",t)},expression:"slug.create"}}),i("v-switch",{attrs:{label:"Update"},model:{value:e.slug.update,callback:function(t){e.$set(e.slug,"update",t)},expression:"slug.update"}}),i("v-switch",{attrs:{label:"Delete"},model:{value:e.slug.delete,callback:function(t){e.$set(e.slug,"delete",t)},expression:"slug.delete"}})],1)]),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{staticClass:"dialog__textarea",attrs:{label:"Description",solo:"","hide-details":"",color:"#657186"},model:{value:e.description,callback:function(t){e.description="string"===typeof t?t.trim():t},expression:"description"}})],1)],1)],1)],2)],1)},g=[],m=i("0644"),h=i.n(m),v=i("57e5"),b=i("d4e9"),y={name:"PermissionDialog",components:{CustomDialog:v["a"]},props:{dialog:Boolean,title:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,description:null,permission_name:null,selected_permission:null,selected_group:null,permissions:[],group_items:[],loading_permissions:!1,slug:{create:!1,view:!1,update:!1,delete:!1}}},watch:{dialog:{handler:function(e){this.open=e,e&&this.fill_group_items()},immediate:!0},open:function(e){this.$emit("update:dialog",e)},fieldsToEdit:{handler:function(e){this.isEditDialog&&this.update_fields(e)},deep:!0},"slug.create":function(e){e?this.slug.view=!0:this.slug.update=!1},"slug.update":function(e){e?this.slug.create=!0:this.slug.delete=!1},"slug.delete":function(e){e&&(this.slug.update=!0)},"slug.view":function(e){e||(this.slug={create:!1,view:!1,update:!1,delete:!1})}},created:function(){var e=this;this.loading_permissions=!0,u.get_default_permissions().then((function(t){var i=t.data;return e.permissions=i})).finally((function(){return e.loading_permissions=!1}))},methods:{fill_group_items:function(){var e=this;this.loading=!1,b["a"].get_all_groups().then((function(t){var i=t.data;return e.group_items=i})).finally((function(){return e.loading=!1}))},cancel:function(){this.open=!1},save:function(){var e={permission_id:this.selected_permission,group:this.selected_group,description:this.description,slug:this.slug};this.$emit("save",e)},update_fields:function(e){var t=e.fields,i=h()(t);this.selected_group=i.selected_group,this.description=i.description,this.slug=i.slug,this.permission_name=i.name},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},w=y,x=(i("e31c"),i("2877")),k=Object(x["a"])(w,_,g,!1,null,"136a8c1e",null),$=k.exports,D=i("0ebe"),C=i("ee09");function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){Object(a["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var j={name:"PermissionsTable",mixins:[o["a"]],components:{VueTable:D["a"],Breadcrumb:d["a"],PermissionsDialog:$,DeleteDialog:p["a"],TableHeader:f["a"],Actions:C["a"]},data:function(){return{paths:[{text:"Settings",disabled:!1,router_name:"settings"},{text:"Permissions",disabled:!0,router_name:null}],headers:[{text:"Name",value:"name",sortable:!0,align:"left"},{text:"Description",value:"description",sortable:!0,align:"left"},{text:"Capability",value:"capability",sortable:!1,align:"left"},{text:"Action",sortable:!1,width:"120px",align:"center"}],table_config:{route_name:"settings",add_message:"New Permission added successfully!",update_message:"Permission updated successfully!",delete_message:"Permission deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_permissions_table"},groups:[],selected_group:null}},watch:{api_query:function(e,t){var i=Number(this.extract_per_page(e)),n=Number(this.extract_per_page(t))||null;this.items_response&&this.rows_per_page===this.items.length&&i!==n||(this.$router.replace({name:this.table_config.route_name,query:{tab:"permissions",page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting,role:this.selected_group}}),this.loading=!0,this.refresh_table(e))},selected_group:function(e){this.fill_table("get_role_permissions",!0,e)}},created:function(){this.fill_groups();var e=B({},this.$route.query);r()(e)||this.update_table_actions(e)},methods:{toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},capability_column:function(e){switch(!0){case e.view&&!e.create&&!e.update&&!e.delete:return 1;case e.view&&e.create&&!e.update&&!e.delete:return 2;case e.view&&e.create&&e.update&&!e.delete:return 3;case e.view&&e.create&&e.update&&e.delete:return 4;default:return 0}},fill_groups:function(){var e=this;u.get_company_roles().then((function(t){var i=t.data;e.groups=i.map((function(e){return{value:e.id,text:e.name}}))})).finally((function(){e.selected_group=e.groups[0].value}))}},filters:{removeSlug:function(e){return e?(e=e.toString(),e.split(".")[0]):""}}},S=j,P=(i("7c09"),Object(x["a"])(S,n,s,!1,null,"1d535ca4",null));t["default"]=P.exports},e31c:function(e,t,i){"use strict";var n=i("bfa3"),s=i.n(n);s.a},ee09:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[e.hasEdit?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.can_edit,expression:"can_edit"}],attrs:{dense:"",dense:"",icon:""},on:{click:function(t){return e.handle_action("edit")}}},[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.editIcon))])],1):e._e(),e.hasDelete?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.can_delete,expression:"can_delete"}],attrs:{dense:"",icon:""},on:{click:function(t){return e.handle_action("delete")}}},[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.deleteIcon))])],1):e._e(),e.hasView?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.can_view,expression:"can_view"}],attrs:{dense:"",icon:""},on:{click:function(t){return e.handle_action("view")}}},[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.viewIcon))])],1):e._e()],1)},s=[],a={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-pencil"},viewIcon:{type:String,default:"pageview"},deleteIcon:{type:String,default:"mdi-delete"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(e){this.item&&this.$emit(e,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},o=a,l=(i("7e7e"),i("2877")),r=Object(l["a"])(o,n,s,!1,null,null,null);t["a"]=r.exports},f4c6:function(e,t,i){}}]);
//# sourceMappingURL=chunk-579c5c48.76d7680c.js.map