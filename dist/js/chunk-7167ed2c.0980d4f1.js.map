{"version":3,"sources":["webpack:///./src/modules/Checkout/Checkout.scss?c0e4","webpack:///./src/modules/Checkout/Checkout.vue?3225","webpack:///./src/modules/Checkout/Checkout.js","webpack:///./src/modules/Checkout/Checkout.js?ec02","webpack:///./src/modules/Checkout/Checkout.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","appProduct","images","_v","_s","price","_f","plan","currency","nickname","_m","submitting","on","$event","preventDefault","back_to_pricing","submit_payment","_e","staticRenderFns","stripe","Stripe","settings","pub_key","elements","style","base","color","lineHeight","fontFamily","fontSmoothing","fontSize","invalid","iconColor","name","props","default","data","card","computed","mapGetters","global_configs","stripe_app_plan","unit_amount","beforeRouteEnter","to","from","next","vm","mounted","create","mount","addEventListener","event","displayError","document","getElementById","error","textContent","message","beforeDestroy","$options","components","Checkout","methods","destroy","$refs","checkout","$router","push","_this","createToken","then","result","errorElement","makeRequestTo","token","id","response","status","$store","dispatch","$emit","statusText","finally","component"],"mappings":"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","file":"js/chunk-7167ed2c.0980d4f1.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Checkout.scss?vue&type=style&index=0&id=1f2367b2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Checkout.scss?vue&type=style&index=0&id=1f2367b2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.price)?_c('div',{ref:\"checkout\",staticClass:\"checkout\"},[_c('div',{staticClass:\"payment__container\"},[_c('v-card',{staticClass:\"mb-3\",attrs:{\"flat\":\"\"}},[_c('v-card-text',[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"src\":_vm.appProduct.images[1],\"width\":\"300px\",\"tile\":\"\"}})],1),_c('v-card-title',[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"headline text-center\"},[_vm._v(\" You are going to pay \"),_c('h1',[_vm._v(\" \"+_vm._s(_vm.price)+\" \"+_vm._s(_vm._f(\"uppercase\")(_vm.plan.currency))+\" \")]),_vm._v(\" for \"+_vm._s(_vm.plan.nickname)+\" subscription \")])],1)],1)],1)],1),_c('form',{attrs:{\"id\":\"payment-form\"}},[_vm._m(0),_c('v-row',[_c('v-btn',{staticClass:\"ml-3\",attrs:{\"disabled\":_vm.submitting,\"color\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.back_to_pricing($event)}}},[_vm._v(\"Back\")]),_c('v-spacer'),_c('v-btn',{staticClass:\"mr-3\",attrs:{\"loading\":_vm.submitting,\"color\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submit_payment($event)}}},[_vm._v(\"Submit Payment\")])],1)],1)],1)]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"mb-2\",attrs:{\"for\":\"card-element\"}},[_vm._v(\" Credit or debit card \")]),_c('div',{staticClass:\"mt-3\",attrs:{\"id\":\"card-element\"}}),_c('div',{attrs:{\"id\":\"card-errors\",\"role\":\"alert\"}})])}]\n\nexport { render, staticRenderFns }","import makeRequestTo from '@/services/makeRequestTo'\r\nimport {settings} from '@/variables.js'\r\nimport {mapGetters} from 'vuex'\r\n// Create a Stripe client.\r\n// eslint-disable-next-line\r\nconst stripe = Stripe(settings.stripe.pub_key)\r\n// Create an instance of Elements.\r\nlet elements = stripe.elements()\r\n\r\n// Custom styling can be passed to options when creating an Element.\r\n// (Note that this demo uses a wider set of styles than the guide below.)\r\nlet style = {\r\n    base: {\r\n        color: '#32325d',\r\n        lineHeight: '18px',\r\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\r\n        fontSmoothing: 'antialiased',\r\n        fontSize: '16px',\r\n        '::placeholder': {\r\n            color: '#aab7c4'\r\n        }\r\n    },\r\n    invalid: {\r\n        color: '#fa755a',\r\n        iconColor: '#fa755a'\r\n    }\r\n}\r\n\r\nexport default {\r\n    name: 'Checkout',\r\n    props: {\r\n        plan: {\r\n            default: null\r\n        }\r\n    },\r\n\r\n    data: () => ({\r\n        card: null,\r\n        submitting: false\r\n    }),\r\n\r\n    computed: {\r\n        ...mapGetters(['global_configs']),\r\n        appProduct() {\r\n            return this.global_configs.stripe_app_plan\r\n        },\r\n        price() {\r\n            return this.plan.unit_amount / 100\r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        next(vm => {\r\n            if (!vm.plan) next({name: 'not_found'})\r\n            else next()\r\n        })\r\n    },\r\n\r\n    mounted() {\r\n        this.card = elements.create('card', {style: style})\r\n        this.card.mount('#card-element')\r\n\r\n        // Handle real-time validation errors from the card Element.\r\n        this.card.addEventListener('change', function (event) {\r\n            let displayError = document.getElementById('card-errors')\r\n            if (event.error) {\r\n                displayError.textContent = event.error.message\r\n            } else {\r\n                displayError.textContent = ''\r\n            }\r\n        })\r\n    },\r\n\r\n    beforeDestroy() {\r\n        delete this.$options.components.Checkout\r\n    },\r\n\r\n    methods: {\r\n        back_to_pricing() {\r\n            this.card.destroy(this.$refs.checkout);\r\n            this.$router.push({name: 'pricing'})\r\n        },\r\n        submit_payment() {\r\n            var _this = this\r\n            _this.submitting = true\r\n            stripe.createToken(this.card)\r\n                .then(function (result) {\r\n                    if (result.error) {\r\n                        let errorElement = document.getElementById('card-errors')\r\n                        errorElement.textContent = result.error.message\r\n                    } else {\r\n                        makeRequestTo.checkout({token: result.token.id, plan: _this.plan.id})\r\n                            .then(response => {\r\n                                if (response.status === 200) {\r\n                                    _this.$store.dispatch('fetchUser')\r\n                                    _this.$event.$emit('open_snackbar', 'Successfully subscribed to ' + _this.plan.nickname, 'success')\r\n                                    _this.$router.push({name: 'default-content'})\r\n                                } else {\r\n                                    _this.$event.$emit('open_snackbar', response.statusText, 'error')\r\n                                }\r\n                            })\r\n                    }\r\n                })\r\n                .finally(() => _this.submitting = false)\r\n        }\r\n    }\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Checkout.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Checkout.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout.vue?vue&type=template&id=1f2367b2&scoped=true&\"\nimport script from \"./Checkout.js?vue&type=script&lang=js&\"\nexport * from \"./Checkout.js?vue&type=script&lang=js&\"\nimport style0 from \"./Checkout.scss?vue&type=style&index=0&id=1f2367b2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f2367b2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}