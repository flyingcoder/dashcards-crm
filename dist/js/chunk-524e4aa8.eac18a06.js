(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-524e4aa8"],{"07be":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tasks-tab"},[i("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:!0}}),i("v-layout",{staticClass:"actions",attrs:{"justify-between":""}},[i("v-autocomplete",{staticClass:"col-md-3 mx-1",attrs:{"hide-details":"",dense:"",solo:"",flat:"",items:t.searchResult,loading:t.isFetching,"search-input":t.search,clearable:"","cache-items":"","item-text":"title",placeholder:"Start typing to Search","prepend-inner-icon":"search",outlined:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[i("v-list-item",[i("v-list-item-title",[t._v(" Search for "),i("strong",[t._v("Task")])])],1)]},proxy:!0},{key:"item",fn:function(e){var n=e.item;return[i("v-list-item",{on:{click:function(e){return t.showTask(n)}}},[i("v-list-item-avatar",[n.assignee.length>0?i("v-img",{attrs:{src:n.assignee[0].image_url}}):i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:t._f("truncate")(n.title,25)}}),i("v-list-item-subtitle",{domProps:{innerHTML:t._f("truncate")(n.description,25)}})],1)],1)]}}]),model:{value:t.searchbox,callback:function(e){t.searchbox=e},expression:"searchbox"}}),i("v-spacer"),i("v-btn",{attrs:{color:"#3b589e",dark:"",fab:"",small:"",title:"Add New Task"},on:{click:t.open_new_task_dialog}},[i("v-icon",[t._v("add")])],1)],1),i("div",{staticClass:"cards"},[i("tasks-card",{attrs:{id:t.id,page:t.page}}),t.active_task_id?i("preview-card",{attrs:{id:t.id,activeId:t.active_task_id}}):i("Empty",{attrs:{headline:"Add more task..."},scopedSlots:t._u([{key:"extra",fn:function(){return[i("v-btn",{attrs:{large:"",dark:"",color:"#3b589e"},on:{click:t.open_new_task_dialog}},[t._v("Add Task ")])]},proxy:!0}])})],1)],1)},a=[],s=(i("c5f6"),i("1be9")),r=i("71b5"),o=i("3364"),c=i("72c1"),l=i("4752"),d={name:"TasksTab",components:{TasksCard:r["a"],PreviewCard:o["a"],Avatars:c["a"],Empty:l["a"]},props:{id:[Number,String]},data:function(){return{loading:!1,active_task_id:null,page:"project-preview",searchbox:null,search:null,showSearchbox:!0,isFetching:!1,searchResult:[],timeout:null}},created:function(){var t=this;this.$event.$on("show-task-side-preview",(function(e){t.active_task_id=e.id}))},provide:function(){var t=this,e={};return Object.defineProperty(e,"loading",{get:function(){return t.loading}}),{properties:e,bodyMaxHeight:"auto"}},watch:{selected_tab:{handler:function(t){},immediate:!0},search:function(t){var e=this;!t||t.length<2||this.isFetching||(this.isFetching=!0,clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.fetchEntries(t)}),500))}},methods:{fetchEntries:function(t){var e=this;this.searchResult=[],s["a"].get("api/projects/".concat(this.id,"/tasks/search?keyword=").concat(t)).then((function(t){var i=t.data;e.searchResult=i.data})).finally((function(){return e.isFetching=!1}))},open_new_task_dialog:function(){this.$event.$emit("task-add")},showTask:function(t){this.$event.$emit("show-task-side-preview",t)}}},u=d,f=(i("55e9"),i("5d58e"),i("2877")),h=Object(f["a"])(u,n,a,!1,null,"9f09b094",null);e["default"]=h.exports},"2f21":function(t,e,i){"use strict";var n=i("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"386d":function(t,e,i){"use strict";var n=i("cb7c"),a=i("83a1"),s=i("5f1b");i("214f")("search",1,(function(t,e,i,r){return[function(i){var n=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=r(i,t,this);if(e.done)return e.value;var o=n(t),c=String(this),l=o.lastIndex;a(l,0)||(o.lastIndex=0);var d=s(o,c);return a(o.lastIndex,l)||(o.lastIndex=l),null===d?-1:d.index}]}))},"408c":function(t,e,i){var n=i("2b3e"),a=function(){return n.Date.now()};t.exports=a},4752:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty my-1",attrs:{id:t.slug}},[i("div",{staticClass:"empty-content"},[i("div",{staticClass:"center-wrapper"},[i("div",{staticClass:"empty-svg"},[i("svg",{attrs:{viewBox:"0 0 250 250"}},[i("path",{attrs:{d:"M37 11l176 0c11,0 20,4 26,11 7,6 11,16 11,26l0 154c0,10 -4,19 -11,26 -2,2 -4,3 -6,5 -17,13 -33,1 -48,-11 -10,-7 -19,-14 -26,-11 -5,2 -9,7 -12,13 -12,18 -31,17 -46,4 -5,-5 -11,-10 -16,-11 -6,-1 -12,4 -19,9 -11,8 -23,17 -39,11 -6,-1 -12,-5 -16,-9 -7,-7 -11,-16 -11,-26l0 -154c0,-10 4,-20 11,-26 6,-7 15,-11 26,-11zm22 108c8,0 15,7 15,15 0,8 -7,15 -15,15 -8,0 -15,-7 -15,-15 0,-8 7,-15 15,-15zm0 -56c8,0 15,7 15,15 0,8 -7,15 -15,15 -8,0 -15,-7 -15,-15 0,-8 7,-15 15,-15zm44 24c-4,0 -7,-4 -7,-8 0,-4 3,-7 7,-7l96 0c4,0 7,3 7,7 0,4 -3,8 -7,8l-96 0zm0 56c-4,0 -7,-4 -7,-8 0,-4 3,-7 7,-7l96 0c4,0 7,3 7,7 0,4 -3,8 -7,8l-96 0zm129 70c2,-3 3,-7 3,-11l0 -154c0,-6 -2,-12 -6,-16 -4,-4 -10,-6 -16,-6l-176 0c-6,0 -12,2 -16,6 -4,4 -6,10 -6,16l0 154c0,6 2,11 6,15 1,2 3,3 4,3 13,8 23,1 32,-6 9,-7 18,-13 30,-12 10,2 17,8 24,15 8,7 17,8 24,-1 4,-8 9,-15 19,-19 14,-6 27,3 39,13 13,10 26,20 39,3z"}})])]),i("div",{staticClass:"empty-text"},[i("p",[t._v(t._s(t.headline))]),t._t("extra")],2)])])])},a=[],s={name:"Empty",props:{slug:{type:String,default:"empty-sample"},headline:{type:String,default:"No data yet"}}},r=s,o=(i("c925"),i("9d6a"),i("2877")),c=Object(o["a"])(r,n,a,!1,null,"61ae9426",null);e["a"]=c.exports},"529f":function(t,e,i){},"55dd":function(t,e,i){"use strict";var n=i("5ca1"),a=i("d8e8"),s=i("4bf8"),r=i("79e5"),o=[].sort,c=[1,2,3];n(n.P+n.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!i("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(s(this)):o.call(s(this),a(t))}})},"55e9":function(t,e,i){"use strict";var n=i("c2a4"),a=i.n(n);a.a},"5d58e":function(t,e,i){"use strict";var n=i("76c4"),a=i.n(n);a.a},"6b70":function(t,e,i){},"76c4":function(t,e,i){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"9d6a":function(t,e,i){"use strict";var n=i("529f"),a=i.n(n);a.a},b047c:function(t,e,i){var n=i("1a8c"),a=i("408c"),s=i("b4b0"),r="Expected a function",o=Math.max,c=Math.min;function l(t,e,i){var l,d,u,f,h,_,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError(r);function b(e){var i=l,n=d;return l=d=void 0,p=e,f=t.apply(n,i),f}function y(t){return p=t,h=setTimeout(k,e),g?b(t):f}function w(t){var i=t-_,n=t-p,a=e-i;return m?c(a,u-n):a}function $(t){var i=t-_,n=t-p;return void 0===_||i>=e||i<0||m&&n>=u}function k(){var t=a();if($(t))return x(t);h=setTimeout(k,w(t))}function x(t){return h=void 0,v&&l?b(t):(l=d=void 0,f)}function T(){void 0!==h&&clearTimeout(h),p=0,l=_=d=h=void 0}function E(){return void 0===h?f:x(a())}function M(){var t=a(),i=$(t);if(l=arguments,d=this,_=t,i){if(void 0===h)return y(_);if(m)return clearTimeout(h),h=setTimeout(k,e),b(_)}return void 0===h&&(h=setTimeout(k,e)),f}return e=s(e)||0,n(i)&&(g=!!i.leading,m="maxWait"in i,u=m?o(s(i.maxWait)||0,e):u,v="trailing"in i?!!i.trailing:v),M.cancel=T,M.flush=E,M}t.exports=l},b4b0:function(t,e,i){var n=i("1a8c"),a=i("ffd6"),s=NaN,r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(t){if("number"==typeof t)return t;if(a(t))return s;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=c.test(t);return i||l.test(t)?d(t.slice(2),i?2:8):o.test(t)?s:+t}t.exports=u},c2a4:function(t,e,i){},c925:function(t,e,i){"use strict";var n=i("6b70"),a=i.n(n);a.a},e06e:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));i("386d"),i("a481"),i("c5f6"),i("28a5"),i("55dd"),i("20d6"),i("6762"),i("ac6a");var n=i("b047c"),a=i.n(n),s=i("d4e9"),r=i("1be9"),o={methods:{resetPagination:function(){this.pagination.current=1,this.pagination.total=0,this.noMoreData=!1},clear_selected:function(){this.selected=[],this.$event.$emit("clear_selected",[]),this.$event.$emit("btnloading_off",!1)},add_item:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s["a"][t](e,n).then((function(t){var e=t.data;Array.isArray(e)?e.reverse().forEach((function(t){return i.items.push(t)})):i.items.push(e),i.clear_selected(),i.$refs.add_dialog.clear_and_close(),i.$event.$emit("open_snackbar",i.table_config.add_message)})).finally((function(){return i.$event.$emit("btnloading_off",!1)}))},extract_per_page:function(t){var e=t.search("per_page");return t.substring(e+9,e+10)},calc_per_page_items:function(t,e){var i=[5,10,15,20,25];return i.includes(t)||i.push(t),!i.includes(e)&&e<=25&&i.push(e),i},update_item:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s["a"][t](this.edit_item.id,e,n).then((function(t){var e=i.items.findIndex((function(e){return e.id===t.data.id}));~e&&i.items.splice(e,1,t.data),i.edit_item={id:null,fields:null},i.edit_dialog=!1,i.clear_selected(),i.$event.$emit("open_snackbar",i.table_config.update_message)})).finally((function(){return i.$event.$emit("btnloading_off",!1)}))},delete_item:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s["a"][t](this.delete_item_id,i).then((function(){var t=e.items.findIndex((function(t){return t.id===e.delete_item_id}));~t&&e.items.splice(t,1),e.delete_item_id=null,e.delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",e.table_config.delete_message)})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},bulk_delete:function(t){var e=this,i={ids:this.selected.map((function(t){return t.id}))};s["a"][t]({data:i}).then((function(t){var i=t.data;e.selected.forEach((function(t){var i=e.items.findIndex((function(e){return e.id===t.id}));~i&&e.items.splice(i,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",i.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},bulk_delete_via_url:function(t){var e=this,i={ids:this.selected.map((function(t){return t.id}))};r["a"].delete(t,{data:i}).then((function(t){var i=t.data;e.selected.forEach((function(t){var i=e.items.findIndex((function(e){return e.id===t.id}));~i&&e.items.splice(i,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",i.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},open_edit_dialog:function(t){this.edit_dialog=!0,this.$set(this.edit_item,"id",t.id),this.$set(this.edit_item,"fields",t)},open_delete_dialog:function(t){this.delete_dialog=!0,this.delete_item_id=t.id},open_bulk_delete_dialog:function(t){this.bulk_delete_dialog=!0,this.selected=t},fill_table:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0,s["a"][t](n).then((function(t){e.items_response=t.data,i?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},fill_table_via_url:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.loading=!0;var a={page:this.pagination.current};r["a"].get(t,{params:a}).then((function(t){e.items_response=t.data,i?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data,"function"===typeof n&&n(t)})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},load_more_on_table:function(t){var e=this;this.loading=!0;var i={page:this.pagination.current+1};s["a"][t]({params:i}).then((function(t){var i=t.data;e.items_response=i.data,i.data.forEach((function(t){e.items.push(t)})),e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.clear_selected(),e.loading=!1,e.scrollToBottom(),e.$event.$emit("btnloading_off",!1)}))},load_more_via_url:function(t){var e=this;this.loading=!0;var i={page:this.pagination.current+1};r["a"].get(t,{params:i}).then((function(t){var i=t.data;e.items_response=i.data,i.data.forEach((function(t){e.items.push(t)})),e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.clear_selected(),e.loading=!1,e.scrollToBottom(),e.$event.$emit("btnloading_off",!1)}))},fill_table_with_data:function(t){this.items=t},add_table_rows:function(t,e){this.items=t,this.items_response=e},changeSort:function(t){this.sort.sortBy===t?this.sort.descending=!this.sort.descending:(this.sort.sortBy=t,this.sort.descending=!1)},refresh_table:function(t){var e=this;s["a"][this.table_config.refresh_table_api_name](t).then((function(t){e.$event.$emit("open_snackbar",e.table_config.refresh_table_message),e.loading=!1,e.clear_selected(),e.items_response=t.data,e.items=t.data.data})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},update_table_actions:function(t){if(t.page&&(this.page=Number(t.page)),t.per_page&&(this.rows_per_page=Number(t.per_page)),t.search&&(this.search=t.search),t.sort){var e=t.sort.split("|");this.sort.sortBy=e[0],"asc"===e[1]?this.sort.descending=!1:"desc"===e[1]&&(this.sort.descending=!0)}},hasMoreData:function(){this.componentKey+=1,this.pagination.current>=this.pagination.total&&(this.noMoreData=!0)},toggleAll:function(){this.selected.length?this.clear_selected():this.selected=this.items.slice()},setPreferredView:function(t){window.localStorage.setItem("bzk_prefer_view",t),this.view=t},getPreferredView:function(){return window.localStorage.getItem("bzk_prefer_view")||"list"},scrollToBottom:function(){setTimeout((function(){var t=document.getElementsByClassName("v-data-table__wrapper")[0];t&&(t.scrollTop=t.scrollHeight)}),1)},debounce:a()((function(t){this.search=t}),500)}},c={mixins:[o],data:function(){return{edit_dialog:!1,add_dialog:!1,delete_dialog:!1,permissionDialog:!1,bulk_delete_dialog:!1,loading:!1,items:[],items_response:null,edit_item:{id:null,fields:null},delete_item_id:null,show_delete_selected:!1,selected_ids:[],selected:[],rows_per_page:null,page:1,sort:{sortBy:null,descending:!1},search:"",pagination:{current:1,total:0},noMoreData:!1,componentKey:1,view:"list",btnloading:!1}},watch:{selected_ids:function(t){t.length>0?this.show_delete_selected=!0:this.show_delete_selected=!1},api_query:function(t,e){var i=Number(this.extract_per_page(t)),n=Number(this.extract_per_page(e))||null;this.items_response&&this.rows_per_page===this.items.length&&i!==n||(this.$router.replace({name:this.table_config.route_name,query:{page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting}}),this.loading=!0,this.refresh_table(t))}}}}}]);
//# sourceMappingURL=chunk-524e4aa8.eac18a06.js.map