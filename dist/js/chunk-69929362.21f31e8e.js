(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69929362"],{"0509":function(t,e,i){},"09f3":function(t,e,i){"use strict";var n=i("6719"),s=i.n(n);s.a},"0eef":function(t,e,i){},"1c18":function(t,e,i){},3364:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.activeId?i("v-row",{staticClass:"task__tab_preview_card",attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"12"}},[t.loading?i("v-card",{attrs:{flat:""}},[i("v-card-text",[i("v-boilerplate",{staticClass:"mb-6",attrs:{type:"list-item-avatar, divider, list-item-three-line, card-heading, image, actions"}})],1)],1):t.content&&!t.loading?i("v-card",{staticClass:"mx-auto",staticStyle:{"box-shadow":"none"},attrs:{flat:""}},[i("v-card-text",[i("v-list",[i("v-list-item",[i("v-list-item-avatar",[i("v-icon",{attrs:{large:""}},[t._v("mdi-file-document-outline")])],1),i("v-list-item-content",{staticClass:"body-2 font-weight-medium"},[i("v-list-item-title",[i("span",{staticClass:"title"},[t._v(" "+t._s(t._f("truncate")(t._f("ucwords")(t.content.title),35)))])])],1),i("v-list-item-action",[i("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{icon:"",small:""}},n),[i("v-icon",{attrs:{large:""}},[t._v("mdi-dots-horizontal-circle-outline")])],1)]}}],null,!1,2126087538)},[i("v-list",{attrs:{dense:""}},t._l(t.dropdown_actions,(function(e){return i("v-list-item",{key:e.id,on:{click:function(i){return t.dropdownAction(e.value)}}},[i("v-list-item-content",[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v(" "+t._s(e.text)+" ")],1)],1)],1)})),1)],1)],1)],1)],1)],1),i("v-card-text",{staticClass:"px-4"},[t.content?i("v-row",{staticClass:"px-4"},[i("v-col",{attrs:{xs:"12"}},[i("v-btn",{attrs:{disabled:"",outlined:"",block:"",height:45}},[i("v-icon",{attrs:{left:""}},[t._v("date_range")]),t._v(" "+t._s(t.date_created(t.content.created_at))+" ")],1)],1),i("v-col",{attrs:{xs:"12"}},[i("v-btn",{attrs:{outlined:"",disabled:"",block:"",height:45}},["completed"===t.content.status.toLowerCase()?i("v-icon",{attrs:{left:"",color:"success"}},[t._v(" mdi-clipboard-check-outline ")]):"pending"===t.content.status.toLowerCase()||"urgent"===t.content.status.toLowerCase()?i("v-icon",{attrs:{left:"",color:"warning"}},[t._v(" mdi-clipboard-pulse-outline ")]):"behind"===t.content.status.toLowerCase()?i("v-icon",{attrs:{left:"",color:"danger"}},[t._v(" mdi-clipboard-alert-outline ")]):"open"===t.content.status.toLowerCase()?i("v-icon",{attrs:{left:"",color:"info"}},[t._v(" mdi-clipboard-text-play-outline ")]):t._e(),t._v(" "+t._s(t.content.status)+" ")],1)],1),i("v-spacer"),i("v-col",{attrs:{xs:"12"}},["completed"!==t.content.status.toLowerCase()?i("hours-box",{attrs:{content:t.content},on:{"timer-started":t.timerStarted,"timer-paused":t.timerPaused}}):i("v-btn",{attrs:{disabled:"",outlined:"",block:"",height:45}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-credit-card-clock")]),i("span",{staticClass:"subtitle-1"},[t._v(t._s(t.content.total_time))])],1)],1),i("v-col",{attrs:{md:"12"}},[i("p",{staticClass:"title",domProps:{innerHTML:t._s(t.content.title)}}),i("editor",{staticClass:"body-2 description-wrapper",attrs:{"has-tools":!1,content:t.content.description,"has-floating-tools":!1,editable:!1}})],1),t.content.assigned.length>0?i("v-col",{attrs:{md:"12"}},[i("h5",{staticClass:"body-2 mb-3"},[t._v("Assigned to:")]),i("Avatars",{staticStyle:{display:"inline-block"},attrs:{deep:!1,items:t.content.assigned,count:6}})],1):t._e()],1):t._e()],1),i("v-card-actions",{staticClass:"px-4"},[i("Comment",{attrs:{items:t.all_comments,deleteApi:t.delApi,addApi:t.addApi,uploadApi:t.uploadApi}})],1)],1):t._e()],1)],1):t._e()},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("c5f6"),i("ade3")),o=i("1be9"),r=i("579d"),c=i("c1df"),l=i.n(c),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hours__box"},[t.task_belongs_to_logged_user?i("div",{staticClass:"box1 box",on:{click:t.handle_timer}},[t.timer_started?i("v-icon",{attrs:{small:"",color:"white"}},[t._v("pause")]):i("v-icon",{attrs:{small:"",color:"white"}},[t._v("play_arrow")])],1):i("div",{staticClass:"box1 box"},[i("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-clock-alert-outline")])],1),i("div",{staticClass:"box2 box"},[t._v(t._s(t.get_hours())+" "),i("span",[t._v("HRS")])]),i("div",{staticClass:"box3 box"},[t._v(t._s(t.get_mins())+" "),i("span",[t._v("MIN")])]),i("div",{staticClass:"box4 box"},[t._v(t._s(t.get_secs())+" "),i("span",[t._v("SEC")])])])},u=[],m=(i("6b54"),i("28a5"),{name:"HoursBox",props:{content:Object},data:function(){return{timer_started:!1,time_running:null,interval:null,timer_status:null,is_timer_disabled:!1}},computed:{task_belongs_to_logged_user:function(){if(this.content.assigned.length)return this.content.assigned[0].id===this.$auth.logged_user().id}},created:function(){this.time_running=this.content.total_time,this.timer_status=this.content.timer_status,"ongoing"===this.content.timer_status&&this.start_timer()},beforeDestroy:function(){clearInterval(this.interval)},methods:{get_hours:function(){return this.time_running.split(":")[0]},get_mins:function(){return this.time_running.split(":")[1]},get_secs:function(){return this.time_running.split(":")[2]},handle_timer:function(){var t=this;if(!this.is_timer_disabled)if(this.timer_started)this.pause_timer(),this.$emit("timer-paused");else{this.start_timer();var e="api/timer/start";"pause"===this.timer_status&&(e="api/timer/back"),this.is_timer_disabled=!0,o["a"].post(e,{type:"task",id:this.content.id}).then((function(){t.is_timer_disabled=!1,t.timer_status="ongoing",t.$emit("timer-started")}))}},start_timer:function(){var t=this;this.timer_started=!0,this.interval=setInterval((function(){var e=t.get_hours(),i=t.get_mins(),n=t.get_secs();n>=59&&i>=59?(e++,i=n="00"):n>=59?(i++,n="00"):n++,t.set_time_running(e,i,n)}),1e3)},pause_timer:function(){var t=this;this.is_timer_disabled=!0,o["a"].post("api/timer/pause",{type:"task",id:this.content.id}).then((function(){clearInterval(t.interval),t.is_timer_disabled=!1,t.timer_status="pause",t.timer_started=!1}))},set_time_running:function(t,e,i){1===t.toString().length&&(t="0"+t),1===e.toString().length&&(e="0"+e),1===i.toString().length&&(i="0"+i),this.time_running="".concat(t,":").concat(e,":").concat(i)}}}),_=m,v=(i("4195"),i("2877")),p=Object(v["a"])(_,d,u,!1,null,"e40193d2",null),h=p.exports,f=i("72c1"),g=i("1ca5"),b=i("5d98");function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var x={name:"TaskTabPreviewCard",mixins:[r["a"]],components:{HoursBox:h,Avatars:f["a"],Comment:g["a"],VBoilerplate:{functional:!0,render:function(t,e){var i=e.data,n=e.props,s=e.children;return t("v-skeleton-loader",w(w({},i),{},{props:w({boilerplate:!0,elevation:0},n)}),s)}},Editor:b["a"]},props:{activeId:[Number,String],id:[Number,String]},data:function(){return{isRequestInProgress:!1,content:null,loading:!1,all_comments:[],comment:"",commenter:null,hover:!1,activeComment:null,permissions:null,btnloading:!1}},mounted:function(){var t=this;this.$event.$on("task-is-updated",(function(e){t.activeId===e.id&&(t.content=e)}))},computed:{user:function(){return this.$store.getters.user},permission:function(){return this.$_permissions.get("message")},can_view_comment:function(){return!!this.user.is_admin||this.permission&&this.permission.view},can_edit_comment:function(){return!!this.user.is_admin||this.permission&&this.permission.update},addApi:function(){return"api/task/".concat(this.activeId,"/comments")},delApi:function(){return"api/comments"},uploadApi:function(){return"api/projects/".concat(this.id,"/file")},dropdown_actions:function(){var t=[{id:1,text:"Edit Task",value:"edit",icon:"mdi-file-document-edit-outline"},{id:2,text:"Delete Task",value:"delete",icon:"mdi-delete-alert-outline"}],e=this.content.status.toLowerCase();return"completed"!==e&&t.push({id:3,text:"Mark as Complete",value:"mark-as-complete",icon:"mdi-clipboard-check"}),"completed"!==e&&"urgent"!==e?t.push({id:4,text:"Mark as Urgent",value:"mark-as-urgent",icon:"mdi-clipboard-alert-outline"}):"completed"!==e&&"urgent"===e&&t.push({id:4,text:"Mark as Non-urgent",value:"mark-as-urgent",icon:"mdi-clipboard-alert-outline"}),t}},watch:{activeId:{handler:function(t){var e=this;t&&(this.loading=!0,o["a"].get("api/task/".concat(t)).then((function(t){e.content=t.data,e.all_comments=t.data.comments})).finally((function(){return e.loading=!1})))},immediate:!0}},methods:{dropdownAction:function(t){this.$event.$emit("task-".concat(t),this.content)},can_delete_comment:function(t){return!!this.user.is_admin||t.causer.id===this.user.id},date_created:function(t){return l()(t).format("MMMM DD, YYYY")},timerStarted:function(){this.$event.$emit("task-timer-started",this.activeId)},timerPaused:function(){this.$event.$emit("task-timer-paused",this.activeId)}}},y=x,C=(i("c44d"),i("945f"),Object(v["a"])(y,n,s,!1,null,"10e0fb2b",null));e["a"]=C.exports},4195:function(t,e,i){"use strict";var n=i("0509"),s=i.n(n);s.a},"4dd0":function(t,e,i){},6719:function(t,e,i){},"84a4":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.task,expression:"task"}],attrs:{"justify-center":""}},[i("v-dialog",{attrs:{scrollable:"","max-width":"800",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"py-1"},[t.task?i("v-col",{staticClass:"title"},[t.task.project?i("span",[t._v(t._s(t._f("ucwords")(t.task.project.title)))]):t._e()]):t._e(),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.close_dialog}},[i("v-icon",{attrs:{large:""}},[t._v("mdi-close-circle-outline")])],1)],1),i("v-divider"),i("v-card-text",[t.task?i("preview-card",{key:t.componentKey,attrs:{id:t.task.project_id,"active-id":t.task.id},on:{"dropdown-action":t.handle_dropdown_action}}):t._e()],1)],1)],1)],1)},s=[],a=i("3364"),o={name:"TaskViewDialog",components:{PreviewCard:a["a"]},props:{task:Object},data:function(){return{dialog:!1,delete_task_dialog:!1,confirm_mark_as_complete_dialog:!1,componentKey:0}},watch:{task:{handler:function(){this.force_render()},immediate:!0,deep:!0}},methods:{force_render:function(){this.componentKey+=1},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1},handle_dropdown_action:function(t){var e="open_".concat(t,"_task_dialog");this[e]()},open_delete_task_dialog:function(){this.$event.$emit("task-delete",this.task)},open_edit_task_dialog:function(){this.$event.$emit("task-edit",this.task)},open_mark_as_complete_task_dialog:function(){this.$event.$emit("task-mark-as-complete",this.task)},open_mark_as_urgent_task_dialog:function(){this.$event.$emit("task-mark-as-urgent",this.task)}}},r=o,c=(i("896a"),i("09f3"),i("2877")),l=Object(c["a"])(r,n,s,!1,null,"6f993032",null);e["a"]=l.exports},"896a":function(t,e,i){"use strict";var n=i("1c18"),s=i.n(n);s.a},"945f":function(t,e,i){"use strict";var n=i("4dd0"),s=i.n(n);s.a},c44d:function(t,e,i){"use strict";var n=i("0eef"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-69929362.21f31e8e.js.map