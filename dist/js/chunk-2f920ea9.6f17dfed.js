(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f920ea9"],{"0919":function(t,e,a){"use strict";var s=a("69d9"),i=a.n(s);i.a},"0df60":function(t,e,a){},"1e0f":function(t,e,a){"use strict";var s=a("8807"),i=a.n(s);i.a},2220:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat"},[a("GroupChatDialog",{ref:"creategroupchat",on:{newChatGroupCreated:t.new_groupchat_added}}),a("ManageMembersDialog",{ref:"manage_group_members_dialog",attrs:{conversation:t.activeChat}}),a("table-header",{attrs:{paths:t.paths,noButton:!0}}),a("div",{staticClass:"chat-container"},[a("v-layout",{staticClass:"chat__content",attrs:{wrap:""}},[a("v-flex",{staticClass:"chat__sidebar",attrs:{md4:"",sm5:"",xs12:""}},[a("v-card",{staticClass:"chatlist",attrs:{text:""}},[a("v-app-bar",[a("v-img",{staticClass:"chat__owner_img",attrs:{src:t.loggeduser.image_url}}),a("span",{staticClass:"chat__owner_name"},[t._v(t._s(t.loggeduser.first_name)+" "+t._s(t.loggeduser.last_name))]),a("v-spacer"),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return t.$refs.creategroupchat.open_dialog()}}},s),[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-comment-plus")])],1)]}}])},[a("span",[t._v("New Group Chat")])])],1),a("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[a("div",{staticClass:"friend__list"},[t._l([1,2,3,4,5],(function(e){return t.userLoading?a("v-skeleton-loader",{key:e,ref:"skeleton",refInFor:!0,staticClass:"mx-auto",attrs:{type:"list-item-avatar-two-line"}}):t._e()})),t.all_groups.length>0?a("v-list",{attrs:{subheader:"",dense:""}},t._l(t.all_groups,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.open_conversation(e)}}},[a("v-list-item-content",[a("div",{staticClass:"friend user",on:{click:function(a){return t.open_conversation(e)}}},[a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"user__img"},[a("svg",{attrs:{viewBox:"0 0 250 250"}},[a("path",{staticClass:"icon",attrs:{d:t.group_icon}})])]),a("span",{staticClass:"user__name"},[t._v(t._s(e.fullname))])])])]),a("v-list-item-icon",[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.message_count>0,expression:"conv.message_count > 0"}],staticClass:"has_message",attrs:{color:"success",title:"New message"}},[t._v(" mail ")])],1)],1)})),1):t._e(),a("v-divider"),a("v-list",{attrs:{subheader:"",dense:""}},t._l(t.sorted(t.all_users),(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.open_conversation(e)}}},[a("v-list-item-content",[a("div",{staticClass:"friend user",on:{click:function(a){return t.open_conversation(e)}}},[a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"user__img"},[a("v-img",{attrs:{src:e.image_url,color:"grey"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("span",{staticClass:"black--text"},[t._v(t._s(e.fullname.charAt(0)))])]},proxy:!0}],null,!0)}),a("span",{staticClass:"status",class:[e.is_online?"online":"offline"]})],1),a("span",{staticClass:"user__name"},[t._v(t._s(e.fullname))])])])]),a("v-list-item-icon",[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.message_count>0,expression:"user.message_count > 0"}],staticClass:"has_message",attrs:{color:"success",title:"New message"}},[t._v(" mail ")])],1)],1)})),1)],2),a("v-card-actions",[a("v-btn",{staticClass:"mx-auto view__more_btn",attrs:{text:"",normal:""}},[t._v("VIEW MORE")])],1)],1)],1)],1),a("v-flex",{staticClass:"chat__message",attrs:{md8:"",sm7:"",xs12:""}},[t.activeChat||t.cardLoading?t.activeChat?a("v-card",{staticClass:"mx-auto message__content",attrs:{outlined:""}},[a("v-toolbar",{attrs:{color:"#3b589e"}},[a("v-row",{staticClass:"message__header"},[a("v-flex",{staticClass:"sender__img",attrs:{xs2:""}},["group"===t.activeChat.type?a("svg",{attrs:{viewBox:"0 0 250 250"}},[a("path",{staticClass:"icon",attrs:{d:t.group_icon}})]):a("v-img",{attrs:{src:t.activeChat.image_url}}),a("span",{staticClass:"status",class:[t.activeChat.is_online?"online":"offline"]})],1),a("v-toolbar-title",[t._v(t._s(t.activeChat.fullname))]),a("v-spacer"),a("v-menu",{staticClass:"friend__info",attrs:{left:"","offset-x":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{fab:"",icon:"",color:"#ffffff"}},s),[a("v-icon",[t._v("settings")])],1)]}}])},[a("v-card",{staticClass:"hover__info"},[a("div",{staticClass:"info__one"},[a("div",{staticClass:"h__img"},["group"===t.activeChat.type?a("svg",{attrs:{viewBox:"0 0 250 250"}},[a("path",{staticClass:"icon",attrs:{d:t.group_icon}})]):a("v-img",{attrs:{src:t.activeChat.image_url}})],1),a("div",{staticClass:"h__details"},[a("h2",{staticClass:"h__name"},[t._v(t._s(t.activeChat.fullname))]),a("p",{staticClass:"h__job subtitle"},[t._v(" "+t._s("group"===t.activeChat.type?t.current_members.length+" members":t.activeChat.job_title)),a("br"),t._v(" "+t._s("group"===t.activeChat.type?"Admin : "+t.creator(t.activeChat.data.group_creator.id):"")+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"group"!==t.activeChat.type,expression:"activeChat.type !== 'group'"}],staticClass:"info__anchor"},[a("v-icon",[t._v("email")]),a("a",{attrs:{href:"mailto:"+t.activeChat.email}},[t._v(t._s(t.activeChat.email))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"group"!==t.activeChat.type,expression:"activeChat.type !== 'group'"}],staticClass:"info__anchor"},[a("v-icon",[t._v("location_on")]),a("span",[t._v(t._s(t.activeChat.location))])],1),"group"===t.activeChat.type?a("div",{staticClass:"info__anchor"},[t.loggeduser.id===t.activeChat.data.group_creator.id?a("v-btn",{attrs:{text:"",small:"",outlined:""},on:{click:function(e){return t.$refs.manage_group_members_dialog.open_dialog()}}},[a("v-icon",{attrs:{small:""}},[t._v("settings")]),t._v(" Manage Members ")],1):t._e()],1):t._e(),"group"===t.activeChat.type?a("Avatars",{staticClass:"mt-1",attrs:{items:t.activeChat.members,count:6}}):t._e()],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"group"!==t.activeChat.type,expression:"activeChat.type !== 'group'"}],staticClass:"info__two"},[a("div",{staticClass:"info__cta"},[a("div",{staticClass:"info__anchor"},[a("v-icon",[t._v("person")]),a("a",{attrs:{href:"javascript::void(0)"},on:{click:function(e){return t.go_to_profile(t.activeChat)}}},[t._v("View Profile")])],1),a("div",{staticClass:"info__anchor"},[a("v-icon",[t._v("email")]),a("a",{attrs:{href:"mailto:"+t.activeChat.email}},[t._v("Email")])],1),a("div",{staticClass:"info__anchor"},[a("v-icon",[t._v("message")]),a("a",{attrs:{href:"javascript::void(0)"},on:{click:function(e){return t.open_conversation(t.activeChat)}}},[t._v("Chat")])],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"group"!==t.activeChat.type,expression:"activeChat.type !== 'group'"}],staticClass:"info__three"},[a("div",{staticClass:"total"},[a("p",[t._v("Total Hours")]),a("h2",[t._v("10")])]),a("div",{staticClass:"total"},[a("p",[t._v("Total Amount")]),a("h2",[t._v("$2,758.93")])])])])],1)],1)],1),a("v-flex",{staticClass:"message__body",attrs:{xs12:"",sm12:""}},[t.cardLoading?a("v-skeleton-loader",{ref:"skeleton",staticClass:"mx-auto",attrs:{type:"card-avatar"}}):t.all_messages.length>0?a("div",{staticClass:"messages",attrs:{id:"messageContainer"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.has_more_message,expression:"has_more_message"}],staticClass:"view__more"},[a("v-btn",{staticClass:"overline",attrs:{block:"",text:"",dense:"",disabled:t.view__more_loading,loading:t.view__more_loading},on:{click:t.get_previous_message}},[t._v(" VIEW MORE ")])],1),t._l(t.all_messages,(function(t){return a("Message",{key:t.id,attrs:{message:t}})}))],2):a("div",{staticClass:"messages-empty",attrs:{color:"#f5f7fa"}},[a("Empty",{attrs:{icon:"mdi-message-plus-outline",slug:"empty-chat",headline:"Start sending messages"}})],1),t.cardLoading?t._e():a("div",{staticClass:"write px-2"},[a("ChatField",{staticClass:"mt-2",attrs:{mentionables:t.mentionables},on:{typing:t.handleTyping,"send-message":t.sendMessage}})],1)],1)],1):t._e():a("v-card",{staticClass:"mx-auto message__content",staticStyle:{height:"100%",background:"#f5f7fa"}},[a("Empty",{attrs:{icon:"mdi-message-plus-outline",headline:"Send a message now"}})],1)],1)],1)],1)],1)},i=[],n=(a("8e6e"),a("456d"),a("55dd"),a("ac6a"),a("7514"),a("20d6"),a("ade3")),r=a("2f62"),o=a("b019"),c=a("0644"),l=a.n(c),u=a("29d6"),_=a("6385"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{"max-width":"800",persistent:"",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v(" Create Group "),a("v-spacer"),a("v-icon",{on:{click:function(e){return t.clear_and_close()}}},[t._v("close")])],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{flat:"",outlined:"",solo:"","prepend-inner-icon":"mdi-dialpad",clearable:"",label:"Group Name*",required:""},model:{value:t.group_name,callback:function(e){t.group_name=e},expression:"group_name"}})],1)],1),a("v-row",[a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{flat:"",outlined:"",solo:"",label:"Search for people to add",required:"",clearable:"","prepend-inner-icon":"search"},on:{keydown:t.filter_users,"click:clear":t.filter_users},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.filtered_by_search.length>0?a("v-list",{attrs:{id:"filtered_by_search_wrapper"}},t._l(t.filtered_by_search,(function(e){return a("v-list-item",{key:e.title,on:{click:function(a){return t.selected(e)}}},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.image_url}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.fullname)}})],1),a("v-list-item-icon",[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.is_selected,expression:"item.is_selected"}],attrs:{color:"success"}},[t._v("mdi-checkbox-marked-circle")])],1)],1)})),1):t._e()],1),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-list",{attrs:{id:"all_selected_wrapper"}},[a("v-subheader",[t._v("Selected ("+t._s(t.all_selected.length)+")")]),t._l(t.all_selected,(function(e){return t.all_selected.length>0?a("v-list-item",{key:e.title},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.image_url}})],1),a("v-list-item-content",[a("v-list-item-subtitle",{domProps:{textContent:t._s(e.fullname)}})],1),a("v-list-item-icon",[a("v-icon",{attrs:{small:"",color:"danger"},on:{click:function(a){return t.selected(e)}}},[t._v("close")])],1)],1):t._e()}))],2)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:t.btnloading},on:{click:t.clear_and_close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:t.btnloading,loading:t.btnloading},on:{click:t.save_group}},[a("v-icon",{attrs:{small:"",left:""}},[t._v("save")]),t._v(" Create ")],1)],1)],1)],1)],1)},v=[],m=(a("6762"),a("2fdb"),a("386d"),{name:"GroupChatDialog",data:function(){return{dialog:!1,all_users:[],filtered_by_search:[],all_selected:[],search:"",group_name:"",btnloading:!1}},created:function(){this.get_chat_list()},methods:{validate_form:function(){return""===this.group_name?(this.$event.$emit("open_snackbar","Group name is required","error"),!1):!(this.all_selected.length<1)||(this.$event.$emit("open_snackbar","Select and  add users to group","error"),!1)},save_group:function(){var t=this;if(this.validate_form()){this.btnloading=!0;var e={group_name:this.group_name,users:this.all_selected.map((function(t){return t.id}))};o["a"].save_group(e).then((function(e){t.$emit("newChatGroupCreated",e.data),t.clear_and_close()})).finally((function(){return t.btnloading=!1}))}},open_dialog:function(){this.dialog=!0},clear_and_close:function(){this.dialog=!1,this.all_selected=[],this.search="",this.group_name="",this.filtered_by_search=l()(this.all_users)},get_chat_list:function(){var t=this;o["a"].get_chat_list().then((function(e){var a=e.data;t.all_users=l()(a),t.filtered_by_search=a}))},select:function(t,e){var a=this.filtered_by_search.findIndex((function(e){return t.id===e.id}));~a&&(this.filtered_by_search[a].is_selected=e)},selected:function(t){var e=this.all_selected.findIndex((function(e){return t.id===e.id}));~e?(this.select(t,!1),this.all_selected.splice(e,1)):(this.select(t,!0),this.all_selected.push(t))},filter_users:function(t){var e=this;setTimeout((function(){e.search&&""!==e.search?e.filtered_by_search=l()(e.all_users).filter((function(t){return t.fullname.toLowerCase().includes(e.search.toLowerCase().trim())})):e.filtered_by_search=l()(e.all_users)}),1)}}}),h=m,f=(a("6ebd"),a("2877")),p=Object(f["a"])(h,d,v,!1,null,"1aba50d2",null),g=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{"max-width":"800",persistent:"",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v(" Manage Members "),a("v-spacer"),a("v-icon",{on:{click:function(e){return t.clear_and_close()}}},[t._v("close")])],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{solo:"",label:"Search for people to add",required:"",clearable:"","prepend-inner-icon":"search"},on:{keydown:t.filter_users,"click:clear":t.filter_users},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.filtered_by_search.length>0?a("v-list",{attrs:{id:"filtered_by_search_wrapper"}},t._l(t.filtered_by_search,(function(e){return a("v-list-item",{key:e.title,on:{click:function(a){return t.selected(e)}}},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.image_url}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.fullname)}})],1),a("v-list-item-icon",[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.is_selected,expression:"item.is_selected"}],attrs:{color:"success"}},[t._v("mdi-checkbox-marked-circle")])],1)],1)})),1):t._e()],1),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-list",{attrs:{id:"all_selected_wrapper"}},[a("v-subheader",[t._v("Selected ("+t._s(t.all_selected.length)+")")]),t._l(t.all_selected,(function(e){return t.all_selected.length>0?a("v-list-item",{key:e.title},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.image_url}})],1),a("v-list-item-content",[a("v-list-item-subtitle",{domProps:{textContent:t._s(e.fullname)}})],1),t.can_be_remove(e)?a("v-list-item-icon",[a("v-icon",{attrs:{small:"",color:"danger"},on:{click:function(a){return t.selected(e)}}},[t._v("close")])],1):t._e(),e.id===t.conversation.data.group_creator.id?a("v-list-item-icon",[a("v-icon",{attrs:{small:"",title:"Group owner"}},[t._v("lock")])],1):t._e()],1):t._e()}))],2)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:t.clear_and_close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",loading:t.btnloading},on:{click:t.update_members}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v(" Save ")],1)],1)],1)],1)],1)},C=[],y={name:"ManageMemberDialog",props:{conversation:Object},data:function(){return{dialog:!1,all_users:[],filtered_by_search:[],all_selected:[],search:"",btnloading:!1}},methods:{open_dialog:function(){this.dialog=!0,this.all_selected=l()(this.conversation.members),this.get_chat_list()},clear_and_close:function(){this.dialog=!1},get_chat_list:function(){var t=this;o["a"].get_chat_list().then((function(e){var a=e.data;t.filtered_by_search=t.filter_users_for_selected(a),t.all_users=l()(a)}))},update_members:function(){var t=this;this.btnloading=!0;var e={convo_id:this.conversation.id,users:this.all_selected.map((function(t){return t.id}))};o["a"].update_members_list(e).then((function(e){var a=e.data;t.conversation.members=a,t.clear_and_close()})).finally((function(){return t.btnloading=!1}))},can_be_remove:function(t){return t.id!==this.conversation.data.group_creator.id},select:function(t,e){var a=this.filtered_by_search.findIndex((function(e){return t.id===e.id}));~a&&(this.filtered_by_search[a].is_selected=e)},selected:function(t){var e=this.all_selected.findIndex((function(e){return t.id===e.id}));~e?(this.select(t,!1),this.all_selected.splice(e,1)):(this.select(t,!0),this.all_selected.push(t))},filter_users_for_selected:function(t){var e=this.conversation.members.map((function(t){return t.id}));return t.map((function(t){return Object.assign(t,{is_selected:e.indexOf(t.id)>=0})}))},filter_users:function(t){var e=this;setTimeout((function(){e.search&&""!==e.search?e.filtered_by_search=l()(e.all_users).filter((function(t){return t.fullname.toLowerCase().includes(e.search.toLowerCase().trim())})):e.filtered_by_search=l()(e.all_users)}),1)}}},w=y,x=(a("0919"),Object(f["a"])(w,b,C,!1,null,"db9fe4e4",null)),k=x.exports,$=a("6bdf"),O=a("72c1");function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var B={name:"Chat",components:{TableHeader:u["a"],Message:_["a"],GroupChatDialog:g,ManageMembersDialog:k,ChatField:$["a"],Avatars:O["a"]},data:function(){return{activeChat:null,message:null,group_icon:"M125 49c10,0 20,4 26,11 7,8 11,18 11,28 0,11 -4,21 -11,28 0,1 -1,2 -2,2 -3,18 36,10 36,42l0 12c0,8 -4,15 -9,21 -5,5 -13,8 -21,8l-12 0 0 0 -2 0 -34 0 0 0 -12 0c-8,0 -15,-3 -21,-8 -5,-6 -8,-13 -8,-21l0 -12c0,-32 39,-24 35,-42 0,0 -1,-1 -2,-2 -6,-7 -10,-17 -10,-28 0,-10 4,-20 10,-28 7,-7 16,-11 26,-11zm-74 14c-8,0 -16,4 -22,10 -5,6 -9,14 -9,24 0,9 4,17 9,23 1,0 1,1 2,1 -1,6 -6,8 -10,10 -10,4 -20,8 -20,29l0 9c0,0 0,0 0,1 0,3 2,14 18,19 1,0 1,1 2,1l30 0c1,0 1,-1 1,-1 1,0 1,1 2,1l11 0c-1,-2 -1,-3 -2,-5 -1,-2 -1,-3 -2,-5l-7 0c-1,0 -1,0 -2,0 0,0 0,0 -1,0l-30 0c-10,-3 -10,-9 -10,-11l0 0 0 -9c0,-15 7,-17 13,-20 7,-2 13,-5 15,-13 4,2 8,3 12,3 5,0 10,-1 14,-4 1,5 3,8 6,10 3,-3 7,-5 10,-6 -4,-2 -7,-4 -7,-11l0 0c5,-6 8,-14 8,-22 0,-10 -3,-18 -9,-24 -5,-6 -13,-10 -22,-10zm-14 17c3,-5 9,-7 14,-7 6,0 11,2 15,7 4,4 6,10 6,17 0,6 -2,12 -6,16 -4,5 -9,7 -15,7 -5,0 -11,-2 -14,-7 -4,-4 -7,-10 -7,-16 0,-7 3,-13 7,-17zm162 -17c8,0 16,4 22,10 5,6 9,14 9,24 0,9 -4,17 -9,23 -1,0 -1,1 -2,1 1,6 6,8 10,10 10,4 20,8 20,29l0 9c0,0 0,0 0,1 0,3 -2,14 -18,19 -1,0 -1,1 -2,1l-30 0c-1,0 -1,-1 -1,-1 -1,0 -1,1 -2,1l-11 0c1,-2 1,-3 2,-5 1,-2 1,-3 2,-5l7 0c1,0 1,0 2,0 0,0 0,0 1,0l30 0c10,-3 10,-9 10,-11l0 0 0 -9c0,-15 -7,-17 -13,-20 -7,-2 -13,-5 -15,-13 -4,2 -8,3 -12,3 -5,0 -10,-1 -14,-4 -1,5 -3,8 -6,10 -3,-3 -7,-5 -10,-6 4,-2 7,-4 7,-11l0 0c-5,-6 -8,-14 -8,-22 0,-10 3,-18 9,-24 5,-6 13,-10 22,-10zm14 17c-3,-5 -9,-7 -14,-7 -6,0 -11,2 -15,7 -4,4 -6,10 -6,17 0,6 2,12 6,16 4,5 9,7 15,7 5,0 11,-2 14,-7 4,-4 7,-10 7,-16 0,-7 -3,-13 -7,-17zm-58 112c6,0 11,-3 14,-6 4,-4 6,-9 6,-14l0 -12c0,-22 -30,-14 -35,-35 -5,2 -10,3 -15,3 -5,0 -10,-1 -14,-3 -6,22 -35,11 -35,35l0 12c0,5 2,10 5,14 4,3 9,6 14,6 20,0 40,0 60,0zm-11 -125c-5,-5 -11,-9 -19,-9 -7,0 -14,4 -18,9 -5,5 -8,13 -8,21 0,9 3,16 8,22 4,5 11,9 18,9 8,0 14,-4 19,-9 5,-6 8,-13 8,-22 0,-8 -3,-16 -8,-21z",paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Chat",disabled:!0,router_name:null}],all_users:[],all_messages:[],all_groups:[],page:1,pagination:{current:1,total:0},cardLoading:!1,userLoading:!1,current_members:[],target:null,view__more_loading:!1}},computed:L(L({},Object(r["c"])("chat",["unread_messages","all_conversations"])),{},{loggeduser:function(){return this.$store.getters.user},has_more_message:function(){return this.pagination.current<this.pagination.total},onlineUsers:function(){return this.$store.getters["onlineUsers/all_users"]},mentionables:function(){return this.activeChat?"group"===this.activeChat.type?this.activeChat.members:[this.activeChat]:[]}}),mounted:function(){this.$event.$emit("path-change",this.paths),"undefined"!==typeof this.$route.params.target&&(this.target=parseInt(this.$route.params.target)),this.$store.commit("set_floating_button",!1),this.subscribePusher(),this.get_chat_list(),this.get_groupchat_list()},beforeDestroy:function(){this.$store.commit("set_floating_button",!0)},methods:L(L(L({},Object(r["d"])("onlineUsers",["set_all_users"])),Object(r["d"])("chat",["add_unread_messages","add_message_to_conv"])),{},{creator:function(t){var e=this.activeChat.members.findIndex((function(e){return e.id==t}));return~e?this.activeChat.members[e].fullname:""},subscribePusher:function(){this.$pusher.authenticate();var t=this.$pusher.subscribe("private-chat.new-message.".concat(this.loggeduser.id));this.chat_channel(t)},subscribeToGroupChat:function(t){var e=this.$pusher.subscribe("mc-chat-conversation.".concat(t));this.group_chat_channel(e)},get_chat_list:function(){var t=this;this.userLoading=!0,o["a"].get_chat_list().then((function(e){var a=e.data,s=a.map((function(e){var a=t.onlineUsers.findIndex((function(t){return t.id===e.id}));return e.is_online=!!~a,e}));setTimeout((function(){if(t.all_users=s,t.target){var e=t.all_users.find((function(e){return e.id===t.target}));e&&t.open_conversation(e)}}),1)})).finally((function(){t.userLoading=!1}))},get_groupchat_list:function(){var t=this;this.userLoading=!0,o["a"].get_groupchat_list().then((function(e){var a=e.data;t.all_groups=a,setTimeout((function(){return t.all_groups.forEach((function(e){return t.subscribeToGroupChat(e.id)}))}),1)})).finally((function(){return t.userLoading=!1}))},get_messages:function(){var t=this;this.cardLoading=!0,o["a"].get_messages(this.activeChat.id).then((function(e){var a=e.data;t.all_messages=a.data.reverse(),t.pagination.current=a.current_page,t.pagination.total=a.last_page})).finally((function(){t.scrollToBottom(),t.cardLoading=!1}))},get_previous_message:function(){var t=this;if(this.view__more_loading=!0,"group"===this.activeChat.type)var e=o["a"].get_group_more_messages(this.activeChat.id,this.pagination.current);else e=o["a"].get_more_messages(this.activeChat.id,this.pagination.current);e.then((function(e){var a=e.data;a.data.forEach((function(e){t.all_messages.unshift(e)})),t.pagination.current=a.current_page})).finally((function(){t.view__more_loading=!1}))},copyOf:function(t){return l()(t)},get_group_messages:function(){var t=this;this.cardLoading=!0,o["a"].get_group_messages(this.activeChat.id).then((function(e){var a=e.data;t.all_messages=a.data.reverse(),t.pagination.current=a.current_page,t.pagination.total=a.last_page})).finally((function(){t.scrollToBottom(),t.cardLoading=!1}))},chat_channel:function(t){var e=this;t.bind("App\\Events\\PrivateChatSent",(function(t){var a=t.message,s=t.sender,i=t.receiver,n=e.all_messages.find((function(t){return t.conversation_id===a.conversation_id}));if(n&&i.id===e.loggeduser.id){var r=Object.assign(a,{sender:s});e.add_new_message(r),e.scrollToBottom()}else{var o=e.all_users.findIndex((function(t){return t.id===s.id}));~o&&(e.all_users[o].message_count+=1)}}))},group_chat_channel:function(t){var e=this;t.bind("App\\Events\\GroupChatSent",(function(t){if(console.log(t),e.activeChat&&e.activeChat.id===t.conversation_id)e.add_new_message(t),e.scrollToBottom();else{var a=e.all_groups.findIndex((function(e){return e.id===t.conversation_id}));~a&&(e.all_groups[a].message_count+=1)}}))},open_conversation:function(t){var e=this;this.activeChat=t,setTimeout((function(){"group"===t.type?(e.current_members=l()(e.activeChat.members),e.get_group_messages(),e.all_groups.forEach((function(e){e.id===t.id&&(e.message_count=0)}))):(e.get_messages(),e.all_users.forEach((function(e){e.id===t.id&&(e.message_count=0)})))}),1)},go_to_profile:function(t){"client"===t.role?this.$router.push("/dashboard/clients/profile/".concat(t.id)):this.$router.push("/dashboard/team/profile/".concat(t.id))},sendMessage:function(t){t?"group"===this.activeChat.type?this.sendGroupMessage(t):this.sendPrivateMessage(t):this.$event.$emit("btnsending_off",!1)},sendGroupMessage:function(t){var e=this,a=new FormData;a.append("message",t.message),a.append("type","group"),a.append("from_id",this.loggeduser.id),a.append("convo_id",this.activeChat.id),t.files.length>0&&a.append("file",t.files[0]),o["a"].send_group_message(a).then((function(t){var a=t.data;e.add_new_message(a)})).finally((function(){e.scrollToBottom(),e.$event.$emit("btnsending_off",!1)}))},sendPrivateMessage:function(t){var e=this,a=new FormData;a.append("message",t.message),a.append("type","private"),a.append("from_id",this.loggeduser.id),a.append("to_id",this.activeChat.id),t.files.length>0&&a.append("file",t.files[0]),o["a"].send_message(a).then((function(t){var a=t.data;e.add_new_message(a)})).finally((function(){e.scrollToBottom(),e.$event.$emit("btnsending_off",!1)}))},add_new_message:function(t){this.all_messages.some((function(e){return e.id===t.id}))||this.all_messages.push(t)},scrollToBottom:function(){setTimeout((function(){var t=document.getElementById("messageContainer");t&&(t.scrollTop=t.scrollHeight)}),1)},new_groupchat_added:function(t){this.all_groups.unshift(t)},is_owner:function(t){return t.id!==this.loggeduser.id&&this.activeChat.data.group_creator.id===this.loggeduser.id},sorted:function(t){return t.slice().sort((function(t,e){return t.is_online-e.is_online})).reverse()},handleTyping:function(){console.log("typing")}})},S=B,T=(a("97a6"),a("5517"),Object(f["a"])(S,s,i,!1,null,"7bb90b43",null));e["default"]=T.exports},"29d6":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header"},[t.noButton?t._e():a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click")}}},"v-icon",i,!1),s),[t._v(" mdi-plus-circle-outline ")])]}}],null,!1,1461341858)},[a("span",[t._v("Create new")])]),t.noSortButton?t._e():a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-sort-by")}}},"v-icon",i,!1),s),[t._v("sort")])]}}],null,!1,1131913180)},[a("span",[t._v("Sort")])]),t.noListButton?t._e():a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-list-view")}}},"v-icon",i,!1),s),[t._v(" mdi-view-sequential ")])]}}],null,!1,3485260972)},[a("span",[t._v("List view")])]),t.noGridButton?t._e():a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-grid-view")}}},"v-icon",i,!1),s),[t._v(" mdi-view-module ")])]}}],null,!1,1778849189)},[a("span",[t._v("Grid view")])]),t._t("form-btn")],2)},i=[],n={name:"TableHeader",props:{noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}}},r=n,o=(a("41d8"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"e62af32a",null);e["a"]=c.exports},"41d8":function(t,e,a){"use strict";var s=a("bd74"),i=a.n(s);i.a},5517:function(t,e,a){"use strict";var s=a("0df60"),i=a.n(s);i.a},5598:function(t,e,a){},"69d9":function(t,e,a){},"6ebd":function(t,e,a){"use strict";var s=a("c204"),i=a.n(s);i.a},"72c1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"avatar-wrapper"},[a("ul",{staticClass:"avatars"},[t.cutList.length>0?t._l(t.cutList,(function(e,s){return a("li",{key:s,staticClass:"avatars__item"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[t.deep&&e.user?a("img",t._g({staticClass:"avatars__img",attrs:{src:e.user.image_url}},i)):e?a("img",t._g({staticClass:"avatars__img",attrs:{src:e.image_url}},i)):t._e()]}}],null,!0)},[t.deep&&e.user?a("span",[t._v(t._s(e.user.fullname))]):e?a("span",[t._v(t._s(e.fullname))]):t._e()])],1)})):t._e(),t.less>0?a("li",{staticClass:"avatars__item"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("span",t._g({staticClass:"avatars__others"},s),[t._v("+"+t._s(t.less))])]}}],null,!1,1062212335)},[a("span",{domProps:{innerHTML:t._s(t.lessList)}})])],1):t._e(),t.hasAddMember?a("li",{staticClass:"avatars__item"},[a("span",{staticClass:"avatars__add"},[a("v-icon",{attrs:{dark:""},on:{click:function(e){return t.$emit("add-member")}}},[t._v("add")])],1)]):t._e()],2)])},i=[],n=(a("c5f6"),a("0644")),r=a.n(n),o={inheritAttrs:!1,props:{items:{type:Array,default:function(){return[]}},count:{type:Number,default:3},deep:{type:Boolean,default:!1},hasAddMember:{type:Boolean,default:!1}},computed:{less:function(){return this.items.length-this.count},cutList:function(){return this.items.length<this.count?this.items:r()(this.items).slice(0,this.count)},lessList:function(){var t=this,e=r()(this.items).slice(this.count,this.items.length);return e.length>0?e.map((function(e){return t.deep?e.user?e.user.fullname:"Deleted User":e?e.fullname:"Deleted User"})).join("<br>"):"Deleted User"}}},c=o,l=(a("1e0f"),a("2877")),u=Object(l["a"])(c,s,i,!1,null,"ee48b49c",null);e["a"]=u.exports},8807:function(t,e,a){},"97a6":function(t,e,a){"use strict";var s=a("5598"),i=a.n(s);i.a},b019:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a("1be9"),i={get_chat_list:function(){return s["a"].get("api/chat/list?for=project&has_msg_count=true")},get_chat_list_only:function(){return s["a"].get("api/chat/list?for=project")},get_groupchat_list:function(){return s["a"].get("api/chat/group/list?for=project&has_msg_count=true")},get_members_list:function(t){return s["a"].get("api/chat/group/members/".concat(t))},get_messages:function(t){return s["a"].get("api/chat/private/".concat(t))},get_more_messages:function(t,e){return s["a"].get("api/chat/private/".concat(t,"?page=").concat(e+1))},get_group_messages:function(t){return s["a"].get("api/chat/group/private/".concat(t))},get_group_more_messages:function(t,e){return s["a"].get("api/chat/group/private/".concat(t,"?page=").concat(e+1))},send_message:function(t){return s["a"].post("api/chat/private",t,{headers:{"Content-Type":"multipart/form-data"}})},send_group_message:function(t){return s["a"].post("api/chat/group/private",t,{headers:{"Content-Type":"multipart/form-data"}})},save_group:function(t){return s["a"].post("api/chat/group",t)},update_members_list:function(t){return s["a"].post("api/chat/group/update-members",t)},remove_from_group:function(t){return s["a"].post("api/chat/group/remove-member",t)}}},bd74:function(t,e,a){},c204:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2f920ea9.6f17dfed.js.map