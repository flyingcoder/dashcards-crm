(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-549807d0"],{"08f5":function(e,t,i){"use strict";var o=i("55fb"),n=i.n(o);n.a},"0977":function(e,t,i){"use strict";var o=i("f15f"),n=i.n(o);n.a},"1ca5":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{staticClass:"comments-section",attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"12"}},[i("v-subheader",{staticClass:"body-2"},[e._v("Comments:")]),i("v-list",{staticClass:"comments-wrapper",attrs:{dense:"","three-line":"",flat:"","max-height":e.maxHeight}},[e.comments.length>0?e._l(e.comments,(function(t,o){return i("v-list-item",{key:t.id,staticClass:"px-0",on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[i("v-list-item-avatar",[i("v-img",{attrs:{src:t.causer.image_url}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.causer.fullname)}}),i("v-list-item-subtitle",{staticClass:"caption"},[e._v(" "+e._s(e._f("from_now")(t.created_at))+" ")]),i("v-list-item-subtitle",{domProps:{innerHTML:e._s(t.body)}})],1),i("v-list-item-action",[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.hover&&e.can_delete_comment(t),expression:"hover && can_delete_comment(item)"}],attrs:{icon:""},on:{click:function(i){return e.confirm_delete_comment(t)}}},[i("v-icon",{attrs:{small:"",color:"grey lighten-1"}},[e._v("delete")])],1)],1)],1)})):[i("Empty",{attrs:{headline:"No comment yet"}})]],2),e.next_page_url?i("v-btn",{attrs:{dense:"",text:"",block:""},on:{click:e.fetchMoreComments}},[e._v("Load More")]):e._e()],1),i("v-col",{staticClass:"comment-field-wrapper",attrs:{md:"12"}},[i("v-row",[i("v-avatar",{attrs:{size:"40"}},[i("v-img",{attrs:{src:e.user.image_url,alt:e.user.fullname}})],1),i("v-col",{staticClass:"pr-3 pl-4",attrs:{grow:""}},[i("div",{staticClass:"comment-field"},[i("Editor",{attrs:{componentKey:e.counterReset,hasFloatingTools:!1,content:e.comment,placeholder:"Enter a comment"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),i("v-btn",{staticClass:"send",attrs:{loading:e.btnloading,tile:"",disabled:e.isEmptyComment},on:{click:e.addComment}},[i("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-send")]),e._v(" Send ")],1)],1)])],1)],1),i("DeleteDialog",{ref:"delete_comment_dialog",attrs:{title:"Delete Comment","text-content":"Are you sure you want to delete this comment?"},on:{delete:e.confirmed_delete_comment}})],1)},n=[],a=i("2909"),r=(i("20d6"),i("c5f6"),i("1be9")),s=i("579d"),l=i("5d98"),c=i("5b70"),d={name:"Comment",mixins:[s["a"]],components:{Editor:l["a"],DeleteDialog:c["a"]},props:{id:Number,componentKey:Number,items:{type:Array,default:function(){return[]}},fetchApi:{type:String,default:""},deleteApi:{type:String,default:"api/comments"},addApi:{type:String,default:"api/comments"},uploadApi:{type:String,default:"api/file/image-upload"},maxHeight:{type:Number,default:400}},data:function(){return{comments:[],comment:"",btnloading:!1,hover:!1,activeComment:null,next_page_url:null,counterReset:0}},mounted:function(){this.comments=this.items,""!==this.fetchApi&&this.fetchComments()},watch:{componentKey:{handler:function(e){e&&""!==this.fetchApi&&this.fetchComments()},deep:!0}},computed:{user:function(){return this.$store.getters.user},isEmptyComment:function(){return!this.comment||""===this.comment}},methods:{can_delete_comment:function(e){return!!this.user.is_admin||e.causer.id===this.user.id},confirm_delete_comment:function(e){this.activeComment=e,this.$refs.delete_comment_dialog.showDialog()},addComment:function(){var e=this;if(this.comment&&""!==this.comment){this.btnloading=!0;var t={comment:this.comment,body:this.comment};r["a"].post(this.addApi,t).then((function(t){var i=t.data;e.comments.push(i),e.comment="",e.counterReset+=1})).finally((function(){return e.btnloading=!1}))}},confirmed_delete_comment:function(){var e=this;r["a"].delete("".concat(this.deleteApi,"/").concat(this.activeComment.id)).then((function(t){t.data;var i=e.comments.findIndex((function(t){return t.id===e.activeComment.id}));~i&&(e.comments.splice(i,1),e.activeComment=null),e.$refs.delete_comment_dialog.closeDialog()})).finally((function(){return e.btnloading=!1}))},fetchComments:function(){var e=this;this.loading=!0,r["a"].get("".concat(this.fetchApi,"?page=1")).then((function(t){var i=t.data;e.comments=i.data,e.next_page_url=i.next_page_url})).finally((function(){return e.loading=!1}))},fetchMoreComments:function(){var e=this;r["a"].get("".concat(this.next_page_url)).then((function(t){var i,o=t.data;(i=e.comments).push.apply(i,Object(a["a"])(o.data)),e.next_page_url=o.next_page_url}))}}},u=d,f=(i("5574"),i("2877")),p=Object(f["a"])(u,o,n,!1,null,"7f30f378",null);t["a"]=p.exports},"2a20":function(e,t,i){e.exports=i.p+"img/folder.b69be6cd.png"},"3b2b":function(e,t,i){var o=i("7726"),n=i("5dbc"),a=i("86cc").f,r=i("9093").f,s=i("aae3"),l=i("0bfb"),c=o.RegExp,d=c,u=c.prototype,f=/a/g,p=/a/g,m=new c(f)!==f;if(i("9e1e")&&(!m||i("79e5")((function(){return p[i("2b4c")("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")})))){c=function(e,t){var i=this instanceof c,o=s(e),a=void 0===t;return!i&&o&&e.constructor===c&&a?e:n(m?new d(o&&!a?e.source:e,t):d((o=e instanceof c)?e.source:e,o&&a?l.call(e):t),i?this:u,c)};for(var v=function(e){e in c||a(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},g=r(d),h=0;g.length>h;)v(g[h++]);u.constructor=c,c.prototype=u,i("2aba")(o,"RegExp",c)}i("7a56")("RegExp")},"3cb1":function(e,t,i){},"4c44":function(e,t,i){"use strict";var o=i("c5fc"),n=i.n(o);n.a},"4ca9":function(e,t,i){"use strict";var o=i("a8f1"),n=i.n(o);n.a},5574:function(e,t,i){"use strict";var o=i("91e0"),n=i.n(o);n.a},"55fb":function(e,t,i){},"579d":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("28a5"),i("3b2b"),i("a481"),i("6b54"),i("4917");var o=i("7eac"),n={methods:{scrollToBottom:function(e){this.$nextTick((function(){"undefined"!==typeof e&&(e.scrollTop=e.scrollHeight-e.getBoundingClientRect().height)}))},addHost:function(e){return e&&"undefined"!==typeof e?0!==e.indexOf("http://")&&0!==e.indexOf("https://")?o["a"].apiHostBaseURL+e:e:o["a"].apiHostBaseURL},altImage:function(e){e&&e.hasOwnProperty("collection_name")&&"project.files.videos"===e.collection_name?(e.thumb_url=i("7335"),e.public_url=i("7335")):(e.thumb_url=i("e55f"),e.public_url=i("e55f"))},generate_random:function(e,t,i){for(var o=[],n=0;n<e;n++)o.push(parseInt((Math.random()*(i-t)+t).toFixed(0)));return o},youtubeParser:function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=e.match(t);return!(!i||11!==i[7].length)&&i[7]},slugify:function(e,t){e=e.toString().toLowerCase().trim();var i=[{to:"a",from:"[ÀÁÂÃÅÆĀĂĄẠẢẤẦẨẪẬẮẰẲẴẶ]"},{to:"ae",from:"[Ä]"},{to:"c",from:"[ÇĆĈČ]"},{to:"d",from:"[ÐĎĐÞ]"},{to:"e",from:"[ÈÉÊËĒĔĖĘĚẸẺẼẾỀỂỄỆ]"},{to:"g",from:"[ĜĞĢǴ]"},{to:"h",from:"[ĤḦ]"},{to:"i",from:"[ÌÍÎÏĨĪĮİỈỊ]"},{to:"j",from:"[Ĵ]"},{to:"ij",from:"[Ĳ]"},{to:"k",from:"[Ķ]"},{to:"l",from:"[ĹĻĽŁ]"},{to:"m",from:"[Ḿ]"},{to:"n",from:"[ÑŃŅŇ]"},{to:"o",from:"[ÒÓÔÕØŌŎŐỌỎỐỒỔỖỘỚỜỞỠỢǪǬƠ]"},{to:"oe",from:"[ŒÖ]"},{to:"p",from:"[ṕ]"},{to:"r",from:"[ŔŖŘ]"},{to:"s",from:"[ŚŜŞŠ]"},{to:"ss",from:"[ß]"},{to:"t",from:"[ŢŤ]"},{to:"u",from:"[ÙÚÛŨŪŬŮŰŲỤỦỨỪỬỮỰƯ]"},{to:"ue",from:"[Ü]"},{to:"w",from:"[ẂŴẀẄ]"},{to:"x",from:"[ẍ]"},{to:"y",from:"[ÝŶŸỲỴỶỸ]"},{to:"z",from:"[ŹŻŽ]"},{to:"-",from:"[·/_,:;']"}];return i.forEach((function(t){e=e.replace(new RegExp(t.from,"gi"),t.to)})),e=e.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),"undefined"!==typeof t&&"-"!==t&&(e=e.replace(/-/g,t)),e},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},validateUrl:function(e){var t=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;return t.test(e)},getOrdinalNum:function(e){return e+(e>0?["th","st","nd","rd"][e>3&&e<21||e%10>3?0:e%10]:"")},weekdays:function(){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},snakeCaseToNormal:function(e){return e.split("_").join(" ")}}}},"5b70":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("custom-dialog",{attrs:{title:e.title,content:e.textContent,"button1-text":e.cancelButtonText,"button2-text":e.deleteButtonText,open:e.open},on:{"update:open":function(t){e.open=t},button1:e.cancel_clicked,button2:e.delete_clicked},scopedSlots:e._u([{key:"content",fn:function(){return[e._t("content",[i("v-banner",{attrs:{"two-line":"",outlined:"",tile:"",flat:""}},[i("v-icon",{attrs:{slot:"icon","x-large":"",color:"red accent-4"},slot:"icon"},[e._v(" mdi-alert-octagram ")]),i("p",{staticClass:"subtitle-1",domProps:{innerHTML:e._s(e.textContent)}})],1)])]},proxy:!0}],null,!0)})],1)},n=[],a=i("57e5"),r={components:{CustomDialog:a["a"]},props:{title:{type:String,default:"Default Modal Title"},textContent:{type:String,default:"Default Modal Text Content"},cancelButtonText:{type:String,default:"Cancel"},deleteButtonText:{type:String,default:"Yes, Delete"},openDialog:Boolean},data:function(){return{open:!1}},watch:{openDialog:function(e){this.open=e},open:function(e){this.$emit("update:openDialog",e)}},methods:{cancel_clicked:function(){this.open=!1},delete_clicked:function(){this.$emit("delete")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},s=r,l=i("2877"),c=Object(l["a"])(s,o,n,!1,null,null,null);t["a"]=c.exports},"64b1":function(e,t,i){"use strict";var o=i("7153"),n=i.n(o);n.a},7153:function(e,t,i){},7335:function(e,t,i){e.exports=i.p+"img/no-video-preview.6c0717ce.png"},"8d9c":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var o={computed:{is_screen_medium_and_up:function(){return this.$vuetify.breakpoint.mdAndUp},is_screen_medium_and_down:function(){return this.$vuetify.breakpoint.mdAndDown},is_screen_small_and_down:function(){return this.$vuetify.breakpoint.smAndDown}}}},"91e0":function(e,t,i){},"9bac":function(e,t,i){"use strict";var o=i("3cb1"),n=i.n(o);n.a},a8f1:function(e,t,i){},c5fc:function(e,t,i){},d7cc:function(e,t,i){},e3ec:function(e,t,i){"use strict";var o=i("d7cc"),n=i.n(o);n.a},e55f:function(e,t){e.exports="data:image/jpeg;base64,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"},f15f:function(e,t,i){},fec3:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files_tab"},[i("v-divider"),i("v-tabs",{staticClass:"tabs",attrs:{height:"50px",grow:"","show-arrows":e.is_screen_medium_and_down,dense:"",centered:""},model:{value:e.active_tab,callback:function(t){e.active_tab=t},expression:"active_tab"}},e._l(e.tabs,(function(t,o){return i("v-tab",{key:o,attrs:{exact:""},on:{click:function(i){return e.changeTab(t.view)}}},[i("div",[i("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]),e._v(" "+e._s(t.name)+" ")],1)])})),1),"files"===e.view?i("BuzzookaTab",{attrs:{projectId:e.id}}):"google-drive"===e.view?i("GoogleDriveTab",{attrs:{projectId:e.id}}):"dropbox"===e.view?i("DropboxTab",{attrs:{projectId:e.id}}):e._e()],1)},n=[],a=(i("20d6"),i("c5f6"),i("8d9c")),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files__tab"},[i("LinkDialog",{ref:"link_dialog",on:{save:e.addLink}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete File","text-content":"Are you sure you want to delete this file?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:e.delete_item}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Selected Files","text-content":"Are you sure you want to delete these files? <br>This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:e.bulk_delete_files}}),i("div",{staticClass:"drop__files"},[i("div",{staticClass:"drop__files_body"},[i("CustomDropzone",{ref:"dropzone",attrs:{needConfirmation:!0,duplicateCheck:!0,options:e.dropzoneOptions,useCustomSlot:!0,dictFileTooBig:"File too big",dictInvalidFileType:"Invalid file type"},on:{success:e.file_added,failed:e.file_failed,"open-add-link-dialog":e.open_link_dialog,"upload-this-files":e.manual_upload}})],1)]),i("EmbedViewer",{ref:"embed_viewer_dialog",attrs:{media:e.selected_media}}),i("VideoViewer",{ref:"video_viewer_dialog",attrs:{media:e.selected_media,previewFrom:"files"}}),i("ImageViewer",{ref:"image_viewer_dialog",attrs:{media:e.selected_media,previewFrom:"files"}}),i("DocsViewer",{ref:"doc_viewer_dialog",attrs:{media:e.selected_media}}),i("IframeViewer",{ref:"iframe_viewer_dialog",attrs:{media:e.selected_media}}),i("OtherViewer",{ref:"other_viewer_dialog",attrs:{media:e.selected_media}}),i("v-card",{staticClass:"files__tab-content p-2",attrs:{outlined:""}},[i("v-row",{staticClass:"pa-5 files-header",attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"11",sm:"9",xs:"12"}},e._l(e.toolbarItems,(function(t){return i("ToolbarItem",{key:t.id,attrs:{icon:t.icon,"icon-text":t.iconText,"icon-class":t.className,"is-active":t.type===e.filter},on:{click:function(i){e.filter=t.type}}})})),1),i("v-spacer"),i("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){return e.setPreferredView("list")}}},[i("v-icon",{class:{active:"list"===e.view}},[e._v("mdi-view-sequential")])],1),i("v-btn",{attrs:{icon:"",right:""},on:{click:function(t){return e.setPreferredView("grid")}}},[i("v-icon",{class:{active:"grid"===e.view}},[e._v("mdi-view-module")])],1)],1),"grid"===e.view?i("v-card",{staticClass:"grid-view",attrs:{flat:""}},[i("v-container",{attrs:{fluid:"","grid-list-md":""}},[e.filteredItems.length?i("v-layout",{attrs:{wrap:""}},e._l(e.filteredItems,(function(t){return i("v-col",{key:t.id,attrs:{xs:"12",sm:"4",md:"3"}},[i("v-card",[i("Media",{attrs:{height:150,media:t},on:{"click-alt":function(i){return e.openViewer(t)},"click-main":function(i){return e.openViewer(t)}}}),i("v-card-text",[i("v-list",{staticClass:"pa-0",attrs:{dense:""}},[i("v-list-item",{staticClass:"pa-0",attrs:{"two-line":""}},[i("v-list-item-content",[i("v-list-item-subtitle",[i("div",{staticClass:"break-word-container",attrs:{title:t.name}},[e._v(" "+e._s(e._f("str_limit")(t.name,25))+" ")])]),i("v-list-item-subtitle",[i("span",{staticClass:"grey--text"},[e._v(" Added by: "+e._s(t.custom_properties.user.first_name))])])],1)],1)],1)],1),i("v-card-actions",[i("span",{staticClass:"overline"},[e._v(e._s(t.custom_properties.ext))]),i("v-spacer"),"videos"===t.category||"images"===t.category?i("v-menu",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({staticClass:"ml-1",attrs:{icon:"",depressed:""}},Object.assign({},n,o)),[i("v-icon",[e._v("mdi-clipboard-pulse-outline")])],1)]}}],null,!0)},[i("span",[e._v("Approval Status")])])]}}],null,!0)},[i("v-list",e._l(e.approval_actions(t),(function(o,n){return i("v-list-item",{key:n,on:{click:function(i){return e.update_status(t,o)}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v(e._s(o.icon))]),e._v(" "+e._s(o.title)+" ")],1)],1)})),1)],1):e._e(),"link"!==t.mime_type?i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({staticClass:"ml-1",attrs:{depressed:"",icon:"",href:t.download_url}},n),[i("v-icon",[e._v("mdi-cloud-download-outline")])],1)]}}],null,!0)},[i("span",[e._v("Download File")])]):i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({staticClass:"ml-1",attrs:{icon:"",depressed:""},on:{click:function(i){return e.goto_link(t.download_url)}}},n),[i("v-icon",[e._v("mdi-link-box-variant-outline")])],1)]}}],null,!0)},[i("span",[e._v("Go to link")])]),e.can_delete(t)?i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({staticClass:"ml-1",attrs:{icon:"",depressed:""},on:{click:function(i){return e.open_delete_dialog(t)}}},n),[i("v-icon",[e._v("mdi-delete-circle-outline")])],1)]}}],null,!0)},[i("span",[e._v("Delete File")])]):e._e()],1)],1)],1)})),1):e._e(),e.filteredItems.length?i("v-row",{attrs:{"no-gutters":""}},[i("v-spacer"),i("v-card-actions",{staticClass:"py-2"},[e.noMoreData?i("v-btn",{attrs:{tile:"",text:"",disabled:""}},[e._v("NO MORE DATA")]):i("v-btn",{attrs:{tile:"",text:"",loading:e.btnloading},on:{click:e.get_more_files}},[e._v("LOAD MORE")])],1),i("v-spacer")],1):i("Empty",{attrs:{icon:"mdi-file-alert-outline",headline:"No file found"}})],1)],1):"list"===e.view?i("VueTable",{key:e.componentKey,attrs:{items:e.filteredItems,headers:e.headers,showRowActions:!0,icon:"mdi-file-alert-outline",title:"Files",loading:e.loading,noMoreData:e.noMoreData,showSelect:e.user.is_admin},on:{"load-more":e.get_more_files,"delete-selected":e.confirmBulkDeleteFiles},scopedSlots:e._u([{key:"row-slot",fn:function(t){var o=t.item;return[i("td",[i("Media",{attrs:{height:50,width:50,media:o,size:"lg"},on:{"click-alt":function(t){return e.openViewer(o)},"click-main":function(t){return e.openViewer(o)}}})],1),i("td",{staticClass:"text-upper"},[e._v(e._s(o.custom_properties.ext))]),i("td",{staticClass:"text-cap"},[e._v(e._s(o.name))]),i("td",{staticClass:"text-cap"},[e._v(" "+e._s(o.custom_properties.user.first_name)+" ")]),i("td",{staticClass:"text-xs-center text-right"},["videos"===o.category||"images"===o.category?i("v-menu",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{icon:"",depressed:""}},Object.assign({},n,o)),[i("v-icon",[e._v("mdi-clipboard-pulse-outline")])],1)]}}],null,!0)},[i("span",[e._v("Approval Status")])])]}}],null,!0)},[i("v-list",e._l(e.approval_actions(o),(function(t,n){return i("v-list-item",{key:n,on:{click:function(i){return e.update_status(o,t)}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]),e._v(" "+e._s(t.title)+" ")],1)],1)})),1)],1):e._e(),"link"!==o.mime_type?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{icon:"",depressed:"",href:o.download_url}},n),[i("v-icon",[e._v("mdi-cloud-download-outline")])],1)]}}],null,!0)},[i("span",[e._v("Download File")])]):i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{icon:"",depressed:""},on:{click:function(t){return e.goto_link(o.download_url)}}},n),[i("v-icon",[e._v("mdi-link-box-variant-outline")])],1)]}}],null,!0)},[i("span",[e._v("Go to link")])]),e.can_delete(o)?i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{icon:"",depressed:""},on:{click:function(t){return e.open_delete_dialog(o)}}},n),[i("v-icon",[e._v("mdi-delete-circle-outline")])],1)]}}],null,!0)},[i("span",[e._v("Delete File")])]):e._e()],1)]}}])}):e._e()],1)],1)},s=[],l=(i("8e6e"),i("ac6a"),i("456d"),i("53ca")),c=i("3835"),d=i("2909"),u=(i("6762"),i("2fdb"),i("ade3")),f=i("e06e"),p=i("579d"),m=i("7eac"),v=i("1be9"),g=function(e){return v["a"].delete("api/file/".concat(e))},h=function(e,t){return v["a"].post("api/projects/".concat(e,"/link"),t)},_=function(e,t){return v["a"].get("api/projects/".concat(e,"/file?page=").concat(t.page,"&type=").concat(t.type))},b=function(e,t){return v["a"].post("api/file/".concat(e,"/status"),t)},y=i("2f62"),w=i("0ebe"),A=i("8b7e"),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"link-dialog"},[i("CustomDialog",{ref:"dialog",attrs:{open:e.dialog,title:"File URL","button1-text":"Cancel"},on:{"update:open":function(t){e.dialog=t},button1:e.close_dialog},scopedSlots:e._u([{key:"content",fn:function(){return[i("v-layout",{staticClass:"custom-dialog",attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",md12:""}},[i("v-text-field",{attrs:{label:"File URL*",type:"url",filled:"","prepend-inner-icon":"mdi-link-plus","hide-details":"auto",color:"#657186"},model:{value:e.url,callback:function(t){e.url="string"===typeof t?t.trim():t},expression:"url"}})],1)],1)]},proxy:!0},{key:"button2",fn:function(){return[i("v-btn",{attrs:{disabled:e.disabled},on:{click:e.saveClicked}},[e._v("Save Link")])]},proxy:!0}])})],1)},k=[],C=i("57e5"),D={mixins:[p["a"]],components:{CustomDialog:C["a"]},data:function(){return{dialog:!1,url:null}},computed:{disabled:function(){return!this.validateUrl(this.url)}},methods:{openDialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1},closeAndClearDialog:function(){Object.assign(this.$data,this.$options.data.apply(this))},saveClicked:function(){this.validateUrl(this.url)&&this.$emit("save",{url:this.url})}}},F=D,I=i("2877"),B=Object(I["a"])(F,x,k,!1,null,null,null),T=B.exports,E=i("5b70"),j=function(e,t){var i=t._c;return i("v-btn",t._g({staticClass:"mr-1",class:["button",{active:t.props.isActive}],attrs:{color:"#b3b7c3",medium:"",text:""}},t.listeners),[i("v-icon",{class:t.props.iconClass,attrs:{left:""}},[t._v(t._s(t.props.icon))]),t._v(" "+t._s(t.props.iconText)+" ")],1)},$=[],O={props:{icon:String,iconText:String,iconClass:String,isActive:Boolean}},S=O,M=(i("4c44"),Object(I["a"])(S,j,$,!0,null,"dea02936",null)),z=M.exports,G=i("458a"),P=i("b425"),R=i("83f3"),L=i("cf0d"),N=i("196d"),U=i("7650");function Y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function V(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach((function(t){Object(u["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Q={name:"BuzzookaTab",mixins:[f["a"],p["a"]],props:{projectId:[String,Number]},components:{VueTable:w["a"],CustomDropzone:A["a"],LinkDialog:T,DeleteDialog:E["a"],ToolbarItem:z,EmbedViewer:G["a"],VideoViewer:P["a"],ImageViewer:R["a"],DocsViewer:L["a"],OtherViewer:U["a"],IframeViewer:N["a"]},data:function(){return{headers:[{text:"Thumbnail",value:"thumbnail",sortable:!1,width:80},{text:"Filetype",value:"filetype",sortable:!1,width:30},{text:"Filename",value:"filename",sortable:!1},{text:"Added by",value:"member",sortable:!1,width:100},{text:"Action",sortable:!1,align:"center",width:"180px"}],table_config:{route_name:"project_preview",add_message:"New File(s) added successfully!",delete_message:"File deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_tab_files_table"},btnloading:!1,url:"",dialog:!1,filter:"all",toolbarItems:[{id:1,className:"all",type:"all",icon:"mdi-file-cabinet",iconText:"All"},{id:2,className:"image",type:"image",icon:"mdi-file-image-outline",iconText:"Image"},{id:3,className:"video",type:"video",icon:"mdi-file-video-outline",iconText:"Video"},{id:4,className:"docs",type:"document",icon:"mdi-file-pdf-outline",iconText:"Docs"},{id:5,className:"links",type:"link",icon:"mdi-file-link-outline",iconText:"Links"},{id:6,className:"other",type:"other",icon:"mdi-file-table-outline",iconText:"Other"},{id:7,className:"approval",type:"approval",icon:"mdi-file-check-outline",iconText:"Approval"}],log_id:null,selected_media:null,bulk_delete_dialog:!1}},computed:V(V({},Object(y["c"])(["user"])),{},{permissionsAll:function(){return this.$_permissions.get("hq_files")},permissionsOwn:function(){return this.$_permissions.get("hq_files_own")},filteredItems:function(){var e=this;return 0===this.items.length?[]:"all"===this.filter?this.items:"approval"===this.filter?this.items.filter((function(e){return 1===e.approved&&("videos"===e.category||"images"===e.category)})):this.items.filter((function(t){return t.category.includes(e.filter)}))},dropzoneOptions:function(){return{autoProcessQueue:!1,thumbnailWidth:150,timeout:5e5,addRemoveLinks:!0,maxFiles:5,url:m["a"].apiHostBaseURL+"/api/projects/".concat(this.id,"/file"),headers:{Authorization:"Bearer "+localStorage.getItem("token")}}},dynamic_api:function(){return"api/projects/".concat(this.id,"/file")},id:function(){return this.projectId?this.projectId:this.$route.params.id},type:function(){return this.$route.params.type||"project"},paths:function(){return[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:this.type,disabled:!1,route:{path:"/dashboard/".concat(this.type,"/preview/").concat(this.id)}},{text:"Files",disabled:!0,router_name:null}]}}),mounted:function(){this.$event.$emit("path-change",this.paths),this.view=this.getPreferredView(),this.get_files()},methods:{can_delete:function(e){return!!this.user.is_admin||(!(!this.permissionsAll||!this.permissionsAll.delete)||this.permissionsOwn&&this.permissionsOwn.delete&&this.is_file_owner(e))},is_file_owner:function(e){return e.custom_properties.user&&e.custom_properties.user.id===this.user.id},get_files:function(){var e=this;this.item=[];var t={page:1,type:this.filter};_(this.id,t).then((function(t){var i=t.data;e.items=i.data,e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},get_more_files:function(){var e=this;this.item=[];var t={page:this.pagination.current+1,type:"all"};_(this.id,t).then((function(t){var i,o=t.data;(i=e.items).push.apply(i,Object(d["a"])(o.data)),e.pagination.current=o.current_page,e.pagination.total=o.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},manual_upload:function(){this.$refs.dropzone.process_queue()},pop:function(e){this.dialog=!0,this.url=e},sortFile:function(e){alert("This feature is under-construction.")},file_added:function(e){this.$event.$emit("open_snackbar","File(s) uploaded successfully");var t="string"===typeof e.response?JSON.parse(e.response):e.response;this.items.unshift(t),this.$refs.dropzone.remove_file(e.file),this.clear_selected()},open_link_dialog:function(){this.$refs.link_dialog.openDialog()},addLink:function(e){var t=this;h(this.id,e).then((function(e){var i=e.data;t.items.push(i),t.$refs.link_dialog.closeAndClearDialog(),t.$event.$emit("open_snackbar","New link added!"),t.clear_selected()})).finally((function(){return t.$event.$emit("btnloading_off",!1)}))},confirmBulkDeleteFiles:function(e){this.selected=e,this.bulk_delete_dialog=!0},bulk_delete_files:function(){this.bulk_delete_via_url("".concat(this.dynamic_api,"/bulk-delete")),this.bulk_delete_dialog=!1},delete_item:function(){var e=this;g(this.delete_item_id).then((function(){var t=e.items.findIndex((function(t){return t.id===e.delete_item_id}));~t&&(e.items.splice(t,1),e.delete_item_id=null,e.delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",e.table_config.delete_message))})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},file_failed:function(e){var t=Object(c["a"])(e,2),i=(t[0],t[1]);this.$event.$emit("open_snackbar","object"===Object(l["a"])(i)?i[0]:i,"error")},goto_link:function(e){window.open(e)},openViewer:function(e){this.selected_media=e,"links"===e.category&&e.custom_properties.hasOwnProperty("embed")&&e.custom_properties.embed?this.$refs.embed_viewer_dialog.openDialog():"videos"===e.category?this.$refs.video_viewer_dialog.openDialog():"images"===e.category?this.$refs.image_viewer_dialog.openDialog():"documents"===e.category?this.$refs.doc_viewer_dialog.openDialog():"links"===e.category?this.$refs.iframe_viewer_dialog.openDialog():this.$refs.other_viewer_dialog.openDialog()},approval_actions:function(e){var t=[{id:2,title:"Approved",action:"approved",icon:"mdi-file-check-outline"},{id:0,title:"Reject",action:"reject",icon:"mdi-file-cancel-outline"},{id:1,title:"For Modification",action:"modification",icon:"mdi-file-edit-outline"}];return t.filter((function(t){return t.id!==e.approved||1===t.id}))},update_status:function(e,t){var i=this,o={action:t.id};b(e.id,o).then((function(o){var n=o.data,a=i.items.findIndex((function(t){return t.id===e.id}));~a&&(i.$event.$emit("open_snackbar",n.message),i.items[a].approved=t.id)}))}}},H=Q,J=(i("e3ec"),i("9bac"),Object(I["a"])(H,r,s,!1,null,"652ddac5",null)),q=J.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files__tab"},[i("delete-dialog",{attrs:{"open-dialog":e.delete_file_dialog,title:"Delete File","text-content":"Are you sure you want to delete this file?<br> This will also be deleted in Google Drive"},on:{"update:openDialog":function(t){e.delete_file_dialog=t},"update:open-dialog":function(t){e.delete_file_dialog=t},delete:e.handleDeletes}}),i("FolderDialog",{ref:"folder_dialog",on:{save:e.createFolder}}),i("GDriveFolderDialog",{ref:"gdrive_dialog",attrs:{currentFolders:e.project_folders},on:{"folder-removed":e.folderRemovedFromDB,save:e.saveFolders}}),i("v-card",{staticClass:"gdrive-content",attrs:{outlined:""}},[i("v-card-title",{staticClass:"py-1"},[e.isGoogleAuthorized?i("v-col",{attrs:{md:"12"}},[e.project_folders.length>0&&"root"!==e.activeFolderId?i("Uploader",{attrs:{folder:e.activeFolder},on:{"upload-files":e.handleUploads,"open-create-folder-dialog":e.openCreateFolderDialog}}):"root"===e.activeFolderId?i("v-alert",{attrs:{type:"info",outlined:""}},[e._v(" Select folder to upload file(s). ")]):e._e()],1):e._e(),i("v-col",[i("h3",{staticClass:"page-title"},[i("v-icon",{attrs:{left:""}},[e._v("mdi-google-drive")]),e._v(" Google Drive")],1)]),i("v-spacer"),e.can_manage_folders&&e.isGoogleAuthorized?i("v-btn",{attrs:{large:"",text:"",outlined:""},on:{click:e.openAddFolderDialog}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-folder-google-drive")]),e._v(" Manage Google Drive Folders ")],1):e._e()],1),i("v-card-text",[e.isGoogleAuthorized?i("v-breadcrumbs",{staticClass:"px-1",attrs:{dense:"",items:e.breadcrumbs},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[o.disabled?i("span",{attrs:{tiltle:o.text}},[e._v(e._s(e._f("truncate")(o.text,18)))]):i("span",{staticClass:"cursor",attrs:{tiltle:o.text},on:{click:function(t){return e.go_to_folder(o.folder)}}},[e._v(e._s(e._f("truncate")(o.text,18)))])]}}],null,!1,3372843377)}):e._e(),i("v-divider"),e.loading?i("v-progress-linear",{attrs:{indeterminate:!0}}):e._e(),e.isGoogleAuthorized||e.loading?e.files.length>0&&!e.loading?i("v-row",{staticClass:"my-0"},[e._l(e.files,(function(t){return i("v-col",{key:t.id,attrs:{md:"2",sm:"3"}},[i("v-card",{attrs:{flat:"",outlined:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{contain:"",src:e.getImage(t),gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.4)",height:"150"}},[i("v-card-title",{staticClass:"caption",domProps:{textContent:e._s(t.name)}})],1),i("v-card-actions",[i("v-spacer"),e.is_folder(t)?i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({attrs:{icon:""},on:{click:function(i){return e.getFileForFolder(t)}}},n),[i("v-icon",{attrs:{color:"yellow"}},[e._v("mdi-folder-open")])],1)]}}],null,!0)},[i("span",[e._v("Open Folder")])]):i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({attrs:{icon:"",href:t.webViewLink,target:"_blank"}},n),[i("v-icon",{attrs:{color:"success"}},[e._v("mdi-eye")])],1)]}}],null,!0)},[i("span",[e._v("View File")])]),t.exportLinks&&t.capabilities.canDownload?i("v-menu",{attrs:{bottom:"",origin:"center center",transition:"slide-x-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{icon:""}},Object.assign({},n,o)),[i("v-icon",{attrs:{color:"primary"}},[e._v("mdi-cloud-download")])],1)]}}],null,!0)},[i("span",[e._v("Download File")])])]}}],null,!0)},[i("v-list",{staticClass:"pa-0 ma-0"},e._l(e.links(t.exportLinks),(function(t,o){return i("v-list-item",{key:o,staticClass:"ma-0 pa-0"},[i("v-btn",{staticClass:"text-left",attrs:{text:"",block:"",href:t.link}},[e._v("Download as "+e._s(e._f("uppercase")(t.text)))])],1)})),1)],1):t.webContentLink&&t.capabilities.canDownload?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({attrs:{icon:"",href:t.webContentLink}},n),[i("v-icon",{attrs:{color:"primary"}},[e._v("mdi-cloud-download")])],1)]}}],null,!0)},[i("span",[e._v("Download File")])]):e._e(),t.capabilities.canDelete?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-btn",e._g({attrs:{icon:""},on:{click:function(i){return e.confirm_delete(t)}}},n),[i("v-icon",{attrs:{color:"primary"}},[e._v("mdi-delete")])],1)]}}],null,!0)},[i("span",[e._v("Delete "+e._s(e.is_folder(t)?"Folder":"File"))])]):e._e()],1)],1)],1)})),e.nextPageToken?i("v-col",{attrs:{md:"12"}},[i("v-btn",{attrs:{text:"",block:""},on:{click:e.load_more}},[e._v("Load More")])],1):e._e()],2):e.loading||0!==e.project_folders.length?e.loading||0!==e.files.length?e._e():i("Empty",{attrs:{headline:"No files found!"}}):i("Empty",{attrs:{icon:"mdi-folder-remove-outline",headline:"No folder found!"},scopedSlots:e._u([e.can_manage_folders&&e.isGoogleAuthorized?{key:"extra",fn:function(){return[i("v-btn",{attrs:{large:"",dark:"",color:"#3b589e"},on:{click:e.openAddFolderDialog}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-google-drive")]),e._v(" Add Google Folder Link ")],1)]},proxy:!0}:null],null,!0)}):i("Empty",{attrs:{headline:"No Google Drive connected!"},scopedSlots:e._u([{key:"extra",fn:function(){return[i("v-btn",{attrs:{large:"",dark:"",color:"#3b589e",to:{name:"cloud"}}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-google-drive")]),e._v(" Connect to Google Drive ")],1)]},proxy:!0}],null,!1,1258926603)})],1)],1)],1)},Z=[],K=(i("28a5"),i("8615"),i("386d"),i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"uploader",attrs:{flat:"",outlined:""}},[0===e.previews.length?i("v-card-text",{staticClass:"preview-wrapper text-center"},[i("v-spacer"),i("v-avatar",{attrs:{tile:"",size:"150"}},[i("v-icon",{staticClass:"main-icon"},[e._v("mdi-google-drive")])],1),i("v-spacer")],1):i("v-card-text",{staticClass:"preview-wrapper"},e._l(e.previews,(function(t,o){return i("v-avatar",{key:o,staticClass:"ma-1 bordered",attrs:{size:"150",tile:""}},[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var a=n.on;return[i("v-img",e._g({attrs:{contain:"",src:t.image}},a),[i("v-btn",{staticClass:"ma-2",attrs:{outlined:"",disabled:e.btnloading,icon:""},on:{click:function(t){return e.removeFile(o)}}},[i("v-icon",{attrs:{color:"red"}},[e._v("close")])],1)],1)]}}],null,!0)},[i("span",[e._v(e._s(t.name))])])],1)})),1),i("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.isUploading,expression:"isUploading"}],attrs:{indeterminate:!0}}),i("input",{ref:"hidden_file_input",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{change:e.filesAdded}}),i("v-card-actions",{staticClass:"pa-2 actions"},[i("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("span",e._g({staticClass:"caption"},o),[e._v(e._s(e.filescounts))])]}}])},[i("span",[e._v("Max Number of Files")])]),i("v-spacer"),i("v-btn",{attrs:{large:"",text:"",outlined:"",disabled:e.isMaxFile||e.btnloading},on:{click:function(t){return e.$refs.hidden_file_input.click()}}},[i("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-file-plus")]),e._v(" Add Files ("),i("small",{staticClass:"overline"},[e._v(e._s(e._f("truncate")(e.folder,15)))]),e._v(") ")],1),i("v-btn",{attrs:{large:"",text:"",outlined:"",disabled:!e.hasFile||e.btnloading},on:{click:e.removeFiles}},[i("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-file-remove")]),e._v(" Remove Files ")],1),i("v-btn",{attrs:{large:"",text:"",outlined:"",disabled:!e.hasFile,loading:e.btnloading},on:{click:e.uploadFiles}},[i("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-cloud-upload")]),e._v(" Upload Files ")],1),i("v-spacer"),e.can_create_folder?i("v-btn",{attrs:{large:"",outlined:""},on:{click:function(t){return e.$emit("open-create-folder-dialog")}}},[i("v-icon",{attrs:{left:"",small:""}},[e._v("mdi-folder-plus")]),e._v(" Create Folder ")],1):e._e()],1)],1)}),W=[],ee={name:"Uploader",props:{maxFiles:{type:Number,default:5},can_create_folder:{type:Boolean,default:!1},folder:{type:String,default:"Root Folder"}},data:function(){return{files:[],previews:[],btnloading:!1,isUploading:!1}},mounted:function(){var e=this;this.$event.$on("file-upload-clear-all",(function(){return e.removeFiles()})),this.$event.$on("file-uploaded",(function(t){return e.file_done_upload(t)})),this.$event.$on("btnloading_off",(function(){e.btnloading=!1}))},computed:{hasFile:function(){return this.files.length>0},isMaxFile:function(){return this.files.length>=this.maxFiles},filescounts:function(){return this.files.length+"/"+this.maxFiles}},methods:{filesAdded:function(e){var t=this;e.target.files&&e.target.files.length>0&&Object(d["a"])(e.target.files).forEach((function(e){t.isMaxFile?t.$event.$emit("open_snackbar","Some items are skipped, max files count exceed!","warning"):(t.files.push(e),t.previews.push(t.createPreview(e)))}))},createPreview:function(e){return e.type.includes("image")?{name:e.name,image:URL.createObjectURL(e)}:{name:e.name,image:i("e55f")}},removeFile:function(e){this.files.splice(e,1),this.previews.splice(e,1)},removeFiles:function(){this.files=[],this.previews=[],this.isUploading=!1},uploadFiles:function(){this.btnloading=this.isUploading=!0,this.$emit("upload-files",this.files)},file_done_upload:function(e){console.log(e)}}},te=ee,ie=(i("0977"),Object(I["a"])(te,K,W,!1,null,null,null)),oe=ie.exports,ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"folder-dialog"},[i("CustomDialog",{ref:"dialog",attrs:{open:e.dialog,title:"Create Folder","button1-text":"Cancel","button2-text":"Save"},on:{"update:open":function(t){e.dialog=t},button1:e.close_dialog,button2:e.saveClicked},scopedSlots:e._u([{key:"content",fn:function(){return[i("v-layout",{staticClass:"custom-dialog",attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",md12:""}},[i("v-text-field",{attrs:{label:"Folder Name",type:"url",solo:"","hide-details":"",color:"#657186"},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1)],1)]},proxy:!0}])})],1)},ae=[],re={name:"FolderDialog",components:{CustomDialog:C["a"]},data:function(){return{dialog:!1,name:null}},methods:{openDialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1},closeAndClearDialog:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.dialog=!1,this.$event.$emit("btnloading_off",!1)},saveClicked:function(){this.name&&this.$emit("save",{name:this.name})}}},se=re,le=Object(I["a"])(se,ne,ae,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"link-dialog"},[i("CustomDialog",{ref:"dialog",attrs:{mainBtnDisabled:!e.hasPreferredFolders,open:e.dialog,title:"Enter Google Drive Folder URL","button1-text":"Cancel","button2-text":"Save"},on:{"update:open":function(t){e.dialog=t},button1:e.close_dialog,button2:e.saveClicked},scopedSlots:e._u([{key:"content",fn:function(){return[i("v-row",{staticClass:"custom-dialog"},[i("v-col",{attrs:{md:"12"}},[i("v-row",[i("v-col",{attrs:{md:"10"}},[i("v-text-field",{attrs:{disabled:e.maxFolderExceed,label:"Enter Google Drive Folder URL",clearable:"",type:"url",filled:"","hide-details":"",color:"#657186"},model:{value:e.url,callback:function(t){e.url="string"===typeof t?t.trim():t},expression:"url"}})],1),i("v-col",[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-btn",e._g({attrs:{disabled:e.maxFolderExceed,large:"",icon:"",outlined:""},on:{click:e.getFolderPreview}},o),[i("v-icon",[e._v("mdi-link-plus")])],1)]}}])},[i("span",[e._v("Fetch Folder")])])],1)],1)],1),i("v-col",{attrs:{md:"12"}},[e._l(e.folders,(function(t){return i("v-card",{key:t.id,staticClass:"mx-auto mx-0 mb-1",attrs:{flat:"",dense:""}},[i("v-card-actions",[i("v-list-item",{staticClass:"grow"},[i("v-list-item-avatar",{attrs:{tile:"",color:"grey darken-3"}},[i("v-img",{staticClass:"elevation-6",attrs:{src:e.folder_icon}})],1),i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t.name))])],1),i("v-row",{attrs:{align:"center",justify:"end"}},[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-icon",e._g({staticClass:"mr-1",on:{click:function(i){return e.delete_from_preffered(t)}}},n),[e._v(" mdi-close ")])]}}],null,!0)},[i("span",[e._v("Remove Folder")])])],1)],1)],1)],1)})),e._l(e.currentFolders,(function(t){return i("v-card",{key:t.id,staticClass:"mx-auto mb-1",attrs:{flat:"",dense:""}},[i("v-card-actions",[i("v-list-item",{staticClass:"grow"},[i("v-list-item-avatar",{attrs:{tile:"",color:"grey darken-3"}},[i("v-img",{staticClass:"elevation-6",attrs:{src:e.folder_icon}})],1),i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t.name))])],1),i("v-row",{attrs:{align:"center",justify:"end"}},[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on;return[i("v-icon",e._g({staticClass:"mr-1",on:{click:function(i){return e.delete_from_db(t)}}},n),[e._v(" mdi-folder-remove ")])]}}],null,!0)},[i("span",[e._v("Remove Folder From Project (Not from Google Drive)")])])],1)],1)],1)],1)}))],2)],1)]},proxy:!0},{key:"extras",fn:function(){return[i("span",{staticClass:"ml-2"},[e._v(e._s(e.futureTotal+"/"+e.maxFolderTotal))]),i("v-spacer")]},proxy:!0}])})],1)},ue=[],fe=(i("55dd"),i("a481"),{name:"GDriveDialog",components:{CustomDialog:C["a"]},props:{currentFolders:Array,maxFolderTotal:{type:Number,default:10}},data:function(){return{dialog:!1,url:null,folders:[],folder_icon:i("2a20")}},computed:{hasPreferredFolders:function(){return this.folders.length>0},futureTotal:function(){return this.currentFolders.length+this.folders.length},maxFolderExceed:function(){return this.futureTotal>=this.maxFolderTotal}},methods:{openDialog:function(){this.folders=[],this.dialog=!0},close_dialog:function(){this.dialog=!1},closeAndClearDialog:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.close_dialog()},saveClicked:function(){this.hasPreferredFolders&&this.$emit("save",{folders:this.folders})},getIdFrom:function(){var e="";if(this.url){var t=this.url,i=t.split(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(t.indexOf("?id=")>=0)return i[6].split("=")[1].replace("&usp","");e=i[5].split("/");var o=e.sort((function(e,t){return t.length-e.length}));return o[0]}},isFolderDuplicate:function(e){var t=this.currentFolders.findIndex((function(t){return t.id===e}));return!!~t},getFolderPreview:function(){var e=this,t=this.getIdFrom();"undefined"!==typeof t?this.isFolderDuplicate(t)||this.isFolderDuplicate(t)?this.$event.$emit("open_snackbar","Duplicate folder.","error"):this.$gapi.request({path:"https://www.googleapis.com/drive/v3/files/"+t,method:"GET"}).catch((function(t){e.$event.$emit("open_snackbar",t.result.error.message,"error")})).then((function(t){if(t.result.mimeType&&t.result.mimeType.includes(".folder")){var i=e.folders.findIndex((function(e){return e.id===t.result.id}));~i?e.$event.$emit("open_snackbar","Duplicate Folder!","error"):(e.folders.push(t.result),e.url=null)}})):this.$event.$emit("open_snackbar","Invalid URL","error")},delete_from_preffered:function(e){var t=this.folders.findIndex((function(t){return t.id===e.id}));~t&&this.folders.splice(t,1)},delete_from_db:function(e){var t=this;v["a"].delete("api/projects/".concat(this.projectId,"/folder-id/google-drive/").concat(e.id)).then((function(i){var o=t.currentFolders.findIndex((function(t){return t.id===e.id}));~o&&(t.$emit("folder-removed",e),t.currentFolders.splice(o,1))}))}}}),pe=fe,me=Object(I["a"])(pe,de,ue,!1,null,null,null),ve=me.exports,ge={name:"GoogleDriveTab",components:{Uploader:oe,DeleteDialog:E["a"],FolderDialog:ce,GDriveFolderDialog:ve},props:{projectId:[Number,String]},data:function(){return{files:[],nextPageToken:null,breadcrumbs:[{text:"Root Folder",disabled:!0,href:"",link:!1,folder:"root"}],loading:!0,isGoogleAuthorized:!1,search:"",googleUser:null,fileApi:"https://www.googleapis.com/drive/v3/files",uploadApi:"https://www.googleapis.com/upload/drive/v3/files",toBeDeleted:null,delete_file_dialog:!1,project_folders:[]}},mounted:function(){var e=this;this.$event.$emit("path-change",this.paths),this.getGoogleDriveFolders(this.projectId,(function(){e.$gapi.isSignedIn().then((function(t){e.isGoogleAuthorized=t,t&&(e.getRootFiles(),e.$gapi.currentUser().then((function(t){e.googleUser=t})))})).finally((function(){e.loading=!1}))}))},computed:{accessToken:function(){return this.isGoogleAuthorized?window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token:null},activeFolderId:function(){var e=this.breadcrumbs[this.breadcrumbs.length-1];return"root"===e.folder?"root":e.folder.id},activeFolder:function(){var e=this.breadcrumbs[this.breadcrumbs.length-1];return"root"===e.folder?"Root Folder":e.folder.name},user:function(){return this.$store.getters.user},can_manage_folders:function(){return!!(this.user.is_admin||this.user.is_client||this.user.is_manager)},type:function(){return this.$route.params.type||"project"},paths:function(){return[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:this.type,disabled:!1,route:{path:"/dashboard/".concat(this.type,"/preview/").concat(this.projectId)}},{text:"Google Drive",disabled:!0,route:null}]}},methods:{saveFolders:function(e){var t=this,i={folders:e.folders};v["a"].post("api/projects/".concat(this.projectId,"/folder/google-drive"),i).then((function(e){e.data;t.$refs.gdrive_dialog.closeAndClearDialog()})).finally((function(){t.$router.go(),t.loading=!1}))},getGoogleDriveFolders:function(e,t){var i=this;v["a"].get("api/projects/".concat(e,"/folder/google-drive")).then((function(e){var o=e.data;i.project_folders=o,"function"===typeof t&&t()}))},deleteGoogleDriveFolders:function(e){var t=this;v["a"].delete("api/projects/".concat(this.projectId,"/folder/google-drive/").concat(e)).then((function(i){var o=t.project_folders.findIndex((function(t){return t.id===e}));~o&&t.project_folders.splice(o,1)})).finally((function(){t.$router.go(),t.loading=!1}))},folderRemovedFromDB:function(e){var t=this.project_folders.findIndex((function(t){return t.id===e.id||t.hasOwnProperty("folder_id")&&t.folder_id===e.id}));~t&&this.project_folders.splice(t,1);var i=this.files.findIndex((function(t){return t.id===e.id}));~i&&this.files.splice(i,1)},is_folder:function(e){return e.mimeType.includes(".folder")},go_to_folder:function(e){if("root"===e)this.files=this.project_folders,this.breadcrumbs=[this.breadcrumbs[0]],this.breadcrumbs[0].disabled=!0;else{var t=this.breadcrumbs.findIndex((function(t){return t.folder.id===e.id}));~t&&(this.breadcrumbs=this.breadcrumbs.slice(0,t)),this.getFileForFolder(e)}},resetBreadcrumbs:function(){this.breadcrumbs=[this.breadcrumbs[0]],this.breadcrumbs[0].disabled=!1},addToBreadcrumbs:function(e){this.breadcrumbs[this.breadcrumbs.length-1].disabled=!1,this.breadcrumbs.push({text:e.name,disabled:!0,href:"",link:!1,folder:e})},getFile:function(e,t){this.$gapi.request({path:this.fileApi+"/"+e,method:"GET",params:{fields:"*"}}).catch((function(i){i.result.error.message.includes(e)?t(!1):t("error")})).then((function(e){e&&e.result&&!e.result.error&&t(e.result)}))},getFileForFolder:function(e){var t=this;this.loading=!0,this.addToBreadcrumbs(e);var i=this.fileApi+"?q="+encodeURIComponent("trashed = false and '"+e.id+"' in parents");this.$gapi.request({path:i,method:"GET",params:{fields:"*"}}).then((function(e){t.files=e.result.files,t.nextPageToken=e.result.nextPageToken})).finally((function(){t.loading=!1}))},getRootFiles:function(){var e=this;this.project_folders.length>0&&(this.loading=!0,this.project_folders.forEach((function(t,i){var o=t.hasOwnProperty("folder_id")?t.folder_id:t.id;e.getFile(o,(function(t){"error"===t||t&&(e.files.push(t),e.project_folders[i]=t)}))})))},load_more:function(){var e=this,t=this.fileApi+"?pageToken="+this.nextPageToken;this.$gapi.request({path:t,method:"GET",params:{fields:"*"}}).then((function(t){e.files=t.result.files,e.nextPageToken=t.result.nextPageToken})).finally((function(){e.loading=!1}))},searchDrive:function(){var e=this;if(""!==this.search.trim()){this.loading=!0;var t=this.fileApi+"?q="+encodeURIComponent("name contains '"+this.search+"' and trashed = false");this.$gapi.request({path:t,method:"GET",params:{fields:"*"}}).then((function(t){e.files=t.result.files,e.nextPageToken=t.result.nextPageToken})).finally((function(){e.loading=!1}))}},getImage:function(e){return e.mimeType.includes(".folder")?i("2a20"):e.hasThumbnail?e.thumbnailLink:e.iconLink},links:function(e){var t=Object.values(e);return t.map((function(e){return{text:e.split("=").pop(),link:e}}))},confirm_delete:function(e){this.toBeDeleted=e,this.delete_file_dialog=!0},handleDeletes:function(){var e=this;this.$gapi.request({path:this.fileApi+"/"+this.toBeDeleted.id,method:"DELETE"}).then((function(t){var i=e.files.findIndex((function(t){return t.id===e.toBeDeleted.id}));~i&&(e.files.splice(i,1),e.toBeDeleted=null)})).finally((function(){e.delete_file_dialog=!1}))},handleUploads:function(e){var t=this,i=0;e.forEach((function(e){t.sendRequestOld(e),i+=1})),setTimeout((function(){i>=e.length&&(t.$event.$emit("btnloading_off",!1),t.$event.$emit("file-upload-clear-all",!0),t.$event.$emit("open_snackbar","Files successfully uploaded!"))}))},openCreateFolderDialog:function(){this.$refs.folder_dialog.openDialog()},createFolder:function(e){var t=this,i={name:e.name,mimeType:"application/vnd.google-apps.folder"};this.activeFolderId&&"root"!==this.activeFolderId&&(i.parents=[this.activeFolderId]),this.$gapi.request({path:this.fileApi,method:"POST",params:{fields:"*"},headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){t.$refs.folder_dialog.closeAndClearDialog(),t.getFileForFolder(e.result)}))},sendRequestOld:function(e){var t=this,i=e.type||"application/octet-stream",o=new XMLHttpRequest;o.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable&fields=*",!0),o.setRequestHeader("Authorization","Bearer "+t.accessToken),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Upload-Content-Length",e.size),o.setRequestHeader("X-Upload-Content-Type",i),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){var n=o.getResponseHeader("Location"),a=new FileReader;a.onload=function(e){var o=new XMLHttpRequest;o.open("PUT",n,!0),o.setRequestHeader("Content-Type",i),o.setRequestHeader("X-Upload-Content-Type",i),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&200===o.status&&t.files.push(JSON.parse(o.response))},o.send(a.result)},a.readAsArrayBuffer(e)}};var n={name:e.name,mimeType:i,"Content-Type":i,"Content-Length":e.size};t.activeFolderId&&"root"!==t.activeFolderId&&(n.parents=[t.activeFolderId]),o.send(JSON.stringify(n))},openAddFolderDialog:function(){this.$refs.gdrive_dialog.openDialog()}}},he=ge,_e=(i("4ca9"),Object(I["a"])(he,X,Z,!1,null,null,null)),be=_e.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"files__tab"},[i("v-card",{staticClass:"dropbox-content",attrs:{outlined:""}},[i("v-card-title",{staticClass:"py-1"},[i("v-col",[i("h3",{staticClass:"page-title"},[i("v-icon",{attrs:{left:""}},[e._v("mdi-dropbox")]),e._v(" Dropbox")],1)]),i("v-spacer"),i("v-col",[i("v-text-field",{attrs:{solo:"",flat:"",outlined:"",dense:"","prepend-inner-icon":"search","hide-details":""}})],1)],1),i("v-card-text",[i("Empty",{attrs:{icon:"mdi-hammer-wrench",headline:"Under Construction!"}})],1)],1)],1)},we=[],Ae={name:"DropboxTab",props:{projectId:[Number,String]},computed:{type:function(){return this.$route.params.type||"project"},paths:function(){return[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:this.type,disabled:!1,route:{path:"/dashboard/".concat(this.type,"/preview/").concat(this.projectId)}},{text:"Dropbox",disabled:!0,route:null}]}},mounted:function(){this.$event.$emit("path-change",this.paths)}},xe=Ae,ke=(i("64b1"),Object(I["a"])(xe,ye,we,!1,null,null,null)),Ce=ke.exports,De={name:"FilesTab",mixins:[a["a"]],components:{BuzzookaTab:q,GoogleDriveTab:be,DropboxTab:Ce},props:{id:[Number,String]},data:function(){return{active_tab:"files",view:"files",tabs:[{name:"Files",view:"files",icon:"mdi-file"},{name:"Google Drive",view:"google-drive",icon:"mdi-google-drive"},{name:"Dropbox",view:"dropbox",icon:"mdi-dropbox"}]}},created:function(){var e=this;if(this.$route.params.view){this.view=this.$route.params.view;var t=this.tabs.findIndex((function(t){return t.view===e.view}));this.active_tab=~t?t:0}},methods:{changeTab:function(e){this.view=e,this.$router.push({name:"project-preview-files",params:{id:this.id,view:this.view}})}}},Fe=De,Ie=(i("08f5"),Object(I["a"])(Fe,o,n,!1,null,"7abb4575",null));t["default"]=Ie.exports}}]);
//# sourceMappingURL=chunk-549807d0.62cb9ff8.js.map