(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc36acce"],{"044c":function(t,e,n){"use strict";var i=n("414e"),a=n.n(i);a.a},"0edc5":function(t,e,n){},"13ea":function(t,e,n){var i=n("03dd"),a=n("42a2"),s=n("d370"),r=n("6747"),o=n("30c9"),l=n("0d24"),c=n("eac5"),d=n("73ac"),u="[object Map]",f="[object Set]",_=Object.prototype,v=_.hasOwnProperty;function p(t){if(null==t)return!0;if(o(t)&&(r(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||d(t)||s(t)))return!t.length;var e=a(t);if(e==u||e==f)return!t.size;if(c(t))return!i(t).length;for(var n in t)if(v.call(t,n))return!1;return!0}t.exports=p},"259d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breadcrumb-wrapper"},[n("v-breadcrumbs",{attrs:{items:t.paths},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return[n("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:i.disabled}},[n("span",{on:{click:function(e){return t.navigate_from_breadcrumb(i)}}},[t._v(" "+t._s(i.text)+" ")])])]}}])},[n("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")])],1),t._t("extra")],2)},a=[],s={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(t){if(t.hasOwnProperty("path"))t.path&&this.$router.push({path:t.path});else{var e=t.router_name;e&&this.$router.push({name:e})}}}},r=s,o=(n("5e17"),n("79a2"),n("2877")),l=Object(o["a"])(r,i,a,!1,null,"3cda09ee",null);e["a"]=l.exports},2693:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"users-table"},[n("table-header",{attrs:{paths:t.paths,noButton:""}}),n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Users and Roles")]),n("v-spacer"),n("v-btn",{attrs:{disabled:"",icon:""}},[n("v-icon",[t._v("mdi-settings")])],1)],1),n("v-divider",{staticClass:"pa-0 ma-0"}),t.loading?n("v-progress-linear",{attrs:{height:"5",indeterminate:""}}):t._e(),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{md:"3"}},[n("v-list",{attrs:{dense:""}},[n("v-select",{staticClass:"px-2",attrs:{value:t.filter,solo:"",dense:"",flat:"","item-text":"name","item-value":"slug",outlined:"",items:t.roles,label:"Filter Roles"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("v-divider",{staticClass:"pa-0 ma-0"}),t._l(t.filteredUsers,(function(e,i){return[n("v-list-item",{key:e.id,on:{click:function(n){return t.setActiveUser(e)}}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:e.image_url}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:t._s(e.fullname)}}),n("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.job_title)}})],1)],1)]}))],2)],1),n("v-divider",{attrs:{vertical:""}}),n("v-col",{staticClass:"pa-2"},[t.activeUser?n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("v-row",{staticClass:"mx-auto",attrs:{"no-gutters":""}},[n("v-spacer"),n("v-avatar",{staticClass:"mb-3",attrs:{size:"100"}},[n("v-img",{attrs:{src:t.activeUser.image_url}})],1),n("v-spacer"),n("v-col",{attrs:{md:"12"}}),n("v-col",{attrs:{md:"4"}},[t._v("Name :")]),n("v-col",{staticClass:"subtitle-1",attrs:{md:"8"}},[t._v(t._s(t.activeUser.fullname))]),n("v-col",{attrs:{md:"4"}},[t._v("Job Title :")]),n("v-col",{staticClass:"subtitle-1",attrs:{md:"8"}},[t._v(t._s(t.activeUser.job_title))]),n("v-col",{attrs:{md:"4"}},[t._v("Email :")]),n("v-col",{staticClass:"subtitle-1",attrs:{md:"8"}},[t._v(t._s(t.activeUser.email))]),n("v-col",{attrs:{md:"4"}},[t._v("Is company owner :")]),n("v-col",{staticClass:"subtitle-1",attrs:{md:"8"}},[t._v(t._s(t.activeUser.is_company_owner?"Yes":"No"))]),n("v-col",{attrs:{md:"4"}},[t._v("Contact Number :")]),n("v-col",{staticClass:"subtitle-1",attrs:{md:"8"}},[t._v(t._s(t.activeUser.telephone?t.activeUser.telephone.formatInternational:""))]),n("v-col",{attrs:{md:"4"}},[t._v("Roles :")]),n("v-col",{attrs:{md:"8"}},[t.can_update_user_roles?t._e():n("v-alert",{staticClass:"ma-0",attrs:{dense:"",outlined:"",type:"error"}},[t._v(" You dont have permission to update this user roles! ")]),n("v-autocomplete",{staticClass:"my-2",attrs:{disabled:!t.can_update_user_roles,"append-icon":"add",flat:"","item-text":"name",items:t.selectRoles,outlined:"","return-object":"",chips:"","small-chips":"",multiple:"",solo:""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{loading:t.btnloading,icon:"",large:""},on:{click:t.updateRoles}},i),[n("v-icon",[t._v("save")])],1)]}}],null,!1,2854580221)},[n("span",[t._v("Update Roles")])])]},proxy:!0}],null,!1,3739682995),model:{value:t.tobeAddedRoles,callback:function(e){t.tobeAddedRoles=e},expression:"tobeAddedRoles"}})],1),n("v-col",{staticClass:"mt-2",attrs:{md:"4"}},[t._v("Permissions")]),n("v-col",{staticClass:"mt-2",attrs:{md:"8"}},[n("v-divider"),n("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",[t._v("Create")]),n("th",[t._v("Delete")]),n("th",[t._v("Update")]),n("th",[t._v("View")])])]),n("tbody",t._l(t.permissions,(function(e,i){return n("tr",[n("td",[t._v(t._s(i))]),n("td",[e.create?n("v-icon",{attrs:{left:"",color:"success"}},[t._v("mdi-check-circle")]):n("v-icon",{attrs:{left:"",color:"red"}},[t._v("mdi-close-circle")])],1),n("td",[e.delete?n("v-icon",{attrs:{left:"",color:"success"}},[t._v("mdi-check-circle")]):n("v-icon",{attrs:{left:"",color:"red"}},[t._v("mdi-close-circle")])],1),n("td",[e.update?n("v-icon",{attrs:{left:"",color:"success"}},[t._v("mdi-check-circle")]):n("v-icon",{attrs:{left:"",color:"red"}},[t._v("mdi-close-circle")])],1),n("td",[e.view?n("v-icon",{attrs:{left:"",color:"success"}},[t._v("mdi-check-circle")]):n("v-icon",{attrs:{left:"",color:"red"}},[t._v("mdi-close-circle")])],1)])})),0)]},proxy:!0}],null,!1,346573560)}),n("v-divider")],1)],1)],1)],1):t._e()],1)],1)],1)],1)},a=[],s=(n("20d6"),n("75fc")),r=(n("6762"),n("2fdb"),n("ac6a"),n("8615"),n("e06e")),o=(n("13ea"),n("1be9")),l=n("259d"),c=n("5b70"),d=n("29d6"),u={name:"UsersTable",mixins:[r["a"]],components:{Breadcrumb:l["a"],DeleteDialog:c["a"],TableHeader:d["a"]},data:function(){return{paths:[{text:"Settings",disabled:!1,router_name:"settings"},{text:"Users & Roles",disabled:!0,router_name:null}],roles:[{name:"All",slug:"all"}],permissions:null,activeUser:null,filter:"all",currentRoles:[],tobeAddedRoles:[],search:""}},mounted:function(){this.getUsers(),this.getGroups()},computed:{filteredUsers:function(){var t=this;return this.items.filter((function(e){if("all"===t.filter)return!0;var n=Object.values(e.user_roles);return n.includes(t.filter)}))},currentUserRoles:function(){var t=Object.values(this.activeUser.user_roles);return this.roles.filter((function(e){return t.includes(e.slug)||e.slug.includes(t)}))},selectRoles:function(){return this.roles.filter((function(t){return"all"!==t.slug}))},user:function(){return this.$store.getters.user},can_update_user_roles:function(){return!!this.user.is_company_owner||!this.activeUser.is_company_owner&&(!this.user.is_client&&(!(!this.user.is_admin&&!this.user.is_manager)&&((!this.user.is_admin||!this.activeUser.is_admin)&&((!this.user.is_manager||!this.activeUser.is_manager)&&(!(!this.activeUser.is_manager||!this.user.is_admin)||(!this.activeUser.is_admin||!this.user.is_manager))))))}},methods:{filterSearch:function(){return this.filteredUsers=[]},getUsers:function(){this.fill_table_via_url("api/company/teams?basics=true&per_page=50")},getGroups:function(){var t=this;o["a"].get("api/groups?all=true").then((function(e){var n,i=e.data;(n=t.roles).push.apply(n,Object(s["a"])(i))}))},getUserPermissions:function(){var t=this;o["a"].get("api/permission/user/".concat(this.activeUser.id)).then((function(e){var n=e.data;t.permissions=n}))},setActiveUser:function(t){this.activeUser=t,this.tobeAddedRoles=t.roles,this.getUserPermissions()},updateRoles:function(){var t=this;if(0!==this.tobeAddedRoles.length){this.btnloading=!0;var e={user:this.activeUser.id,roles:this.tobeAddedRoles.map((function(t){return t.id}))};o["a"].post("api/groups/user/update-roles",e).then((function(e){var n=e.data;t.activeUser=n;var i=t.items.findIndex((function(t){return t.id===n.id}));~i&&(t.items[i]=n),t.$event.$emit("open_snackbar","User roles updated!")})).finally((function(){t.btnloading=!1}))}else this.$event.$emit("open_snackbar","User role cannot be empty!","error")}}},f=u,_=(n("044c"),n("2877")),v=Object(_["a"])(f,i,a,!1,null,"c14052b0",null);e["default"]=v.exports},"29d6":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"table-header",attrs:{wrap:""}},[n("breadcrumb",{attrs:{paths:t.paths}}),n("v-flex",[t.noButton?t._e():n("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click")}}},[n("v-icon",[t._v("add")])],1),t.noSortButton?t._e():n("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-sort-by")}}},[n("v-icon",[t._v("sort")])],1),t.noListButton?t._e():n("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-list-view")}}},[n("v-icon",[t._v("list")])],1),t.noGridButton?t._e():n("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(e){return t.$emit("click-grid-view")}}},[n("v-icon",[t._v("mdi-view-dashboard")])],1),t._t("form-btn")],2)],1)},a=[],s=n("259d"),r={name:"TableHeader",props:{paths:{type:Array,default:[]},noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:s["a"]}},o=r,l=(n("337a"),n("2877")),c=Object(l["a"])(o,i,a,!1,null,"b8bfd1cc",null);e["a"]=c.exports},"2f21":function(t,e,n){"use strict";var i=n("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"337a":function(t,e,n){"use strict";var i=n("9e25"),a=n.n(i);a.a},"386d":function(t,e,n){"use strict";var i=n("cb7c"),a=n("83a1"),s=n("5f1b");n("214f")("search",1,(function(t,e,n,r){return[function(n){var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=r(n,t,this);if(e.done)return e.value;var o=i(t),l=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var d=s(o,l);return a(o.lastIndex,c)||(o.lastIndex=c),null===d?-1:d.index}]}))},"408c":function(t,e,n){var i=n("2b3e"),a=function(){return i.Date.now()};t.exports=a},"414e":function(t,e,n){},"43d6":function(t,e,n){},"55dd":function(t,e,n){"use strict";var i=n("5ca1"),a=n("d8e8"),s=n("4bf8"),r=n("79e5"),o=[].sort,l=[1,2,3];i(i.P+i.F*(r((function(){l.sort(void 0)}))||!r((function(){l.sort(null)}))||!n("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(s(this)):o.call(s(this),a(t))}})},"57e5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":t.maxWidth},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?n("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):n("v-card",{staticClass:"custom__dialog",attrs:{tile:""}},[n("v-card-title",{staticClass:"dialog__header"},[t._t("entire-header",[t._t("title",[n("span",{staticClass:"dialog__title"},[t._v(t._s(t.title))])]),t._t("cancel-icon",[n("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:"",depressed:""},on:{click:t.close_dialog}},[n("v-icon",[t._v("close")])],1)])])],2),n("v-card-text",{staticClass:"dialog__body"},[t._t("content",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2),n("v-card-actions",{staticClass:"dialog__actions"},[t._t("entire-actions",[t._t("extras"),t._t("button1",[n("v-btn",{attrs:{disabled:t.btnloading},on:{click:t.button1clicked}},[t._v(t._s(t.button1Text))])]),t._t("button2",[n("v-btn",{attrs:{loading:t.btnloading,disabled:t.mainBtnDisabled},on:{click:t.button2clicked}},[t._v(t._s(t.button2Text))])])])],2)],1)],1)],1)},a=[],s=(n("c5f6"),{props:{title:{type:String,default:"Default Modal Title"},content:{type:String,default:"Default Modal Text Content"},button1Text:{type:String,default:"Cancel"},button2Text:{type:String,default:"Delete"},open:Boolean,value:Boolean,mainBtnDisabled:{type:Boolean,default:!1},maxWidth:{type:[Number,String],default:"600px"}},data:function(){return{dialog:!1,loading:!1,btnloading:!1}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){t.btnloading=!1}))},watch:{value:{handler:function(t){this.dialog=t},immediate:!0},open:function(t){this.dialog=t,this.btnloading=!1},dialog:function(t){this.$emit("update:open",t),this.$emit("input",t)}},methods:{button1clicked:function(){this.$emit("button1"),this.close_dialog()},button2clicked:function(){this.btnloading=!0,this.$emit("button2")},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1,this.btnloading=!1},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.close_dialog()},activate_loading:function(){this.loading=!0},disable_loading:function(){this.loading=!1}}}),r=s,o=(n("731a"),n("dd8e"),n("2877")),l=Object(o["a"])(r,i,a,!1,null,"37eed48a",null);e["a"]=l.exports},"5b70":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("custom-dialog",{attrs:{title:t.title,content:t.textContent,"button1-text":t.cancelButtonText,"button2-text":t.deleteButtonText,open:t.open},on:{"update:open":function(e){t.open=e},button1:t.cancel_clicked,button2:t.delete_clicked},scopedSlots:t._u([{key:"content",fn:function(){return[n("v-alert",{staticClass:"my-4",attrs:{outlined:"",type:"warning",prominent:""}},[n("v-row",{attrs:{align:"center"}},[n("v-col",{staticClass:"grow",domProps:{innerHTML:t._s(t.textContent)}})],1)],1)]},proxy:!0}])})],1)},a=[],s=n("57e5"),r={components:{CustomDialog:s["a"]},props:{title:{type:String,default:"Default Modal Title"},textContent:{type:String,default:"Default Modal Text Content"},cancelButtonText:{type:String,default:"Cancel"},deleteButtonText:{type:String,default:"Yes, Delete"},openDialog:Boolean},data:function(){return{open:!1}},watch:{openDialog:function(t){this.open=t},open:function(t){this.$emit("update:openDialog",t)}},methods:{cancel_clicked:function(){this.open=!1},delete_clicked:function(){this.$emit("delete")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},o=r,l=n("2877"),c=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=c.exports},"5e17":function(t,e,n){"use strict";var i=n("8c6e"),a=n.n(i);a.a},"731a":function(t,e,n){"use strict";var i=n("9dcc"),a=n.n(i);a.a},"79a2":function(t,e,n){"use strict";var i=n("0edc5"),a=n.n(i);a.a},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8c6e":function(t,e,n){},"9dcc":function(t,e,n){},"9e25":function(t,e,n){},b047c:function(t,e,n){var i=n("1a8c"),a=n("408c"),s=n("b4b0"),r="Expected a function",o=Math.max,l=Math.min;function c(t,e,n){var c,d,u,f,_,v,p=0,m=!1,h=!1,g=!0;if("function"!=typeof t)throw new TypeError(r);function b(e){var n=c,i=d;return c=d=void 0,p=e,f=t.apply(i,n),f}function y(t){return p=t,_=setTimeout(k,e),m?b(t):f}function x(t){var n=t-v,i=t-p,a=e-n;return h?l(a,u-i):a}function $(t){var n=t-v,i=t-p;return void 0===v||n>=e||n<0||h&&i>=u}function k(){var t=a();if($(t))return w(t);_=setTimeout(k,x(t))}function w(t){return _=void 0,g&&c?b(t):(c=d=void 0,f)}function C(){void 0!==_&&clearTimeout(_),p=0,c=v=d=_=void 0}function U(){return void 0===_?f:w(a())}function B(){var t=a(),n=$(t);if(c=arguments,d=this,v=t,n){if(void 0===_)return y(v);if(h)return clearTimeout(_),_=setTimeout(k,e),b(v)}return void 0===_&&(_=setTimeout(k,e)),f}return e=s(e)||0,i(n)&&(m=!!n.leading,h="maxWait"in n,u=h?o(s(n.maxWait)||0,e):u,g="trailing"in n?!!n.trailing:g),B.cancel=C,B.flush=U,B}t.exports=c},b4b0:function(t,e,n){var i=n("1a8c"),a=n("ffd6"),s=NaN,r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function u(t){if("number"==typeof t)return t;if(a(t))return s;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=l.test(t);return n||c.test(t)?d(t.slice(2),n?2:8):o.test(t)?s:+t}t.exports=u},dd8e:function(t,e,n){"use strict";var i=n("43d6"),a=n.n(i);a.a},e06e:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("386d"),n("a481"),n("c5f6"),n("28a5"),n("55dd"),n("20d6"),n("6762"),n("ac6a");var i=n("b047c"),a=n.n(i),s=n("d4e9"),r=n("1be9"),o={methods:{resetPagination:function(){this.pagination.current=1,this.pagination.total=0,this.noMoreData=!1},clear_selected:function(){this.selected=[],this.$event.$emit("clear_selected",[]),this.$event.$emit("btnloading_off",!1)},add_item:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s["a"][t](e,i).then((function(t){var e=t.data;Array.isArray(e)?e.reverse().forEach((function(t){return n.items.push(t)})):n.items.push(e),n.clear_selected(),n.$refs.add_dialog.clear_and_close(),n.$event.$emit("open_snackbar",n.table_config.add_message)})).finally((function(){return n.$event.$emit("btnloading_off",!1)}))},extract_per_page:function(t){var e=t.search("per_page");return t.substring(e+9,e+10)},calc_per_page_items:function(t,e){var n=[5,10,15,20,25];return n.includes(t)||n.push(t),!n.includes(e)&&e<=25&&n.push(e),n},update_item:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s["a"][t](this.edit_item.id,e,i).then((function(t){var e=n.items.findIndex((function(e){return e.id===t.data.id}));~e&&n.items.splice(e,1,t.data),n.edit_item={id:null,fields:null},n.edit_dialog=!1,n.clear_selected(),n.$event.$emit("open_snackbar",n.table_config.update_message)})).finally((function(){return n.$event.$emit("btnloading_off",!1)}))},delete_item:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s["a"][t](this.delete_item_id,n).then((function(){var t=e.items.findIndex((function(t){return t.id===e.delete_item_id}));~t&&e.items.splice(t,1),e.delete_item_id=null,e.delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",e.table_config.delete_message)})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},bulk_delete:function(t){var e=this,n={ids:this.selected.map((function(t){return t.id}))};s["a"][t]({data:n}).then((function(t){var n=t.data;e.selected.forEach((function(t){var n=e.items.findIndex((function(e){return e.id===t.id}));~n&&e.items.splice(n,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",n.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},bulk_delete_via_url:function(t){var e=this,n={ids:this.selected.map((function(t){return t.id}))};r["a"].delete(t,{data:n}).then((function(t){var n=t.data;e.selected.forEach((function(t){var n=e.items.findIndex((function(e){return e.id===t.id}));~n&&e.items.splice(n,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",n.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},open_edit_dialog:function(t){this.edit_dialog=!0,this.$set(this.edit_item,"id",t.id),this.$set(this.edit_item,"fields",t)},open_delete_dialog:function(t){this.delete_dialog=!0,this.delete_item_id=t.id},open_bulk_delete_dialog:function(t){this.bulk_delete_dialog=!0,this.selected=t},fill_table:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0,s["a"][t](i).then((function(t){e.items_response=t.data,n?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},fill_table_via_url:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.loading=!0;var a={page:this.pagination.current};r["a"].get(t,{params:a}).then((function(t){e.items_response=t.data,n?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data,"function"===typeof i&&i(t)})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},load_more_on_table:function(t){var e=this;this.loading=!0;var n={page:this.pagination.current+1};s["a"][t]({params:n}).then((function(t){var n=t.data;e.items_response=n.data,n.data.forEach((function(t){e.items.push(t)})),e.pagination.current=n.current_page,e.pagination.total=n.last_page,e.hasMoreData()})).finally((function(){e.clear_selected(),e.loading=!1,e.scrollToBottom(),e.$event.$emit("btnloading_off",!1)}))},load_more_via_url:function(t){var e=this;this.loading=!0;var n={page:this.pagination.current+1};r["a"].get(t,{params:n}).then((function(t){var n=t.data;e.items_response=n.data,n.data.forEach((function(t){e.items.push(t)})),e.pagination.current=n.current_page,e.pagination.total=n.last_page,e.hasMoreData()})).finally((function(){e.clear_selected(),e.loading=!1,e.scrollToBottom(),e.$event.$emit("btnloading_off",!1)}))},fill_table_with_data:function(t){this.items=t},add_table_rows:function(t,e){this.items=t,this.items_response=e},changeSort:function(t){this.sort.sortBy===t?this.sort.descending=!this.sort.descending:(this.sort.sortBy=t,this.sort.descending=!1)},refresh_table:function(t){var e=this;s["a"][this.table_config.refresh_table_api_name](t).then((function(t){e.$event.$emit("open_snackbar",e.table_config.refresh_table_message),e.loading=!1,e.clear_selected(),e.items_response=t.data,e.items=t.data.data})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},update_table_actions:function(t){if(t.page&&(this.page=Number(t.page)),t.per_page&&(this.rows_per_page=Number(t.per_page)),t.search&&(this.search=t.search),t.sort){var e=t.sort.split("|");this.sort.sortBy=e[0],"asc"===e[1]?this.sort.descending=!1:"desc"===e[1]&&(this.sort.descending=!0)}},hasMoreData:function(){this.componentKey+=1,this.pagination.current>=this.pagination.total&&(this.noMoreData=!0)},toggleAll:function(){this.selected.length?this.clear_selected():this.selected=this.items.slice()},setPreferredView:function(t){window.localStorage.setItem("bzk_prefer_view",t),this.view=t},getPreferredView:function(){return window.localStorage.getItem("bzk_prefer_view")||"list"},scrollToBottom:function(){setTimeout((function(){var t=document.getElementsByClassName("v-data-table__wrapper")[0];t&&(t.scrollTop=t.scrollHeight)}),1)},debounce:a()((function(t){this.search=t}),500)}},l={mixins:[o],data:function(){return{edit_dialog:!1,add_dialog:!1,delete_dialog:!1,permissionDialog:!1,bulk_delete_dialog:!1,loading:!1,items:[],items_response:null,edit_item:{id:null,fields:null},delete_item_id:null,show_delete_selected:!1,selected_ids:[],selected:[],rows_per_page:null,page:1,sort:{sortBy:null,descending:!1},search:"",pagination:{current:1,total:0},noMoreData:!1,componentKey:1,view:"list",btnloading:!1}},watch:{selected_ids:function(t){t.length>0?this.show_delete_selected=!0:this.show_delete_selected=!1},api_query:function(t,e){var n=Number(this.extract_per_page(t)),i=Number(this.extract_per_page(e))||null;this.items_response&&this.rows_per_page===this.items.length&&n!==i||(this.$router.replace({name:this.table_config.route_name,query:{page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting}}),this.loading=!0,this.refresh_table(t))}}}}}]);
//# sourceMappingURL=chunk-bc36acce.7a0f7b7c.js.map