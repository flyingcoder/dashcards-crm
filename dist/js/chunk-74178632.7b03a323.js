(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74178632"],{1050:function(t,e,i){},"13ea":function(t,e,i){var n=i("03dd"),a=i("42a2"),r=i("d370"),o=i("6747"),s=i("30c9"),l=i("0d24"),c=i("eac5"),u=i("73ac"),d="[object Map]",m="[object Set]",_=Object.prototype,f=_.hasOwnProperty;function v(t){if(null==t)return!0;if(s(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||r(t)))return!t.length;var e=a(t);if(e==d||e==m)return!t.size;if(c(t))return!n(t).length;for(var i in t)if(f.call(t,i))return!1;return!0}t.exports=v},"174f":function(t,e,i){},"29d6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table-header"},[t.noButton?t._e():i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click")}}},"v-icon",a,!1),n),[t._v(" mdi-plus-circle-outline ")])]}}],null,!1,1461341858)},[i("span",[t._v("Create new")])]),t.noSortButton?t._e():i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-sort-by")}}},"v-icon",a,!1),n),[t._v("sort")])]}}],null,!1,1131913180)},[i("span",[t._v("Sort")])]),t.noListButton?t._e():i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-list-view")}}},"v-icon",a,!1),n),[t._v(" mdi-view-sequential ")])]}}],null,!1,3485260972)},[i("span",[t._v("List view")])]),t.noGridButton?t._e():i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(e){return t.$emit("click-grid-view")}}},"v-icon",a,!1),n),[t._v(" mdi-view-module ")])]}}],null,!1,1778849189)},[i("span",[t._v("Grid view")])]),t._t("form-btn")],2)},a=[],r={name:"TableHeader",props:{noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}}},o=r,s=(i("41d8"),i("2877")),l=Object(s["a"])(o,n,a,!1,null,"e62af32a",null);e["a"]=l.exports},"41d8":function(t,e,i){"use strict";var n=i("bd74"),a=i.n(n);a.a},"48f6":function(t,e,i){},"50f2":function(t,e,i){"use strict";var n=i("c3cb"),a=i.n(n);a.a},7653:function(t,e,i){"use strict";var n=i("48f6"),a=i.n(n);a.a},"7e7e":function(t,e,i){"use strict";var n=i("174f"),a=i.n(n);a.a},b5d8:function(t,e,i){"use strict";var n=i("1050"),a=i.n(n);a.a},bd74:function(t,e,i){},c3cb:function(t,e,i){},c97a:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g(t._b({attrs:{slot:"activator",value:t.value,solo:"","hide-details":"",color:"#657186",readonly:"",width:t.minWidth},slot:"activator"},"v-text-field",t.$attrs,!1),n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{clearable:"",color:"#657186",max:t.max,min:t.min,"no-title":"",scrollable:""},on:{"click:date":t.dateClick},model:{value:t.picker_date,callback:function(e){t.picker_date=e},expression:"picker_date"}},[i("v-spacer"),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.cancel}},[t._v("Cancel")]):t._e(),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.save}},[t._v("OK")]):t._e(),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.clear}},[t._v("Clear")]):t._e()],1)],1)},a=[],r={name:"DatePicker",inheritAttrs:!1,props:{value:{type:String,default:null},min:{type:String,default:null},max:{type:String,default:null},minWidth:{type:String,default:"290px"},hasButtons:{type:Boolean,default:!0}},data:function(){return{menu:!1,picker_date:null}},watch:{value:function(t){this.picker_date=t}},methods:{save:function(){this.$emit("input",this.picker_date),this.cancel()},cancel:function(){this.menu=!1},clear:function(){this.picker_date=null},dateClick:function(){this.hasButtons||this.save()}}},o=r,s=(i("7653"),i("2877")),l=Object(s["a"])(o,n,a,!1,null,"29eaae64",null);e["a"]=l.exports},ee09:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[t.hasEdit?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_edit,expression:"can_edit"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("edit")}}},n),[i("v-icon",[t._v(t._s(t.editIcon))])],1)]}}],null,!1,4170341451)},[i("span",[t._v("Edit")])]):t._e(),t.hasDelete?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_delete,expression:"can_delete"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("delete")}}},n),[i("v-icon",[t._v(t._s(t.deleteIcon))])],1)]}}],null,!1,4164065227)},[i("span",[t._v("Delete")])]):t._e(),t.hasView?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_view,expression:"can_view"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("view")}}},n),[i("v-icon",[t._v(t._s(t.viewIcon))])],1)]}}],null,!1,701816587)},[i("span",[t._v("View")])]):t._e(),t._t("extra")],2)},a=[],r={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-circle-edit-outline"},viewIcon:{type:String,default:"mdi-eye-circle-outline"},deleteIcon:{type:String,default:"mdi-delete-circle-outline"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(t){this.item&&this.$emit(t,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},o=r,s=(i("7e7e"),i("2877")),l=Object(s["a"])(o,n,a,!1,null,null,null);e["a"]=l.exports},f6b9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timer"},[i("div",{staticClass:"timer-actions text-right mb-4"},[i("v-btn",{staticClass:"mr-1",attrs:{fab:"",small:"",dark:"",color:"#3b589e"}},[i("v-icon",[t._v("mdi-dots-horizontal")])],1),i("v-btn",{staticClass:"mr-1",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:t.minimize}},[i("v-icon",[t._v("close")])],1)],1),i("VueTable",{key:t.componentKey,attrs:{items:t.items,headers:t.headers,showRowActions:!0,loading:t.loading,title:"Global Timers",noMoreData:t.noMoreData,showSelect:!1},on:{"load-more":t.load_more},scopedSlots:t._u([{key:"header-toolbar",fn:function(){return[i("v-col",[i("date-picker",{staticClass:"dialog__date d-field text-center mr-1",attrs:{hasButtons:!1,flat:"",label:"Start Date","prepend-inner-icon":"event",readonly:"",max:t.today},on:{input:t.handleChangeDate},model:{value:t.filter_date,callback:function(e){t.filter_date=e},expression:"filter_date"}})],1),i("v-btn-toggle",{staticClass:"tab-buttons",attrs:{mandatory:"",value:t.timer_tab},on:{change:t.handleChangeTab},model:{value:t.timer_tab,callback:function(e){t.timer_tab=e},expression:"timer_tab"}},[i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"task-timers"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-folder-clock-outline")]),t._v(" Task Timers ")],1),i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"global-timers"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-account-clock")]),t._v(" Global Timers ")],1),i("v-btn",{staticClass:"px-5",attrs:{text:"",value:"alarm"}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-clock-digital")]),t._v(" Alarms ")],1)],1)]},proxy:!0},{key:"row-slot",fn:function(e){var n=e.item;return[i("td",[i("Avatar",{attrs:{user:n}})],1),i("td",[t._v(t._s(t._f("ucwords")(n.job_title)))]),i("td",[t._v(t._s(t._f("format")(n.timer.timer_created,"MMM DD YYYY HH:mm:ss")))]),i("td",[t._v(t._s(t.timerEnd(n)))]),i("td",[i("PlayStop",{attrs:{item:n,forDate:t.dateSelected},on:{"row-item-updated":function(t){n=t}}})],1)]}}])})],1)},a=[],r=i("e06e"),o=(i("13ea"),i("c1df")),s=i.n(o),l=i("0ebe"),c=i("ee09"),u=i("29d6"),d=i("c97a"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{staticClass:"timer my-0 py-0"},[i("v-col",{staticClass:"time",class:t.timer_started?"success--text":""},[t._v(t._s(t.display))]),i("v-spacer"),i("v-col",{staticClass:"time-control"},[t.is_ongoing_previous_date?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-icon",t._g({attrs:{color:"success"}},n),[t._v("mdi-clock-end")])]}}],null,!1,1263714609)},[i("span",[t._v("Timer is ongoing since "+t._s(t.last_date_action))])]):!t.timer_started&&t.can_start_timer?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:function(e){return t.timer_action("start")}}},n),[i("v-icon",[t._v("play_arrow")])],1)]}}])},[i("span",[t._v("Start Timer")])]):t.timer_started&&t.can_stop_timer?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:function(e){return t.timer_action("stop")}}},n),[i("v-icon",[t._v("stop")])],1)]}}])},[i("span",[t._v("Stop Timer")])]):t.is_lapsed?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-icon",t._g({attrs:{color:"grey"}},n),[t._v("mdi-lock-clock")])]}}])},[i("span",[t._v("Timer unavailable")])]):t._e()],1)],1)},_=[],f=(i("6b54"),i("1be9"),i("d4e9")),v={name:"PlayStop",inheritAttrs:!1,props:{item:Object,forDate:{type:String,default:s()().format("YYYY-MM-DD")}},data:function(){return{timer_started:!1,init_time:"00:00:00",interval:null,btnloading:!1}},computed:{display:{get:function(){return this.init_time},set:function(t){this.init_time=t}},owner:function(){return this.item},is_own_timer:function(){return this.item.id===this.viewer.id},viewer:function(){return this.$store.getters.user},can_start_timer:function(){return this.owner.id===this.viewer.id},can_stop_timer:function(){return this.owner.id===this.viewer.id},selectedDate:function(){return s()(this.forDate).format("YYYY-MM-DD")},now:function(){return s()().format("YYYY-MM-DD")},is_lapsed:function(){if(!this.item.timer.timer_stopped)return!1;var t=s()(this.item.timer.timer_stopped);return t.format("YYYY-MM-DD")!=s()(this.forDate).tz("America/Toronto").format("YYYY-MM-DD")},is_ongoing_previous_date:function(){return!!this.item.timer.latest_timer&&("start"===this.item.timer.latest_timer.action&&0===this.item.timer.total_seconds&&""===this.item.timer.timer_status)},last_date_action:function(){return s()(this.item.timer.latest_timer.created_at).format("MMMM D YYYY")},is_playable:function(){return!this.is_ongoing_previous_date&&!this.is_lapsed&&this.can_start_timer}},mounted:function(){this.is_open()?(this.setGlobalTimerRunning(),this.timer_started=!0):this.display=this.item.timer.format},methods:{is_open:function(){return"open"===this.item.timer.timer_status},setGlobalTimerRunning:function(){var t=this;this.interval=setInterval((function(){var e=t.item.timer.hrs,i=t.item.timer.min,n=t.item.timer.sec;n>=59&&i>=59?(e++,i=n="00"):n>=59?(i++,n="00"):n++,t.item.timer.hrs=e,t.item.timer.min=i,t.item.timer.sec=n,t.display=t.set_time_running(e,i,n)}),1e3)},set_time_running:function(t,e,i){return 1===t.toString().length&&(t="0"+t),1===e.toString().length&&(e="0"+e),1===i.toString().length&&(i="0"+i),"".concat(t,":").concat(e,":").concat(i)},timer_action:function(t){var e=this;this.btnloading=!0,f["a"].change_timer(t).then((function(){var i="start"===t?"started":"stopped";"start"===t?(e.setGlobalTimerRunning(),e.timer_started=!0,e.item.timer.timer_status="open",e.item.timer.timer_created||(e.item.timer.timer_created=s()().format("YYYY-MM-DD HH:mm:ss"))):(clearInterval(e.interval),e.item.timer.timer_status="close",e.timer_started=!1,e.item.timer.timer_stopped=s()().format("YYYY-MM-DD HH:mm:ss")),e.$emit("row-item-updated",e.item),e.is_own_timer&&e.$event.$emit("self-global-timer-updated"),e.$event.$emit("open_snackbar","Timer ".concat(i),"notification")})).finally((function(){e.btnloading=!1}))}}},p=v,h=(i("50f2"),i("2877")),b=Object(h["a"])(p,m,_,!1,null,"6516783e",null),g=b.exports,k={name:"GlobalTimer",mixins:[r["a"]],components:{VueTable:l["a"],Actions:c["a"],TableHeader:u["a"],DatePicker:d["a"],PlayStop:g},data:function(){return{paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Timer",disabled:!0,router_name:null},{text:"Global",disabled:!0,router_name:null}],sortList:[{title:"Sort by Client"},{title:"Sort by Task"},{title:"Sort by Services"},{title:"Sort by Time"},{title:"Sort by Date"}],headers:[{text:"Member",sortable:!0,align:"left"},{text:"Position",sortable:!0,align:"left"},{text:"Time Start",sortable:!0,align:"left"},{text:"Time End",value:"time_end",sortable:!0,align:"left"},{text:"Total Time",sortable:!0,align:"center"}],timer_tab:"global-timers",currentTab:"global-timers",filter_date:s()().tz("America/Toronto").format("YYYY-MM-DD"),today:s()().tz("America/Toronto").format("YYYY-MM-DD")}},mounted:function(){this.$event.$emit("path-change",this.paths),this.fill_table_via_url(this.api)},computed:{loggeduser:function(){return this.$store.getters.user},dateSelected:function(){return s()(this.filter_date).format("YYYY-MM-DD")},api:function(){return"api/timer/global?all=true&date=".concat(this.dateSelected)}},methods:{load_more:function(){this.load_more_via_url(this.api)},can_run_timer:function(t){return!!this.loggeduser.is_admin||t.id===this.loggeduser.id},handleChangeTab:function(t){"task-timers"===this.timer_tab&&this.$router.push({name:"taskTimer"}),"alarm"===this.timer_tab&&this.$router.push({name:"alarm"})},handleChangeDate:function(t){var e=this;this.resetPagination(),setTimeout((function(){e.fill_table_via_url(e.api)}),1)},timerEnd:function(t){return"open"===t.timer.timer_status?"Ongoing":"close"===t.timer.timer_status?s()(t.timer.timer_stopped).format("MMM D YYYY HH:mm:ss"):"-"},handleItemUpdated:function(t){},minimize:function(){this.$router.push({name:"default-content"})}}},y=k,w=(i("b5d8"),Object(h["a"])(y,n,a,!1,null,"2490d172",null));e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-74178632.7b03a323.js.map