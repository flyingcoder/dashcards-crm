(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30a019ae"],{"0745":function(e,t,i){},"0edc5":function(e,t,i){},"0f80":function(e,t,i){},1326:function(e,t,i){"use strict";var o=i("0745"),a=i.n(o);a.a},"13ea":function(e,t,i){var o=i("03dd"),a=i("42a2"),n=i("d370"),s=i("6747"),r=i("30c9"),l=i("0d24"),d=i("eac5"),u=i("73ac"),c="[object Map]",_="[object Set]",p=Object.prototype,f=p.hasOwnProperty;function g(e){if(null==e)return!0;if(r(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||n(e)))return!e.length;var t=a(e);if(t==c||t==_)return!e.size;if(d(e))return!o(e).length;for(var i in e)if(f.call(e,i))return!1;return!0}e.exports=g},"259d":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:e.paths},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:o.disabled}},[i("span",{on:{click:function(t){return e.navigate_from_breadcrumb(o)}}},[e._v(" "+e._s(o.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("chevron_right")])],1),e._t("extra")],2)},a=[],n={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(e){if(e.hasOwnProperty("path"))e.path&&this.$router.push({path:e.path});else{var t=e.router_name;t&&this.$router.push({name:t})}}}},s=n,r=(i("5e17"),i("79a2"),i("2877")),l=Object(r["a"])(s,o,a,!1,null,"3cda09ee",null);t["a"]=l.exports},"29d6":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{staticClass:"table-header",attrs:{wrap:""}},[i("breadcrumb",{attrs:{paths:e.paths}}),i("v-flex",[e.noButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click")}}},[i("v-icon",[e._v("add")])],1),e.noSortButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-sort-by")}}},[i("v-icon",[e._v("sort")])],1),e.noListButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-list-view")}}},[i("v-icon",[e._v("list")])],1),e.noGridButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-grid-view")}}},[i("v-icon",[e._v("mdi-view-dashboard")])],1),e._t("form-btn")],2)],1)},a=[],n=i("259d"),s={name:"TableHeader",props:{paths:{type:Array,default:[]},noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:n["a"]}},r=s,l=(i("337a"),i("2877")),d=Object(l["a"])(r,o,a,!1,null,"b8bfd1cc",null);t["a"]=d.exports},"337a":function(e,t,i){"use strict";var o=i("9e25"),a=i.n(o);a.a},"5e17":function(e,t,i){"use strict";var o=i("8c6e"),a=i.n(o);a.a},"79a2":function(e,t,i){"use strict";var o=i("0edc5"),a=i.n(o);a.a},"8c6e":function(e,t,i){},"9e25":function(e,t,i){},b7d7:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-dialog",{ref:"dialog",attrs:{title:e.title,open:e.open,"button2-text":"Save"},on:{"update:open":function(t){e.open=t},button1:e.cancel,button2:e.save},scopedSlots:e._u([{key:"content",fn:function(){return[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{box:"",solo:"","hide-details":"",color:"#657186",label:"Name"},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1),i("v-flex",{attrs:{xs12:""}},[i("v-select",{staticClass:"dialog__selectfield d-field",attrs:{box:"",solo:"","hide-details":"",color:"#657186",label:"Copy Permission",items:e.group_items,"item-text":"name","item-value":"id"},model:{value:e.selected_group,callback:function(t){e.selected_group="string"===typeof t?t.trim():t},expression:"selected_group"}})],1),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{staticClass:"dialog__textarea d-field",attrs:{box:"",solo:"","hide-details":"",color:"#657186",label:"Description"},model:{value:e.description,callback:function(t){e.description="string"===typeof t?t.trim():t},expression:"description"}})],1)],1)]},proxy:!0}])})},a=[],n=(i("7f7f"),i("0644")),s=i.n(n),r=i("1be9"),l=i("57e5"),d={name:"GroupsDialog",components:{CustomDialog:l["a"]},props:{dialog:Boolean,title:String,isEditDialog:{type:Boolean,default:!1},fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,name:"",description:"",selected_group:null,group_items:[]}},computed:{are_fields_valid:function(){return!(!this.name||!this.selected_group)&&this.does_something_changed},does_something_changed:function(){return!this.isEditDialog||(this.name!==this.fieldsToEdit.fields.name||this.description!==this.fieldsToEdit.fields.description||this.selected_group!==this.fieldsToEdit.fields.selected_group)}},watch:{dialog:function(e){e&&this.get_current_group(),this.open=e},open:function(e){this.$emit("update:dialog",e)},fieldsToEdit:{handler:function(e){this.isEditDialog&&this.update_fields(e)},deep:!0}},methods:{cancel:function(){this.open=!1},openDialog:function(){this.get_current_group(),this.open=!0},get_current_group:function(){var e=this;r["a"].get("api/groups?all=true").then((function(t){var i=t.data;return e.group_items=i}))},save:function(){if(this.validation_passed()){var e={name:this.name,description:this.description,selected_group:this.selected_group};this.$emit("save",e)}},validation_passed:function(){return!!(this.name&&this.selected_group&&this.does_something_changed)||(this.$event.$emit("open_snackbar","Fill in required fields!","error"),this.$event.$emit("btnloading_off",!1),!1)},update_fields:function(e){var t=e.fields,i=s()(t);this.name=i.name,this.description=i.description,this.selected_group=i.selected_group},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},u=d,c=(i("1326"),i("2877")),_=Object(c["a"])(u,o,a,!1,null,"021b8c67",null);t["a"]=_.exports},f1d4:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"teams-page"},[i("table-header",{attrs:{paths:e.paths,noListButton:!1,noGridButton:!1},on:{click:function(t){e.add_dialog=!0},"click-list-view":function(t){return e.setPreferredView("list")},"click-grid-view":function(t){return e.setPreferredView("grid")}}}),"grid"===e.view?i("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{indeterminate:!0}}):e._e(),i("teams-dialog",{ref:"add_dialog",attrs:{title:"Add New Member",dialog:e.add_dialog},on:{"update:dialog":function(t){e.add_dialog=t},save:function(t){return e.add_item("add_new_team",t)},"add-new-group":e.show_add_group_dialog,"close-dialog":function(t){e.add_dialog=!1}}}),i("teams-dialog",{ref:"edit_dialog",attrs:{title:"Edit Member",dialog:e.edit_dialog,"fields-to-edit":e.edit_item,"is-edit-dialog":e.edit_dialog},on:{"update:dialog":function(t){e.edit_dialog=t},save:function(t){return e.update_item("update_team",t)},"add-new-group":e.show_add_group_dialog,"close-dialog":function(t){e.edit_dialog=!1}}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Member","text-content":"Are you sure you want to delete this member?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_team",t)}}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Members","text-content":"Are you sure you want to delete these members? This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:function(t){return e.bulk_delete("bulk_delete_member")}}}),i("groups-dialog",{ref:"add_group_dialog",attrs:{title:"Add New Group"},on:{save:e.save_new_user_group}}),"list"===e.view?i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,loading:e.loading,icon:"widgets",title:"Members",noMoreData:e.noMoreData,showSelect:!0},on:{"load-more":e.load_more_users,"delete-selected":function(t){return e.open_bulk_delete_dialog(t)}},scopedSlots:e._u([{key:"row-slot",fn:function(t){var o=t.item;return[i("td",[i("Avatar",{attrs:{user:o}})],1),i("td",[e._v(e._s(o.job_title))]),i("td",[e._v(e._s(o.email))]),i("td",[e._v(e._s(o.tasks))]),i("td",[e._v(e._s(o.projects))]),i("Actions",{attrs:{item:o,permissions:e.$_permissions.get("hq_members"),hasEdit:e.can_edit(o),hasDelete:e.can_delete(o)},on:{delete:function(t){return e.open_delete_dialog(o)},edit:function(t){return e.open_edit_dialog(o)},view:function(t){return e.navigate_to_view_profile(o)}}})]}},{key:"empty-slot",fn:function(){return[i("v-btn",{attrs:{dark:"",color:"#3b589e"},on:{click:function(t){e.add_dialog=!0}}},[e._v("Add Member")])]},proxy:!0}],null,!1,1880709642)}):i("VueGrid",{key:e.componentKey,attrs:{items:e.items,noMoreData:e.noMoreData},on:{"load-more":e.load_more_users,delete:e.open_delete_dialog,edit:e.open_edit_dialog}})],1)},a=[],n=i("e06e"),s=(i("13ea"),i("1be9")),r=i("36ee"),l=i("0ebe"),d=i("29d6"),u=i("5b70"),c=i("23ca"),_=i("ee09"),p=i("b7d7"),f={name:"Teams",mixins:[n["a"]],components:{VueTable:l["a"],TeamsDialog:c["a"],TableHeader:d["a"],DeleteDialog:u["a"],Actions:_["a"],VueGrid:r["a"],GroupsDialog:p["a"]},data:function(){return{paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Teams",disabled:!0,router_name:null}],sortList:[{title:"Sort by member"},{title:"Sort by position"},{title:"Sort by location"},{title:"Sort by total hours"},{title:"Sort by total amount"}],headers:[{text:"Member",align:"left",value:"name",sortable:!1},{text:"Position",value:"position"},{text:"Location",value:"location"},{text:"Tasks",value:"tasks"},{text:"Projects",value:"projects"},{text:"Action",value:"actions",sortable:!1,align:"center",width:"140px"}],table_config:{route_name:"team",add_message:"New Member added successfully!",update_message:"Member updated successfully!",delete_message:"Member deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_teams_table"}}},created:function(){this.view=this.getPreferredView(),this.load_users()},computed:{logged_user:function(){return this.$store.getters.user},permissions:function(){return this.$_permissions.get("hq_members")}},methods:{can_delete:function(e){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(e){return!!this.logged_user.is_admin||(this.logged_user.id===e.id||this.permissions&&this.permissions.update)},load_users:function(){this.fill_table_via_url("api/company/teams?no-clients=true&per_page=12")},load_more_users:function(){this.load_more_via_url("api/company/teams?no-clients=true&per_page=12")},toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},tasks_text:function(e){return e.tasks.length?e.tasks.length:"No tasks assigned"},projects_text:function(e){return e.projects.length?e.projects.length:"No projects assigned"},go_to_groups_page:function(){this.$router.push({path:"settings?tab=groups"})},navigate_to_view_profile:function(e){this.$router.push("/dashboard/team/profile/".concat(e.id))},show_add_group_dialog:function(){this.$refs.add_group_dialog.openDialog()},save_new_user_group:function(e){var t=this;if(!e)return this.$event.$emit("open_snackbar","Cant create user group."),void this.$refs.add_group_dialog.cancel();s["a"].post("api/groups",e).then((function(e){var i=e.data;t.$event.$emit("new-user-group-added",i),t.$event.$emit("open_snackbar","New user group created")})).finally((function(){t.$refs.add_group_dialog.cancel()}))}}},g=f,m=(i("f7c6"),i("2877")),h=Object(m["a"])(g,o,a,!1,null,null,null);t["default"]=h.exports},f7c6:function(e,t,i){"use strict";var o=i("0f80"),a=i.n(o);a.a}}]);
//# sourceMappingURL=chunk-30a019ae.610f71ed.js.map