(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8ef480e"],{"102b":function(e,t,i){},"20ce":function(e,t,i){"use strict";var o=i("2240"),n=i.n(o);n.a},2240:function(e,t,i){},"259d":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:e.paths},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:o.disabled}},[i("span",{on:{click:function(t){return e.navigate_from_breadcrumb(o)}}},[e._v(" "+e._s(o.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("chevron_right")])],1),e._t("extra")],2)},n=[],a={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(e){if(e.hasOwnProperty("path"))e.path&&this.$router.push({path:e.path});else{var t=e.router_name;t&&this.$router.push({name:t})}}}},r=a,s=(i("3e7d"),i("ee7c"),i("2877")),l=Object(s["a"])(r,o,n,!1,null,"781f812e",null);t["a"]=l.exports},"283c":function(e,t,i){},"29d6":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-header"},[e.noButton?e._e():i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(t){return e.$emit("click")}}},"v-icon",n,!1),o),[e._v(" add_circle_outline ")])]}}],null,!1,2467787316)},[i("span",[e._v("Create new")])]),e.noSortButton?e._e():i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(t){return e.$emit("click-sort-by")}}},"v-icon",n,!1),o),[e._v("sort")])]}}],null,!1,1131913180)},[i("span",[e._v("Sort")])]),e.noListButton?e._e():i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(t){return e.$emit("click-list-view")}}},"v-icon",n,!1),o),[e._v(" mdi-view-sequential ")])]}}],null,!1,3485260972)},[i("span",[e._v("List view")])]),e.noGridButton?e._e():i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"add__btn ml-2",attrs:{fab:""},on:{click:function(t){return e.$emit("click-grid-view")}}},"v-icon",n,!1),o),[e._v(" mdi-view-module ")])]}}],null,!1,1778849189)},[i("span",[e._v("Grid view")])]),e._t("form-btn")],2)},n=[],a=i("259d"),r={name:"TableHeader",props:{noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:a["a"]}},s=r,l=(i("c30e"),i("2877")),c=Object(l["a"])(s,o,n,!1,null,"81f1d53c",null);t["a"]=c.exports},"2d07":function(e,t,i){},"382f":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice"},[i("StepperInvoiceDialog",{ref:"invoiceEditDialog",attrs:{type:"edit"},on:{updated:e.invoice_updated}}),i("StepperInvoiceDialog",{ref:"invoiceCreateDialog",attrs:{type:"create"},on:{created:function(t){return e.items.unshift(t)}}}),i("ViewInvoice",{ref:"view_invoice_dialog",attrs:{item:e.view_item}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Invoice","text-content":"Are you sure you want to delete this invoice?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:e.delete_invoice}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Invoices","text-content":"Are you sure you want to delete these invoices? This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:function(t){return e.bulk_delete("bulk_delete_invoices")}}}),i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"list",loading:e.loading,title:"Invoice",noMoreData:e.noMoreData,showSelect:!0},on:{"delete-selected":function(t){return e.open_bulk_delete_dialog(t)},"load-more":e.load_more},scopedSlots:e._u([{key:"row-slot",fn:function(t){var o=t.item;return[i("td",[e._v(e._s(e._f("format")(o.due_date)))]),i("td",{on:{click:function(t){return e.open_view_dialog(o)}}},[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("span",e._g({},n),[e._v("#INV-"+e._s(o.id))])]}}],null,!0)},[i("span",[e._v(e._s(e._f("ucwords")(o.title)))])])],1),i("td",[i("v-avatar",{attrs:{size:"30",color:"teal"}},[i("v-img",{attrs:{src:o.billedTo.image_url,title:o.billedTo.fullname},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("span",{staticClass:"white--text headline"},[e._v("C")])]},proxy:!0}],null,!0)})],1),e._v(" "+e._s(e._f("ucwords")(o.billedTo.fullname))+" ")],1),i("td",[e._v(e._s(e._f("ucwords")(o.status)))]),i("td",[e._v(e._s(e._f("money")(o.total_amount)))]),i("Actions",{attrs:{item:o,permissions:e.$_permissions.get("invoices")},on:{delete:function(t){return e.open_delete_dialog(o)},edit:function(t){return e.open_edit_dialog(o)},view:function(t){return e.open_view_dialog(o)}},scopedSlots:e._u([e.can_pay(o)?{key:"extra",fn:function(){return[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{dense:"",icon:""},on:{click:function(t){return e.navigatePayment(o)}}},n),[i("v-icon",{attrs:{small:""}},[e._v("mdi-cash")])],1)]}}],null,!0)},[i("span",[e._v("Pay")])])]},proxy:!0}:null],null,!0)})]}},{key:"empty-slot",fn:function(){return[i("v-btn",{attrs:{dark:"",color:"#3b589e"},on:{click:e.open_create_dialog}},[e._v(" Add Invoice")])]},proxy:!0}])},[i("template",{slot:"header-toolbar"},[i("table-header",{on:{click:e.open_create_dialog}})],1)],2)],1)},n=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("20d6"),i("96cf"),i("1da1")),r=i("ade3"),s=i("e6d3"),l=i("e06e"),c=i("2f62"),d=i("0644"),u=i.n(d),v=i("579d"),p=i("29d6"),_=i("5b70"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("v-card",{staticClass:"email__dialog"},[i("v-card-title",{staticClass:"dialog__header"},[i("span",{staticClass:"dialog__title"},[e._v("Send Invoice Options")]),i("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:""},on:{click:e.clear_and_close}},[i("v-icon",[e._v("close")])],1)],1),i("v-card-text",{staticClass:"dialog__body"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-select",{staticClass:"dialog__selectfield",attrs:{label:"Status",items:e.status_items,solo:"","hide-details":"",color:"#657186"},model:{value:e.selected_status,callback:function(t){e.selected_status=t},expression:"selected_status"}})],1)],1)],1),i("v-card-actions",{staticClass:"dialog__actions"},[i("v-btn",{on:{click:e.clear_and_close}},[e._v("Cancel")]),i("v-btn",{attrs:{disabled:e.status_disabled},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)},m=[],b=i("1be9");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y={name:"EmailDialog",props:{dialog:Boolean},data:function(){return{open:!1,status_items:[{id:1,text:"Once",value:"once"},{id:2,text:"Weekly",value:"weekly"},{id:3,text:"Monthly",value:"monthly"}],selected_status:null}},computed:h(h({},Object(c["c"])("invoice",["invoice_id"])),{},{status_disabled:function(){return!this.selected_status}}),watch:{dialog:function(e){this.open=e},open:function(e){this.$emit("update:dialog",e)}},methods:{clear_and_close:function(){this.$store.commit("invoice/set_invoice_id",null),Object.assign(this.$data,this.$options.data.apply(this)),this.open=!1},save:function(){b["a"].post("api/invoice/email",{invoice_id:this.invoice_id,iteration:this.selected_status}),this.clear_and_close()}}},w=y,O=(i("d0ad"),i("20ce"),i("2877")),j=Object(O["a"])(w,f,m,!1,null,"dabc3b2e",null),x=j.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice-dialog"},[i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{fullscreen:"",persistent:"","no-click-animation":"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.invoice_dialog,callback:function(t){e.invoice_dialog=t},expression:"invoice_dialog"}},[i("DialogToolbar",{on:{created:function(t){return e.$emit("created",t)},updated:function(t){return e.$emit("updated",t)}}}),i("div",{staticClass:"content"},[i("v-container",{staticStyle:{"max-width":"900px"},attrs:{fluid:""}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{xs:"12",md:"5"}},[i("TopLeft")],1),i("v-spacer"),i("v-col",{attrs:{xs:"12",md:"5"}},[i("TopRight")],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("TableSection")],1),i("v-row",{staticClass:"third-row additional-info-section",attrs:{"no-gutters":"",wrap:"","justify-space-between":""}},[i("v-col",{staticClass:"left-content",attrs:{sm:"6",xs:"12"}},[i("BottomLeft")],1),i("v-col",{staticClass:"right-content",attrs:{sm:"6",xs:"12"}},[i("BottomRight")],1)],1)],1)],1)],1)],1)],1)},P=[],D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dialog"},[i("v-toolbar",{attrs:{dark:"",color:"#3b589e",height:"60"}},[i("v-toolbar-title",{staticClass:"dialog-title"},["view"===e.dialog.type?[i("v-btn",{attrs:{icon:"",title:"download"}},[i("v-icon",[e._v("cloud_download")])],1),"client"===e.user.role?[i("v-btn",{attrs:{text:"",dark:"",outlined:""}},[e._v("Pay")])]:[i("v-btn",{attrs:{text:"",dark:"",outlined:""}},[e._v("Remind")])]]:i("span",[e._v(e._s(e.toolbar.title))])],2),i("v-spacer"),i("v-toolbar-items",{staticClass:"dialog-send"},["view"!==e.dialog.type?i("v-btn",{attrs:{disabled:!e.can_submit,text:""},on:{click:e.save_invoice}},[i("v-icon",{attrs:{left:""}},[e._v("save")]),e._v(" Submit ")],1):e._e(),i("v-btn",{attrs:{icon:"",dark:""},on:{click:e.close_dialog}},[i("v-icon",[e._v("close")])],1)],1)],1)],1)},C=[];i("6762"),i("2fdb");function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function $(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={computed:$($($({},Object(c["c"])("invoice",["toolbar","can_create_invoice","can_edit_invoice","dialog","invoice"])),Object(c["c"])(["user"])),{},{can_submit:function(){return"create"===this.dialog.type?this.can_create_invoice:"edit"===this.dialog.type&&this.can_edit_invoice}}),methods:$($({},Object(c["d"])("invoice",["set_dialog","revert_invoice"])),{},{save_invoice:function(){this.can_submit&&("create"===this.dialog.type&&this.create_invoice(),"edit"===this.dialog.type&&this.update_invoice())},create_invoice:function(){var e=this;s["a"].create_invoice(this.get_invoice()).then((function(t){var i=t.data;return e.$emit("created",i)})).finally((function(){e.$store.commit("invoice/reset_state")}))},update_invoice:function(){var e=this;s["a"].update_invoice(this.get_invoice(),this.invoice.invoice_id).then((function(t){var i=t.data;return e.$emit("updated",i)})).finally((function(){e.$store.commit("invoice/reset_state")}))},get_invoice:function(){var e=new FormData;e.append("company_logo",this.invoice.company_logo),e.append("project_id",this.invoice.selected_project||0),e.append("type",this.invoice.type),e.append("title",this.invoice.title),e.append("billed_to",this.invoice.billed_to),e.append("billed_from",this.invoice.billed_from),e.append("date",this.invoice.date),e.append("due_date",this.invoice.due_date),e.append("total_amount",this.invoice.total_amount),e.append("items",JSON.stringify(this.invoice.rows)),e.append("terms",this.invoice.terms),e.append("notes",this.invoice.notes);var t=this.calculate_field(this.invoice,"tax"),i=this.calculate_field(this.invoice,"discount"),o=this.calculate_field(this.invoice,"shipping");return e.append("tax",0==t?0:t.value),e.append("discount",0==i?0:i.value),e.append("shipping",0==o?0:o.value),e.append("symbol",0==t?"":t.symbol),e},calculate_field:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e[t].show&&i?{value:e[t].value,symbol:e[t].symbol}:e[t].show&&!i?{value:e[t].value}:0},close_dialog:function(){["view","edit"].includes(this.dialog.type)&&this.revert_invoice(),this.set_dialog({type:null,open:!1})}})},E=T,I=(i("62a7"),Object(O["a"])(E,D,C,!1,null,"7e198f20",null)),B=I.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{staticClass:"left__side",attrs:{wrap:""}},["view"!==e.dialog.type||e.image_preview?i("v-col",{staticClass:"add__logo_box",attrs:{md:"12"},on:{click:function(t){"view"!==e.dialog.type&&e.$refs.hidden_input.click()}}},[e.image_preview?i("img",{staticClass:"image-preview",attrs:{src:e.image_preview}}):i("span",{staticClass:"text"},[e._v("+ Add Your Logo")]),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.image_preview&&"view"!==e.dialog.type,expression:"image_preview && dialog.type !== 'view'"}],staticClass:"button",attrs:{outlined:""}},[e._v("Remove")]),i("input",{ref:"hidden_input",staticClass:"hidden-input",attrs:{type:"file",accept:"image/*"},on:{change:e.file_selected}})],1):e._e(),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"form__label"},[e._v("Bill From: "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-autocomplete",{attrs:{items:e.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:e.billed_from,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(t){return e.show_add_member_dialog("billed_from")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",e._b({attrs:{tile:"",outlined:""}},"v-chip",t.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[e._v("mdi-account-circle")])],1),e._v(" "+e._s(t.item.fullname)+" ")],1)]}},{key:"item",fn:function(t){var o=t.item;return[[i("v-list-item-avatar",[i("img",{attrs:{src:o.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(o.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:e._s(o.job_title)}})],1)]]}}]),model:{value:e.billed_from,callback:function(t){e.billed_from=t},expression:"billed_from"}})],1),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"form__label"},[e._v("Bill To: "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-autocomplete",{attrs:{items:e.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:e.billed_to,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(t){return e.show_add_member_dialog("billed_to")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",e._b({attrs:{tile:"",outlined:""}},"v-chip",t.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[e._v("mdi-account-circle")])],1),e._v(" "+e._s(t.item.fullname)+" ")],1)]}},{key:"item",fn:function(t){var o=t.item;return[[i("v-list-item-avatar",[i("img",{attrs:{src:o.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(o.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:e._s(o.job_title)}})],1)]]}}]),model:{value:e.billed_to,callback:function(t){e.billed_to=t},expression:"billed_to"}})],1),i("teams-dialog",{ref:"add_dialog",attrs:{title:"Add New Member",dialog:e.add_dialog},on:{"update:dialog":function(t){e.add_dialog=t},save:e.add_member,"close-dialog":function(t){e.add_dialog=!1}}})],1)},L=[],R=i("53ca"),F=i("d4e9"),M=i("23ca");function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var V={components:{TeamsDialog:M["a"]},data:function(){return{image_preview:null,members:[],original:[],selected:0,add_dialog:!1,target_add:""}},computed:H(H({},Object(c["c"])("invoice",["company_logo","dialog"])),{},{billed_to:{get:function(){return this.$store.getters["invoice/billed_to"]},set:function(e){this.$store.commit("invoice/set_billed_to",e)}},billed_from:{get:function(){return this.$store.getters["invoice/billed_from"]},set:function(e){this.$store.commit("invoice/set_billed_from",e)}}}),created:function(){var e=this;setTimeout((function(){e.getMembers()}),1)},watch:{company_logo:function(e){var t=this;if(e)if("object"===Object(R["a"])(e)){var i=new FileReader;i.onload=function(e){t.image_preview=e.target.result},i.readAsDataURL(e)}else this.image_preview=e;else this.image_preview=null}},methods:{file_selected:function(e){var t=this;if(e.target.files&&e.target.files[0]){var i=new FormData;i.append("file",e.target.files[0]),b["a"].post("api/file/image-upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var i=e.data;t.$store.commit("invoice/set_company_logo",i.url)}))}},setFrom:function(e){this.billed_from=e},setTo:function(e){this.billed_to=e},getMembers:function(){var e=this;F["a"].get_all_teams().then((function(t){var i=t.data;e.original=u()(i),e.members=i}))},show_add_member_dialog:function(e){this.target_add=e,this.add_dialog=!0},add_member:function(e){var t=this;F["a"].add_new_team(e).then((function(e){var i=e.data;t.members.push(i),"billed_from"===t.target_add?t.billed_from=i.id:"billed_to"===t.target_add&&(t.billed_to=i.id),t.$refs.add_dialog.clear_and_close()})).finally((function(){t.target_add="",t.$event.$emit("btnloading_off",!1)}))}}},q=V,G=(i("8533"),i("e470"),Object(O["a"])(q,A,L,!1,null,"10add2d0",null)),J=G.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{staticClass:"right__side",attrs:{wrap:""}},["create"!==e.dialog.type?i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v("Invoice ID:")]),i("v-text-field",{staticClass:"textfield",attrs:{disabled:"view"===e.dialog.type||"edit"===e.dialog.type,color:"#657186",solo:"","hide-details":"",flat:"",placeholder:"#",value:"#INV-"+e.invoice_id}})],1):e._e(),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v("Invoice Title:")]),i("v-text-field",{staticClass:"titlefield",attrs:{color:"#657186",solo:"","hide-details":"",flat:"",dense:"",outlined:"",placeholder:"Add Invoice Title *"},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}})],1),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v(" "+e._s("view"===e.dialog.type?"Type:":"Select Type:")+" ")]),i("v-select",{attrs:{disabled:"view"===e.dialog.type,solo:"",outlined:"","full-width":"",dense:"","hide-details":"",color:"#657186",flat:"",items:["hourly","monthly"],placeholder:"Select Invoice Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),"hourly"===e.type?i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v(" "+e._s("view"===e.dialog.type?"Project:":"Select Project:")+" ")]),i("v-select",{attrs:{disabled:"view"===e.dialog.type,solo:"","hide-details":"",color:"#657186",flat:"","full-width":"",outlined:"",dense:"",items:e.projects,value:e.selected_project,"item-text":"title","item-value":"id",placeholder:"Select Project"},on:{change:e.setBillingTargets}})],1):e._e(),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v(" Invoice Date:"),i("span",{staticClass:"required"},[e._v("*")])]),"view"===e.dialog.type?i("v-text-field",{staticClass:"textfield",attrs:{value:e.date,flat:"",solo:"",dense:"",outlined:"","hide-details":"",color:"#657186",disabled:""}}):i("date-picker",{staticClass:"textfield",attrs:{solo:"",outlined:"","hide-details":"",color:"#657186",flat:"",dense:"",placeholder:"Select Date",value:e.date,max:e.due_date},on:{input:function(t){return e.update_date({date:t,field:"date"})}}})],1),i("v-col",{attrs:{md:"12"}},[i("div",{staticClass:"field__label"},[e._v("Due Date:"),i("span",{staticClass:"required"},[e._v("*")])]),"view"===e.dialog.type?i("v-text-field",{staticClass:"textfield",attrs:{value:e.due_date,flat:"",solo:"",outlined:"","hide-details":"",color:"#657186",disabled:""}}):i("date-picker",{staticClass:"textfield",attrs:{dense:"",outlined:"","hide-details":"",color:"#657186",flat:"",placeholder:"Select Date",value:e.due_date,min:e.date},on:{input:function(t){return e.update_date({date:t,field:"due_date"})}}})],1)],1)},K=[],U=i("c97a");function W(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function Y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?W(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Q={components:{DatePicker:U["a"]},computed:Y(Y({},Object(c["c"])("invoice",["projects","selected_project","due_date","date","dialog","invoice_id","type"])),{},{type:{get:function(){return this.$store.getters["invoice/type"]},set:function(e){this.set_type(e)}},title:{get:function(){return this.$store.getters["invoice/title"]},set:function(e){this.$store.commit("invoice/set_title",e)}}}),watch:{type:function(e){"monthly"===e&&this.type_changed_to_monthly()}},methods:Y(Y(Y({},Object(c["b"])("invoice",["type_changed_to_monthly"])),Object(c["d"])("invoice",["init_date","set_type","set_selected_project","update_date"])),{},{setBillingTargets:function(e){this.set_selected_project(e)}})},X=Q,Z=(i("8d80"),i("dd3a"),Object(O["a"])(X,z,K,!1,null,"fbdb026e",null)),ee=Z.exports,te=i("0885"),ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"left-side"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmptyField("view"===e.dialog.type,e.notes),expression:"!isEmptyField(dialog.type === 'view', notes)"}],staticClass:"notes"},[i("div",{staticClass:"field__label"},[e._v("Notes")]),i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Notes - any revelant information not already covered",value:e.notes,disabled:"view"===e.dialog.type,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(t){return e.update_textarea(t,"notes")}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmptyField("view"===e.dialog.type,e.terms),expression:"!isEmptyField(dialog.type === 'view', terms)"}],staticClass:"Terms"},[i("div",{staticClass:"field__label"},[e._v("Terms")]),i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Terms and conditions - late fees, payment methods, delivery schedule",value:e.terms,disabled:"view"===e.dialog.type,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(t){return e.update_textarea(t,"terms")}}})],1)])},oe=[];function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function ae(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var re={data:function(){return{}},computed:ae({},Object(c["c"])("invoice",["notes","terms","dialog"])),methods:{update_textarea:function(e,t){this.$store.commit("invoice/set_textarea",{new_val:e,field:t})},isEmptyField:function(e,t){if(e&&!t)return!0}}},se=re,le=(i("9c81"),i("5407"),Object(O["a"])(se,ie,oe,!1,null,"a9edc166",null)),ce=le.exports,de=i("210b");function ue(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function ve(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var pe={components:{DialogToolbar:B,TopLeft:J,TopRight:ee,TableSection:te["a"],BottomLeft:ce,BottomRight:de["a"]},props:{type:String},data:function(){return{copied_invoice:null}},computed:ve(ve({},Object(c["c"])("invoice",["dialog"])),{},{invoice_dialog:function(){return this.dialog.open&&this.dialog.type===this.type}}),methods:ve({},Object(c["d"])("invoice",["set_dialog"]))},_e=pe,fe=(i("c59e"),Object(O["a"])(_e,k,P,!1,null,"4753f0bd",null)),me=fe.exports,be=i("9107"),ge=i("ee09"),he=i("0ebe"),ye=i("d7fe");function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function Oe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?we(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var je={name:"Invoice",mixins:[l["a"],v["a"]],components:{TableHeader:p["a"],InvoiceDialog:me,StepperInvoiceDialog:ye["a"],VueTable:he["a"],EmailDialog:x,DeleteDialog:_["a"],ViewInvoice:be["a"],Actions:ge["a"]},data:function(){return{view_invoice_dialog:!1,paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Invoice",disabled:!0,router_name:null}],headers:[{text:"Due Date",sortable:!1},{text:"Invoice #",sortable:!1},{text:"Client",sortable:!1},{text:"Status",sortable:!1},{text:"Amount",sortable:!1},{text:"Action",value:"actions",sortable:!1,width:"180px",align:"center"}],view_item:null,table_config:{add_message:"New invoice added successfully!",update_message:"Invoice updated successfully!",delete_message:"Invoice deleted successfully!",refresh_table_message:"Table refreshed"}}},created:function(){this.fetch_data(),this.getInvoices()},mounted:function(){this.$event.$emit("path-change",this.paths)},beforeDestroy:function(){this.$store.commit("invoice/reset_state")},computed:{user:function(){return this.$store.getters.user}},methods:Oe(Oe({},Object(c["d"])("invoice",["set_dialog","set_toolbar","set_projects","open_invoice_for_editing","set_selected_project","set_props"])),{},{can_pay:function(e){return e.billed_to===this.user.id},navigatePayment:function(e){this.$router.push({name:"pay-invoice",params:{id:e.id}})},open_create_dialog:function(){this.set_toolbar({title:"Create Invoice"}),this.set_dialog({type:"create",open:!0}),this.set_props({send_email:"no",template:1}),this.$refs.invoiceCreateDialog.openDialog()},open_edit_dialog:function(e){this.set_toolbar({title:"Edit Dialog"}),this.open_invoice_for_editing(u()(e)),0!==e.project_id&&this.set_selected_project(e.project_id),this.set_dialog({type:"edit",open:!0}),this.$refs.invoiceEditDialog.openDialog()},open_view_dialog:function(e){this.view_item=e,this.$refs.view_invoice_dialog.open_dialog(e)},delete_invoice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.delete_dialog=!1,e.next=4,s["a"].delete_invoice(this.delete_item_id);case 4:this.loading=!1,t=this.items.findIndex((function(e){return e.id===i.delete_item_id})),~t&&this.items.splice(t,1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch_data:function(){var e=this;s["a"].get_all_projects().then((function(t){e.set_projects(t.data)})).finally((function(){return e.loading=!1}))},invoice_updated:function(e){var t=this.items.findIndex((function(t){return t.id===e.id}));~t&&this.items.splice(t,1,e)},getInvoices:function(){this.fill_table_via_url("api/invoice")},load_more:function(){this.load_more_via_url("api/invoice")}})},xe=je,ke=(i("8bfa"),i("be98"),Object(O["a"])(xe,o,n,!1,null,"e72e1cca",null));t["default"]=ke.exports},"3d66":function(e,t,i){},"3e7d":function(e,t,i){"use strict";var o=i("c402"),n=i.n(o);n.a},5407:function(e,t,i){"use strict";var o=i("3d66"),n=i.n(o);n.a},"58af":function(e,t,i){},"62a7":function(e,t,i){"use strict";var o=i("a931"),n=i.n(o);n.a},"7b5f":function(e,t,i){},8533:function(e,t,i){"use strict";var o=i("b4d7"),n=i.n(o);n.a},"87f0":function(e,t,i){},"8bfa":function(e,t,i){"use strict";var o=i("2d07"),n=i.n(o);n.a},"8d80":function(e,t,i){"use strict";var o=i("c168"),n=i.n(o);n.a},"9c81":function(e,t,i){"use strict";var o=i("102b"),n=i.n(o);n.a},a931:function(e,t,i){},b4d7:function(e,t,i){},bd4d:function(e,t,i){},be98:function(e,t,i){"use strict";var o=i("ff61"),n=i.n(o);n.a},c168:function(e,t,i){},c30e:function(e,t,i){"use strict";var o=i("87f0"),n=i.n(o);n.a},c402:function(e,t,i){},c59e:function(e,t,i){"use strict";var o=i("bd4d"),n=i.n(o);n.a},d0ad:function(e,t,i){"use strict";var o=i("283c"),n=i.n(o);n.a},dd3a:function(e,t,i){"use strict";var o=i("58af"),n=i.n(o);n.a},e470:function(e,t,i){"use strict";var o=i("e833"),n=i.n(o);n.a},e833:function(e,t,i){},ee7c:function(e,t,i){"use strict";var o=i("7b5f"),n=i.n(o);n.a},ff61:function(e,t,i){}}]);
//# sourceMappingURL=chunk-c8ef480e.6e9963b0.js.map