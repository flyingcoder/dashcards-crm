(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc73ef88"],{4034:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report-builder"},[a("v-card",[a("v-card-text",[a("v-text-field",{staticClass:"col-md-9 col-sm-12",attrs:{dense:"",filled:"","hide-details":"",label:"Report Template Name *","prepend-inner-icon":"mdi-format-color-highlight"},model:{value:t.report_template_name,callback:function(e){t.report_template_name=e},expression:"report_template_name"}}),a("Builder",{model:{value:t.structures,callback:function(e){t.structures=e},expression:"structures"}})],1),a("v-card-actions",[a("v-card-text",[a("v-row",[a("v-col",{attrs:{md:"9",sm:"12"}},[a("v-row",[a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{color:"#e4e4e4"},on:{click:function(e){return t.$router.push({name:"templates"})}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{dark:"",color:"#3b589e",loading:t.btnloading,disabled:!t.is_valid},on:{click:t.saveTemplate}},[t._v(" "+t._s(t.button_label)+" ")])],1)],1)],1)],1)],1)],1)],1)},n=[],i=(a("7f7f"),a("f820")),s=a("1be9"),o={name:"ReportBuilder",components:{Builder:i["a"]},data:function(){return{existing:[],structures:[],report_template_name:"Untitled Report Template",isEdit:!1,reportId:null,reportToEdit:null,btnloading:!1}},computed:{paths:function(){return[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:"Templates",disabled:!1,route:{name:"templates"}},{text:this.isEdit?"Edit Report":"New Report",disabled:!0,route:null}]},is_valid:function(){return this.validate(!1)},button_label:function(){return this.isEdit?"Update Template":"Save New Template"}},created:function(){this.getExistingReportTemplates()},mounted:function(){this.$route.params.id>0&&(this.isEdit=!0,this.reportId=this.$route.params.id,this.getReportTemplate(this.$route.params.id)),this.$event.$emit("path-change",this.paths)},methods:{getExistingReportTemplates:function(){var t=this;s["a"].get("api/template/reports").then((function(e){var a=e.data;t.existing=a}))},getReportTemplate:function(t){var e=this;s["a"].get("api/template/reports/".concat(t)).then((function(t){var a=t.data;e.reportToEdit=a,e.report_template_name=e.reportToEdit.name,e.structures=e.reportToEdit.meta.template.value}),(function(a){e.$event.$emit("open_snackbar","No report template found for id: ".concat(t),"error"),e.$router.push({name:"templates"})}))},validate:function(t){return 0===this.structures.length?(t&&this.$event.$emit("open_snackbar","No content found!","error"),!1):!!this.report_template_name||(t&&this.$event.$emit("open_snackbar","Report Template Name is required","error"),!1)},saveTemplate:function(){var t=this;this.validate(!0)&&(this.btnloading=!0,this.isEdit?s["a"].put("api/template/reports/".concat(this.reportId),{name:this.report_template_name,data:this.structures}).then((function(e){var a=e.data;t.$event.$emit("open_snackbar",a.message),t.$router.push({name:"templates"})})).finally((function(){return t.btnloading=!1})):s["a"].post("api/template/reports",{name:this.report_template_name,data:this.structures}).then((function(e){var a=e.data;t.$event.$emit("open_snackbar",a.message),t.$router.push({name:"templates"})})).finally((function(){return t.btnloading=!1})))}}},l=o,p=(a("60ac"),a("2877")),u=Object(p["a"])(l,r,n,!1,null,"d2946a7c",null);e["default"]=u.exports},"60ac":function(t,e,a){"use strict";var r=a("6d31"),n=a.n(r);n.a},"6d31":function(t,e,a){}}]);
//# sourceMappingURL=chunk-dc73ef88.fb4ae8f1.js.map