{"version":3,"sources":["webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/api.js","webpack:///./src/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue?4504","webpack:///./node_modules/lodash/now.js","webpack:///./src/modules/Chat/api.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?6f9f","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?be2e","webpack:///./src/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue?bdc1","webpack:///src/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue","webpack:///./src/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue?d628","webpack:///./src/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue","webpack:///src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?e86c","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue","webpack:///./src/services/list-functionality/methods.js","webpack:///./src/services/list-functionality/list-functionality.js"],"names":["send_message","project_id","payload","request","post","headers","get_client_convo_details","id","get","root","now","Date","module","exports","api_to","get_chat_list","get_groupchat_list","get_members_list","convo_id","get_messages","get_group_messages","get_more_messages","page","send_group_message","save_group","update_members_list","remove_from_group","isObject","toNumber","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","this","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","value","other","valueOf","replace","isBinary","test","slice","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","open_manage_member_dialog","_v","_e","ref","noMoreData","loading","load_previous","items","length","can_send_message","staticStyle","_l","messages","message","key","mentionables","$event","sendMessage","activeChat","staticRenderFns","model","callback","$$v","dialog","expression","clear_and_close","filter_users","search","filtered_by_search","item","title","selected","image_url","domProps","_s","fullname","directives","name","rawName","all_selected","can_be_remove","btnloading","update_members","props","conversation","Object","data","all_users","computed","loggedUser","$store","getters","user","methods","open_dialog","users","map","is_company_owner","uroles","includes","roles","select","index","is_selected","splice","push","filter_users_for_selected","selected_ids","members","component","mixins","global_utils","Number","String","components","Empty","ManageClientChatMember","ChatField","Message","can_manage_members","is_admin","role","values","user_roles","indexOf","can_message","created","getConvoDetails","mounted","$pusher","authenticate","subscribePusher","beforeDestroy","unsubscribe","$refs","manage_group_members_dialog","api","scrollToBottomDiv","wrapper","scrollTop","scrollHeight","load_more_via_url","add_new_message","some","unshift","user_can_message","can","fill_table_via_url","console","log","client_message_channel","bind","type","resetPagination","pagination","current","total","clear_selected","$emit","add_item","api_name","dynamic_api","makeRequestTo","then","response","new_items","Array","isArray","reverse","forEach","new_item","add_dialog","table_config","add_message","finally","extract_per_page","string","starts","substring","calc_per_page_items","page_rows","total_rows","update_item","edit_item","findIndex","data_item","fields","edit_dialog","update_message","delete_item","delete_item_id","delete_dialog","delete_message","bulk_delete","ids","ii","bulk_delete_dialog","bulk_delete_via_url","url","delete","open_edit_dialog","$set","open_delete_dialog","open_bulk_delete_dialog","fill_table","nested_response","items_response","current_page","last_page","hasMoreData","params","load_more_on_table","scrollToBottom","fill_table_with_data","add_table_rows","rows","changeSort","column","sort","sortBy","descending","refresh_table","query","refresh_table_api_name","refresh_table_message","update_table_actions","per_page","rows_per_page","split","componentKey","toggleAll","setPreferredView","view","window","localStorage","setItem","getPreferredView","getItem","document","getElementsByClassName","_debounce","list_functionality","permissionDialog","show_delete_selected","watch","new_val","api_query","old_query","new_per_page","old_per_page","$router","route_name","query_for_sorting"],"mappings":"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","file":"js/chunk-57ebd317.10b7f54a.js","sourcesContent":["import request from '@/services/axios_instance'\r\n\r\nexport const get_team_messages = project_id => {\r\n  return request.get(`api/projects/${project_id}/messages?type=team`)\r\n}\r\n\r\nexport const send_message = (project_id, payload) => {\r\n  return request.post(`api/projects/${project_id}/messages`, payload, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n}\r\n\r\nexport const get_client_convo_details = (id) => {\r\n\treturn request.get(`api/chat/group/client/${id}`)\r\n}","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageClientChatMember.vue?vue&type=style&index=0&id=21df94f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageClientChatMember.vue?vue&type=style&index=0&id=21df94f4&scoped=true&lang=css&\"","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","import request from '@/services/axios_instance'\r\n\r\nexport const api_to = {\r\n  get_chat_list() {\r\n    return request.get(`api/chat/list?for=project&has_msg_count=true`)\r\n  },\r\n  get_groupchat_list() {\r\n    return request.get(`api/chat/group/list?for=project&has_msg_count=true`)\r\n  },\r\n  get_members_list(convo_id) {\r\n    return request.get(`api/chat/group/members/${convo_id}`)\r\n  },\r\n  get_messages(id) {\r\n    return request.get(`api/chat/private/${id}`)\r\n  },\r\n  get_group_messages(id) {\r\n    return request.get(`api/chat/group/private/${id}`)\r\n  },\r\n  get_more_messages(id, page) {\r\n    return request.get(`api/chat/private/${id}?page=${page + 1}`)\r\n  },\r\n  send_message(payload) {\r\n    return request.post(`api/chat/private`, payload , {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  },\r\n  send_group_message(payload) {\r\n    return request.post(`api/chat/group/private`, payload, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  },\r\n  save_group(payload) {\r\n    return request.post(`api/chat/group`, payload)\r\n  },\r\n  update_members_list(payload) {\r\n    return request.post(`api/chat/group/update-members`, payload)\r\n  },\r\n  remove_from_group(payload) {\r\n    return request.post(`api/chat/group/remove-member`, payload)\r\n  }\r\n}\r\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=style&index=0&id=d650a538&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=style&index=0&id=d650a538&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message__body team-messages\"},[(_vm.can_manage_members)?_c('v-system-bar',{attrs:{\"lights-out\":\"\",\"height\":40}},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":_vm.open_manage_member_dialog}},[_vm._v(\"Manage Members \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"settings\")])],1)],1):_vm._e(),_c('div',{ref:\"messages-container\",staticClass:\"messages\"},[(_vm.can_send_message)?_c('v-row',{staticClass:\"pa-3\",attrs:{\"no-gutters\":\"\"}},[_c('v-spacer'),_c('v-col',[(_vm.noMoreData === false && !_vm.loading)?_c('v-btn',{staticClass:\"view__more_btn overline\",attrs:{\"text\":\"\"},on:{\"click\":_vm.load_previous}},[_vm._v(\"Load Previous Messages\")]):_vm._e()],1),_c('v-spacer')],1):_vm._e(),(_vm.loading)?_c('v-progress-linear',{attrs:{\"indeterminate\":true}}):_vm._e(),(_vm.items.length && _vm.can_send_message)?_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"px-3 py-2\",staticStyle:{\"min-height\":\"350px\"},attrs:{\"md\":\"12\"}},_vm._l((_vm.messages(_vm.items)),function(message){return _c('Message',{key:message.id,attrs:{\"message\":message}})}),1)],1):(!_vm.can_send_message)?_c('div',{staticClass:\"no-messages\"},[_c('Empty',{attrs:{\"headline\":\"Client messages unavailable! \"}})],1):_c('div',{staticClass:\"no-messages\"},[_c('Empty',{attrs:{\"headline\":\"No messages yet\"}})],1)],1),_c('div',{staticClass:\"write px-3\"},[(_vm.can_send_message)?_c('ChatField',{staticClass:\"mt-2\",attrs:{\"mentionables\":_vm.mentionables},on:{\"typing\":function($event){},\"send-message\":_vm.sendMessage}}):_vm._e()],1),_c('ManageClientChatMember',{ref:\"manage_group_members_dialog\",attrs:{\"conversation\":_vm.activeChat}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.conversation)?_c('div',{staticClass:\"text-center\"},[_c('v-dialog',{attrs:{\"max-width\":\"800\",\"persistent\":\"\",\"scrollable\":\"\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_vm._v(\" Manage Members \"),_c('v-spacer'),_c('v-icon',{on:{\"click\":function($event){return _vm.clear_and_close()}}},[_vm._v(\"close\")])],1),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-flex',{attrs:{\"sm12\":\"\",\"md8\":\"\"}},[_c('v-text-field',{attrs:{\"solo\":\"\",\"label\":\"Search for people to add\",\"required\":\"\",\"clearable\":\"\",\"prepend-inner-icon\":\"search\"},on:{\"keydown\":_vm.filter_users,\"click:clear\":_vm.filter_users},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),(_vm.filtered_by_search.length > 0)?_c('v-list',{attrs:{\"id\":\"filtered_by_search_wrapper\"}},_vm._l((_vm.filtered_by_search),function(item){return _c('v-list-item',{key:item.title,on:{\"click\":function($event){return _vm.selected(item)}}},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":item.image_url}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.fullname)}})],1),_c('v-list-item-icon',[_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.is_selected),expression:\"item.is_selected\"}],attrs:{\"color\":\"success\"}},[_vm._v(\"mdi-checkbox-marked-circle\")])],1)],1)}),1):_vm._e()],1),_c('v-flex',{attrs:{\"sm12\":\"\",\"md4\":\"\"}},[_c('v-list',{attrs:{\"id\":\"all_selected_wrapper\"}},[_c('v-subheader',[_vm._v(\"Selected (\"+_vm._s(_vm.all_selected.length)+\")\")]),_vm._l((_vm.all_selected),function(item){return (_vm.all_selected.length > 0)?_c('v-list-item',{key:item.title},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":item.image_url}})],1),_c('v-list-item-content',[_c('v-list-item-subtitle',{domProps:{\"textContent\":_vm._s(item.fullname)}})],1),(_vm.can_be_remove(item))?_c('v-list-item-icon',[_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"danger\"},on:{\"click\":function($event){return _vm.selected(item)}}},[_vm._v(\"close\")])],1):_vm._e()],1):_vm._e()})],2)],1)],1)],1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{on:{\"click\":_vm.clear_and_close}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"loading\":_vm.btnloading},on:{\"click\":_vm.update_members}},[_vm._v(\" Save \")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"text-center\" v-if=\"conversation\">\r\n    <v-dialog v-model=\"dialog\" max-width=\"800\" persistent scrollable>\r\n      <v-card>\r\n        <v-card-title class=\"headline grey lighten-2\" primary-title>\r\n          Manage Members\r\n          <v-spacer></v-spacer>\r\n          <v-icon @click=\"clear_and_close()\">close</v-icon>\r\n        </v-card-title>\r\n\r\n        <v-card-text>\r\n          <v-container>\r\n            <v-row>\r\n              <v-flex sm12 md8>\r\n                <v-text-field\r\n                  solo\r\n                  label=\"Search for people to add\"\r\n                  required\r\n                  clearable\r\n                  prepend-inner-icon=\"search\"\r\n                  v-model=\"search\"\r\n                  @keydown=\"filter_users\"\r\n                  @click:clear=\"filter_users\"\r\n                ></v-text-field>\r\n\r\n                <v-list\r\n                  v-if=\"filtered_by_search.length > 0\"\r\n                  id=\"filtered_by_search_wrapper\"\r\n                >\r\n                  <v-list-item\r\n                    v-for=\"item in filtered_by_search\"\r\n                    :key=\"item.title\"\r\n                    @click=\"selected(item)\"\r\n                  >\r\n                    <v-list-item-avatar>\r\n                      <v-img :src=\"item.image_url\"></v-img>\r\n                    </v-list-item-avatar>\r\n\r\n                    <v-list-item-content>\r\n                      <v-list-item-title\r\n                        v-text=\"item.fullname\"\r\n                      ></v-list-item-title>\r\n                    </v-list-item-content>\r\n\r\n                    <v-list-item-icon>\r\n                      <v-icon v-show=\"item.is_selected\" color=\"success\"\r\n                        >mdi-checkbox-marked-circle</v-icon\r\n                      >\r\n                    </v-list-item-icon>\r\n                  </v-list-item>\r\n                </v-list>\r\n              </v-flex>\r\n              <v-flex sm12 md4>\r\n                <v-list id=\"all_selected_wrapper\">\r\n                  <v-subheader\r\n                    >Selected ({{ all_selected.length }})</v-subheader\r\n                  >\r\n                  <v-list-item\r\n                    v-if=\"all_selected.length > 0\"\r\n                    v-for=\"item in all_selected\"\r\n                    :key=\"item.title\"\r\n                  >\r\n                    <v-list-item-avatar>\r\n                      <v-img :src=\"item.image_url\"></v-img>\r\n                    </v-list-item-avatar>\r\n\r\n                    <v-list-item-content>\r\n                      <v-list-item-subtitle\r\n                        v-text=\"item.fullname\"\r\n                      ></v-list-item-subtitle>\r\n                    </v-list-item-content>\r\n\r\n                    <v-list-item-icon v-if=\"can_be_remove(item)\">\r\n                      <v-icon @click=\"selected(item)\" small color=\"danger\"\r\n                        >close</v-icon\r\n                      >\r\n                    </v-list-item-icon>\r\n                  </v-list-item>\r\n                </v-list>\r\n              </v-flex>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card-text>\r\n\r\n        <v-divider></v-divider>\r\n\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn @click=\"clear_and_close\">\r\n            Cancel\r\n          </v-btn>\r\n          <v-btn color=\"primary\" @click=\"update_members\" :loading=\"btnloading\">\r\n            Save\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n#all_selected_wrapper {\r\n  max-height: 340px;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n#filtered_by_search_wrapper {\r\n  max-height: 260px;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { api_to } from '@/modules/Chat/api'\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\n\r\nexport default {\r\n  name: 'ManageClientChatMember',\r\n  props: {\r\n    conversation: Object\r\n  },\r\n  data() {\r\n    return {\r\n      dialog: false,\r\n      all_users: [],\r\n      filtered_by_search: [],\r\n      all_selected: [],\r\n      search: '',\r\n      btnloading: false\r\n    }\r\n  },\r\n /* created() {\r\nlet uroles = Object.values(this.loggedUser.user_roles)[0]\r\n  console.log(uroles.includes('manager'))\r\n  },*/\r\n  computed: {\r\n    loggedUser(){\r\n      return this.$store.getters.user\r\n    }\r\n  },\r\n  methods: {\r\n    open_dialog() {\r\n      this.dialog = true\r\n      this.all_selected = _cloneDeep(this.conversation.members)\r\n      this.get_chat_list()\r\n    },\r\n    clear_and_close() {\r\n      this.dialog = false\r\n    },\r\n    get_chat_list() {\r\n      api_to.get_chat_list().then(({ data }) => {\r\n        this.filtered_by_search = this.filter_users_for_selected(data)\r\n        this.all_users = _cloneDeep(data)\r\n      })\r\n    },\r\n    update_members() {\r\n      this.btnloading = true\r\n      var payload = {\r\n        convo_id: this.conversation.id,\r\n        users: this.all_selected.map(value => {\r\n          return value.id\r\n        })\r\n      }\r\n      api_to\r\n        .update_members_list(payload)\r\n        .then(({ data }) => {\r\n          this.conversation.members = data\r\n          this.clear_and_close()\r\n        })\r\n        .finally(() => (this.btnloading = false))\r\n    },\r\n    can_be_remove(user) {\r\n      if (user.id === this.loggedUser.id) return false //cant delete self\r\n      \r\n      if (user.is_company_owner)  return false\r\n\r\n      if (this.loggedUser.is_company_owner)  return true\r\n\r\n      let uroles = Object.values(this.loggedUser.user_roles)[0]\r\n\r\n      let roles = Object.values(user.user_roles)[0]\r\n\r\n      if (uroles.includes('admin') && roles.includes('admin')) { //both admin\r\n        return false\r\n      } else if (uroles.includes('admin') && !roles.includes('admin')) {\r\n        return true\r\n      } else if (uroles.includes('manager') && roles.includes('manager')) { //both manager\r\n        return false\r\n      } else if (uroles.includes('manager') && roles.includes('admin')) {\r\n        return false\r\n      }\r\n      \r\n      if (uroles.includes('client') || uroles.includes('member')){\r\n        return false\r\n      }\r\n\r\n      return true\r\n    },\r\n    select(item, value) {\r\n      let index = this.filtered_by_search.findIndex(user => item.id === user.id)\r\n      if (~index) {\r\n        this.filtered_by_search[index].is_selected = value\r\n      }\r\n    },\r\n    selected(item) {\r\n      let index = this.all_selected.findIndex(user => item.id === user.id)\r\n      if (~index) {\r\n        this.select(item, false)\r\n        this.all_selected.splice(index, 1)\r\n      } else {\r\n        this.select(item, true)\r\n        this.all_selected.push(item)\r\n      }\r\n    },\r\n\r\n    filter_users_for_selected(items) {\r\n      var selected_ids = this.conversation.members.map(value => {\r\n        return value.id\r\n      })\r\n      return items.map(item =>\r\n        Object.assign(item, { is_selected: selected_ids.indexOf(item.id) >= 0 })\r\n      )\r\n    },\r\n    filter_users(event) {\r\n      setTimeout(() => {\r\n        if (this.search && this.search !== '') {\r\n          this.filtered_by_search = _cloneDeep(this.all_users).filter(item => {\r\n            return item.fullname\r\n              .toLowerCase()\r\n              .includes(this.search.toLowerCase().trim())\r\n          })\r\n        } else {\r\n          this.filtered_by_search = _cloneDeep(this.all_users)\r\n        }\r\n      }, 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageClientChatMember.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageClientChatMember.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageClientChatMember.vue?vue&type=template&id=21df94f4&scoped=true&\"\nimport script from \"./ManageClientChatMember.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageClientChatMember.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageClientChatMember.vue?vue&type=style&index=0&id=21df94f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21df94f4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"message__body team-messages\">\r\n      <v-system-bar lights-out :height=\"40\" v-if=\"can_manage_members\">\r\n      <v-spacer></v-spacer>\r\n        <v-btn text small @click=\"open_manage_member_dialog\">Manage Members <v-icon right>settings</v-icon></v-btn>\r\n    </v-system-bar>\r\n    <div class=\"messages\" ref=\"messages-container\">\r\n      <v-row no-gutters class=\"pa-3\" v-if=\"can_send_message\">\r\n        <v-spacer></v-spacer>\r\n        <v-col>\r\n          <v-btn\r\n            text\r\n            v-if=\"noMoreData === false && !loading\"\r\n            class=\"view__more_btn overline\"\r\n            @click=\"load_previous\"\r\n            >Load Previous Messages</v-btn\r\n          >\r\n        </v-col>\r\n        <v-spacer></v-spacer>\r\n      </v-row>\r\n      <v-progress-linear\r\n          v-if=\"loading\"\r\n          :indeterminate=\"true\"\r\n        ></v-progress-linear>\r\n      <v-row no-gutters v-if=\"items.length && can_send_message\">\r\n        <v-col md=\"12\" class=\"px-3 py-2\" style=\"min-height: 350px;\">\r\n          <Message\r\n            v-for=\"message in messages(items)\"\r\n            :message=\"message\"\r\n            :key=\"message.id\"\r\n          ></Message>\r\n        </v-col>\r\n      </v-row>\r\n      <div class=\"no-messages\" v-else-if=\"!can_send_message\">\r\n        <Empty headline=\"Client messages unavailable! \"></Empty>\r\n      </div>\r\n      <div class=\"no-messages\" v-else>\r\n        <Empty headline=\"No messages yet\"></Empty>\r\n      </div>\r\n    </div>\r\n    <div class=\"write px-3\">\r\n      <ChatField \r\n        v-if=\"can_send_message\"\r\n        class=\"mt-2\"\r\n        :mentionables=\"mentionables\"\r\n        @typing=\"\"\r\n        @send-message=\"sendMessage\"\r\n      ></ChatField>\r\n    </div>\r\n\r\n    <ManageClientChatMember\r\n      ref=\"manage_group_members_dialog\"\r\n      :conversation=\"activeChat\"\r\n    ></ManageClientChatMember>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as apiTo from './api'\r\nimport { global_utils } from '@/global_utils/global_utils'\r\nimport { list_functionality } from '@/services/list-functionality/list-functionality'\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\n\r\n// Components\r\n\r\nimport Empty from '@/common/Empty.vue'\r\nimport ManageClientChatMember from '@/modules/ProjectPreview-Messages/components/ManageClientChatMember.vue'\r\nimport ChatField from '@/common/ChatBox/ChatField.vue'\r\nimport Message from '@/modules/Chat/components/Message/Message.vue'\r\n\r\nexport default {\r\n  name : 'ClientMessages',\r\n  mixins: [global_utils, list_functionality],\r\n  props: {\r\n    id: [Number, String]\r\n  },\r\n  components: {\r\n    Empty,\r\n    ManageClientChatMember,\r\n    ChatField,\r\n    Message\r\n  },\r\n\r\n  data: () => ({\r\n    loading: false,\r\n    message: null,\r\n    can_message: false,\r\n    activeChat : null,\r\n  }),\r\n\r\n  computed: {\r\n    loggedUser() {\r\n      return this.$store.getters.user\r\n    },\r\n    can_manage_members(){\r\n      if (this.loggedUser.is_admin) return true\r\n      var role = Object.values(this.loggedUser.user_roles)[0]\r\n      return ~role.indexOf('manager') ? true : false\r\n    },\r\n    can_send_message() {\r\n      return this.can_message\r\n    },\r\n    mentionables() {\r\n      if (!this.activeChat) { return [] }\r\n      return this.activeChat.members\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.loading = true\r\n    this.getConvoDetails(this.id)\r\n  },\r\n  mounted() {\r\n    this.$pusher.authenticate()\r\n    this.subscribePusher()\r\n  },\r\n  beforeDestroy() {\r\n    this.$pusher.unsubscribe(`private-project.client-message.${this.id}`)\r\n  },\r\n  methods: {\r\n    open_manage_member_dialog() {\r\n      this.$refs.manage_group_members_dialog.open_dialog()\r\n    },\r\n    getConvoDetails(id) {\r\n      apiTo.get_client_convo_details(id).then(({ data }) => {\r\n        this.activeChat = data\r\n      })\r\n      .finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    scrollToBottomDiv() {\r\n      setTimeout(() => {\r\n        const wrapper = this.$refs['messages-container']\r\n        if (wrapper) {\r\n          wrapper.scrollTop = wrapper.scrollHeight\r\n        }\r\n      }, 1)\r\n    },\r\n    load_previous() {\r\n      this.load_more_via_url(`api/projects/${this.id}/messages?type=client`)\r\n    },\r\n    add_new_message(message) {\r\n      if (!this.items.some(msg => msg.id === message.id)) {\r\n        this.items.unshift(message)\r\n      }\r\n    },\r\n    user_can_message(can) {\r\n      this.can_message = can\r\n      if (can) {\r\n        this.fill_table_via_url(`api/projects/${this.id}/messages?type=client`)\r\n        setTimeout(() => { this.scrollToBottomDiv() } ,1 )\r\n        console.log('Client chat connected')\r\n        // this.$event.$emit('open_snackbar', 'Client chat connected') \r\n      }\r\n      else\r\n        console.log('Client chat unavailable for you.')\r\n    },\r\n    subscribePusher() {\r\n      const client_message_channel = this.$pusher.subscribe(\r\n        `private-project.client-message.${this.id}`\r\n      )\r\n      client_message_channel.bind('ProjectClientMessage', data => {\r\n        if (data.type === 'client') this.add_new_message(data.message)\r\n      })\r\n      client_message_channel.bind('pusher:subscription_succeeded', () =>\r\n        this.user_can_message(true)\r\n      )\r\n      client_message_channel.bind('pusher:subscription_error', status =>\r\n        this.user_can_message(false)\r\n      )\r\n    },\r\n    sendMessage(data) {\r\n      let formData = new FormData();\r\n          formData.append('message', data.message)\r\n          formData.append('type','client')\r\n          formData.append('from_id', this.loggedUser.id)\r\n\r\n          if (data.files.length > 0) {\r\n            formData.append('file',  data.files[0])\r\n          }\r\n\r\n      apiTo.send_message(this.id, formData).then(({ data }) => {\r\n        this.add_new_message(data)\r\n      }).\r\n      finally(() => {\r\n        this.scrollToBottomDiv()\r\n        this.$event.$emit('btnsending_off', false)\r\n      })\r\n    },\r\n    messages(items) {\r\n      return _cloneDeep(items).reverse()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/_variables';\r\n\r\n.message__body {\r\n  border: 1px solid $borderLightGray;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n\r\n  @include styledScrollFor('.messages'); //style the scroll\r\n\r\n  .messages {\r\n    background-color: $white;\r\n    overflow: auto;\r\n    max-height: 462px;\r\n    border-bottom: 1px solid $borderLightGray;\r\n  }\r\n\r\n  .write {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    align-items: center;\r\n    background-color: $white;\r\n    .write__actions {\r\n      .action {\r\n        margin: 5px 7px;\r\n        color: $lightGray-2;\r\n        cursor: pointer;\r\n\r\n        &:hover {\r\n          color: $blue;\r\n        }\r\n      }\r\n    }\r\n    .avatar-wrapper {\r\n      padding: 3px;\r\n      .sender-avatar {\r\n        width: 40px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .view__more {\r\n    text-align: center;\r\n    padding: 10px;\r\n    border-top: 1px solid $borderLightGray;\r\n    background-color: $white;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    .view__more_btn {\r\n      color: $tableDarkText;\r\n    }\r\n  }\r\n\r\n  .no-messages {\r\n    padding: 20px;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClientMessages.vue?vue&type=template&id=d650a538&scoped=true&\"\nimport script from \"./ClientMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./ClientMessages.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClientMessages.vue?vue&type=style&index=0&id=d650a538&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d650a538\",\n  null\n  \n)\n\nexport default component.exports","import _debounce from 'lodash/debounce'\r\nimport makeRequestTo from '@/services/makeRequestTo'\r\nimport request from '@/services/axios_instance'\r\n\r\nexport const methods = {\r\n  methods: {\r\n    resetPagination() {\r\n      this.pagination.current = 1\r\n      this.pagination.total = 0\r\n      this.noMoreData = false\r\n    },\r\n    clear_selected() {\r\n      this.selected = []\r\n      this.$event.$emit('clear_selected', [])\r\n    },\r\n    add_item(api_name, item, dynamic_api = null) {\r\n      makeRequestTo[api_name](item, dynamic_api)\r\n        .then(response => {\r\n          const new_items = response.data\r\n          if (Array.isArray(new_items)) {\r\n            new_items.reverse().forEach(new_item => this.items.push(new_item))\r\n          } else {\r\n            this.items.push(new_items)\r\n          }\r\n          this.clear_selected()\r\n          this.$refs.add_dialog.clear_and_close()\r\n          this.$event.$emit('open_snackbar', this.table_config.add_message)\r\n        })\r\n        .finally(() => this.$event.$emit('btnloading_off', false))\r\n    },\r\n\r\n    extract_per_page(string) {\r\n      const starts = string.search('per_page')\r\n      return string.substring(starts + 9, starts + 10)\r\n    },\r\n\r\n    calc_per_page_items(page_rows, total_rows) {\r\n      const items = [5, 10, 15, 20, 25]\r\n\r\n      if (!items.includes(page_rows)) items.push(page_rows)\r\n\r\n      if (!items.includes(total_rows) && total_rows <= 25)\r\n        items.push(total_rows)\r\n\r\n      return items\r\n    },\r\n\r\n    update_item(api_name, item, dynamic_api = null) {\r\n      makeRequestTo[api_name](this.edit_item.id, item, dynamic_api)\r\n        .then(response => {\r\n          const index = this.items.findIndex(\r\n            data_item => data_item.id === response.data.id\r\n          )\r\n          if (~index) this.items.splice(index, 1, response.data)\r\n          this.edit_item = {\r\n            id: null,\r\n            fields: null\r\n          }\r\n          this.edit_dialog = false\r\n          this.clear_selected()\r\n          this.$event.$emit('open_snackbar', this.table_config.update_message)\r\n        })\r\n        .finally(() => this.$event.$emit('btnloading_off', false))\r\n    },\r\n\r\n    delete_item(api_name, dynamic_api = null) {\r\n      makeRequestTo[api_name](this.delete_item_id, dynamic_api)\r\n        .then(() => {\r\n          const index = this.items.findIndex(\r\n            data_item => data_item.id === this.delete_item_id\r\n          )\r\n          if (~index) this.items.splice(index, 1)\r\n          this.delete_item_id = null\r\n          this.delete_dialog = false\r\n          this.clear_selected()\r\n          this.$event.$emit('open_snackbar', this.table_config.delete_message)\r\n        })\r\n        .finally(() => this.$event.$emit('btnloading_off', false))\r\n    },\r\n    bulk_delete(api_name) {\r\n      var payload = {\r\n        ids: this.selected.map(ii => {\r\n          return ii.id\r\n        })\r\n      }\r\n\r\n      makeRequestTo[api_name]({ data: payload })\r\n        .then(({ data }) => {\r\n          this.selected.forEach(item => {\r\n            const index = this.items.findIndex(\r\n              data_item => data_item.id === item.id\r\n            )\r\n            if (~index) this.items.splice(index, 1)\r\n          })\r\n          this.bulk_delete_dialog = false\r\n          this.clear_selected()\r\n          this.$event.$emit('open_snackbar', data.message)\r\n        })\r\n        .finally(() => {\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n    bulk_delete_via_url(url) {\r\n      var payload = {\r\n        ids: this.selected.map(ii => {\r\n          return ii.id\r\n        })\r\n      }\r\n      request\r\n        .delete(url, { data: payload })\r\n        .then(({ data }) => {\r\n          this.selected.forEach(item => {\r\n            const index = this.items.findIndex(\r\n              data_item => data_item.id === item.id\r\n            )\r\n            if (~index) this.items.splice(index, 1)\r\n          })\r\n          this.bulk_delete_dialog = false\r\n          this.clear_selected()\r\n          this.$event.$emit('open_snackbar', data.message)\r\n        })\r\n        .finally(() => {\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n    open_edit_dialog(item) {\r\n      this.edit_dialog = true\r\n      this.$set(this.edit_item, 'id', item.id)\r\n      this.$set(this.edit_item, 'fields', item)\r\n    },\r\n\r\n    open_delete_dialog(item) {\r\n      this.delete_dialog = true\r\n      this.delete_item_id = item.id\r\n    },\r\n\r\n    open_bulk_delete_dialog(items) {\r\n      this.bulk_delete_dialog = true\r\n      this.selected = items\r\n    },\r\n\r\n    fill_table(api_name, nested_response = false, dynamic_api = null) {\r\n      this.loading = true\r\n      makeRequestTo[api_name](dynamic_api)\r\n        .then(response => {\r\n          this.items_response = response.data\r\n          if (nested_response) {\r\n            this.items = response.data.data\r\n            this.pagination.current = response.data.current_page\r\n            this.pagination.total = response.data.last_page\r\n            this.hasMoreData()\r\n          } else {\r\n            this.items = response.data\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.clear_selected()\r\n          this.loading = false\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n    fill_table_via_url(url, nested_response = true) {\r\n      this.loading = true\r\n      var payload = { page: this.pagination.current }\r\n      request\r\n        .get(url, { params: payload })\r\n        .then(response => {\r\n          this.items_response = response.data\r\n          if (nested_response) {\r\n            this.items = response.data.data\r\n            this.pagination.current = response.data.current_page\r\n            this.pagination.total = response.data.last_page\r\n            this.hasMoreData()\r\n          } else {\r\n            this.items = response.data\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.clear_selected()\r\n          this.loading = false\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n    load_more_on_table(api_name) {\r\n      this.loading = true\r\n      var payload = { page: this.pagination.current + 1 }\r\n      makeRequestTo[api_name]({ params: payload })\r\n        .then(({ data }) => {\r\n          this.items_response = data.data\r\n          data.data.forEach(item => {\r\n            this.items.push(item)\r\n          })\r\n          this.pagination.current = data.current_page\r\n          this.pagination.total = data.last_page\r\n          this.hasMoreData()\r\n        })\r\n        .finally(() => {\r\n          this.clear_selected()\r\n          this.loading = false\r\n          this.scrollToBottom()\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n    load_more_via_url(url) {\r\n      this.loading = true\r\n      var payload = { page: this.pagination.current + 1 }\r\n      request\r\n        .get(url, { params: payload })\r\n        .then(({ data }) => {\r\n          this.items_response = data.data\r\n          data.data.forEach(item => {\r\n            this.items.push(item)\r\n          })\r\n          this.pagination.current = data.current_page\r\n          this.pagination.total = data.last_page\r\n          this.hasMoreData()\r\n        })\r\n        .finally(() => {\r\n          this.clear_selected()\r\n          this.loading = false\r\n          this.scrollToBottom()\r\n          this.$event.$emit('btnloading_off', false)\r\n        })\r\n    },\r\n\r\n    fill_table_with_data(data) {\r\n      this.items = data\r\n    },\r\n\r\n    add_table_rows(rows, response) {\r\n      this.items = rows\r\n      this.items_response = response\r\n    },\r\n\r\n    changeSort(column) {\r\n      if (this.sort.sortBy === column) {\r\n        this.sort.descending = !this.sort.descending\r\n      } else {\r\n        this.sort.sortBy = column\r\n        this.sort.descending = false\r\n      }\r\n    },\r\n\r\n    refresh_table(query) {\r\n      makeRequestTo[this.table_config.refresh_table_api_name](query)\r\n        .then(response => {\r\n          this.$event.$emit(\r\n            'open_snackbar',\r\n            this.table_config.refresh_table_message\r\n          )\r\n          this.loading = false\r\n          this.clear_selected()\r\n          this.items_response = response.data\r\n          this.items = response.data.data\r\n        })\r\n        .finally(() => this.$event.$emit('btnloading_off', false))\r\n    },\r\n\r\n    update_table_actions(query) {\r\n      if (query.page) this.page = Number(query.page)\r\n      if (query.per_page) this.rows_per_page = Number(query.per_page)\r\n      if (query.search) this.search = query.search\r\n      if (query.sort) {\r\n        const sort = query.sort.split('|')\r\n        this.sort.sortBy = sort[0]\r\n        if (sort[1] === 'asc') this.sort.descending = false\r\n        else if (sort[1] === 'desc') this.sort.descending = true\r\n      }\r\n    },\r\n    hasMoreData() {\r\n      this.componentKey += 1\r\n      if (this.pagination.current >= this.pagination.total) {\r\n        this.noMoreData = true\r\n      }\r\n    },\r\n    toggleAll() {\r\n      if (this.selected.length) this.clear_selected()\r\n      else this.selected = this.items.slice()\r\n    },\r\n\r\n    setPreferredView(view) {\r\n      window.localStorage.setItem('bzk_prefer_view', view)\r\n      this.view = view\r\n    },\r\n\r\n    getPreferredView() {\r\n      return window.localStorage.getItem('bzk_prefer_view') || 'list'\r\n    },\r\n\r\n    scrollToBottom() {\r\n      setTimeout(() => {\r\n        const wrapper = document.getElementsByClassName('v-data-table__wrapper')\r\n        if (wrapper) {\r\n          wrapper.scrollTop = wrapper.scrollHeight\r\n        }\r\n      }, 1)\r\n    },\r\n    debounce: _debounce(function(value) {\r\n      this.search = value\r\n    }, 500)\r\n  }\r\n}\r\n","import { methods } from './methods'\r\n\r\nexport const list_functionality = {\r\n  mixins: [methods],\r\n  data: () => ({\r\n    edit_dialog: false,\r\n    add_dialog: false,\r\n    delete_dialog: false,\r\n    permissionDialog: false,\r\n    bulk_delete_dialog: false,\r\n    loading: false,\r\n    items: [],\r\n    items_response: null,\r\n    edit_item: {\r\n      id: null,\r\n      fields: null\r\n    },\r\n    delete_item_id: null,\r\n    show_delete_selected: false,\r\n    selected_ids: [],\r\n    selected: [],\r\n    rows_per_page: null,\r\n    page: 1,\r\n    sort: {\r\n      sortBy: null,\r\n      descending: false\r\n    },\r\n    search: '',\r\n    pagination: {\r\n      current: 1,\r\n      total: 0\r\n    },\r\n    noMoreData: false,\r\n    componentKey: 1,\r\n    view: 'list'\r\n  }),\r\n\r\n  watch: {\r\n    selected_ids(new_val) {\r\n      new_val.length > 0\r\n        ? (this.show_delete_selected = true)\r\n        : (this.show_delete_selected = false)\r\n    },\r\n    api_query(query, old_query) {\r\n      const new_per_page = Number(this.extract_per_page(query))\r\n      const old_per_page = Number(this.extract_per_page(old_query)) || null\r\n\r\n      if (\r\n        this.items_response &&\r\n        this.rows_per_page === this.items.length &&\r\n        new_per_page !== old_per_page\r\n      )\r\n        return\r\n\r\n      this.$router.replace({\r\n        name: this.table_config.route_name,\r\n        query: {\r\n          page: this.page,\r\n          per_page: this.rows_per_page,\r\n          search: this.search,\r\n          sort: this.query_for_sorting\r\n        }\r\n      })\r\n      this.loading = true\r\n      this.refresh_table(query)\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}