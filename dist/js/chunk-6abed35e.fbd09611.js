(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6abed35e"],{"174f":function(e,t,i){},"259d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:e.paths},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:n.disabled}},[i("span",{on:{click:function(t){return e.navigate_from_breadcrumb(n)}}},[e._v(" "+e._s(n.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("chevron_right")])],1),e._t("extra")],2)},s=[],a={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(e){if(e.hasOwnProperty("path"))e.path&&this.$router.push({path:e.path});else{var t=e.router_name;t&&this.$router.push({name:t})}}}},l=a,o=(i("fe54"),i("573a"),i("2877")),d=Object(o["a"])(l,n,s,!1,null,"5c807bcd",null);t["a"]=d.exports},"2ab4":function(e,t,i){},3057:function(e,t,i){"use strict";var n=i("af61"),s=i.n(n);s.a},"3a5c":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clients"},[i("clients-dialog",{ref:"add_dialog",attrs:{dialog:e.add_dialog,dialogTitle:"Add New Client"},on:{"update:dialog":function(t){e.add_dialog=t},save:function(t){return e.add_item("add_new_client",t)}}}),i("clients-dialog",{ref:"edit_dialog",attrs:{dialog:e.edit_dialog,dialogTitle:"Edit Client","is-edit-dialog":e.edit_dialog,"fields-to-edit":e.edit_item},on:{"update:dialog":function(t){e.edit_dialog=t},save:function(t){return e.update_item("update_client",t)}}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Client","text-content":"Are you sure you want to delete this client?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_client")}}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Clients","text-content":"Are you sure you want to delete these clients? This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:function(t){return e.bulk_delete("bulk_delete_clients")}}}),"list"===e.view?i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"mdi-account-tie-outline",loading:e.loading,emptyText:"No client yet",title:"Clients",noMoreData:e.noMoreData,showSelect:!0},on:{"load-more":e.load_more,"delete-selected":function(t){return e.open_bulk_delete_dialog(t)}},scopedSlots:e._u([{key:"row-slot",fn:function(t){var n=t.item;return[i("td",{staticClass:"clickable-td"},[i("Avatar",{attrs:{user:n}})],1),i("td",[e._v(e._s(n.email))]),n.telephone?i("td",[e._v(" +"+e._s(n.telephone.countryCallingCode)+" "+e._s(n.telephone.formatNational)+" ")]):i("td"),i("td",[e._v(e._s(n.props?n.props.status:"Active"))]),i("Actions",{attrs:{item:n,permissions:e.$_permissions.get("clients")},on:{delete:function(t){return e.open_delete_dialog(n)},edit:function(t){return e.open_edit_dialog(n)},view:function(t){return e.navigate_to_view_profile(n.id)}}})]}},{key:"empty-slot",fn:function(){return[i("v-btn",{attrs:{dark:"",color:"#3b589e"},on:{click:function(t){e.add_dialog=!0}}},[e._v("Add Client")])]},proxy:!0}],null,!1,1798316540)},[i("template",{slot:"header-toolbar"},[i("table-header",{attrs:{noListButton:!1,noGridButton:!1},on:{click:function(t){e.add_dialog=!0},"click-list-view":function(t){return e.setPreferredView("list")},"click-grid-view":function(t){return e.setPreferredView("grid")}}})],1)],2):i("VueGrid",{key:e.componentKey,attrs:{icon:"mdi-account-tie-outline",emptyText:"No client yet",title:"Clients",showTaskCount:!1,items:e.items,noMoreData:e.noMoreData},on:{"load-more":e.load_more,delete:e.open_delete_dialog,edit:e.open_edit_dialog}},[i("template",{staticClass:"icons",slot:"header-toolbar"},[i("table-header",{attrs:{noListButton:!1,noGridButton:!1},on:{click:function(t){e.add_dialog=!0},"click-list-view":function(t){return e.setPreferredView("list")},"click-grid-view":function(t){return e.setPreferredView("grid")}}})],1)],2)],1)},s=[],a=(i("a481"),i("e06e")),l=i("259d"),o=i("0ebe"),d=i("7f40"),r=i("5b70"),c=i("ee09"),u=i("29d6"),_=i("36ee"),p={name:"Clients",mixins:[a["a"]],components:{Breadcrumb:l["a"],TableHeader:u["a"],VueTable:o["a"],VueGrid:_["a"],ClientsDialog:d["a"],DeleteDialog:r["a"],Actions:c["a"]},mounted:function(){this.$event.$emit("path-change",this.paths),this.view=this.getPreferredView()},data:function(){return{paths:[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:"Clients",disabled:!0,router_name:null}],headers:[{text:"Client",align:"left"},{text:"Email",align:"left"},{text:"Contact No."},{text:"Status"},{text:"Action",value:"action",sortable:!1,align:"center",width:"140px"}],table_config:{route_name:"clients",add_message:"New Client added successfully!",update_message:"Client updated successfully!",delete_message:"Client deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_clients_table"}}},filters:{phoneDisplayForm:function(e){return e.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2 $3")}},watch:{dialog:function(e){this.add_dialog=e},add_dialog:function(e){this.$emit("update:dialog",e)}},created:function(){this.loadClients()},methods:{navigate_to_view_profile:function(e){this.$router.push("/dashboard/clients/profile/".concat(e))},loadClients:function(){this.fill_table_via_url("api/clients")},load_more:function(){this.load_more_via_url("api/clients")}}},m=p,f=(i("3057"),i("2877")),h=Object(f["a"])(m,n,s,!1,null,"e1a9b458",null);t["default"]=h.exports},"573a":function(e,t,i){"use strict";var n=i("c5c4"),s=i.n(n);s.a},"6e63":function(e,t,i){"use strict";var n=i("7d39"),s=i.n(n);s.a},"7d39":function(e,t,i){},"7e7e":function(e,t,i){"use strict";var n=i("174f"),s=i.n(n);s.a},"7f40":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-dialog",{ref:"dialog",attrs:{title:e.dialogTitle,open:e.open,"button2-text":"Save","max-width":800,mainBtnDisabled:!e.readyForSubmit},on:{"update:open":function(t){e.open=t},button1:e.cancel,button2:e.save}},[i("template",{slot:"content"},[i("v-row",{staticClass:"clients__dialog",attrs:{"no-gutters":""}},[i("v-col",{attrs:{xs:"12",sm:"12"}},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{"prepend-inner-icon":"mdi-office-building",label:"Business Name *",dense:"",filled:"","hide-details":"",color:"#657186"},model:{value:e.company_name,callback:function(t){e.company_name="string"===typeof t?t.trim():t},expression:"company_name"}})],1),i("v-col",{staticClass:"py-0 my-0",attrs:{xs:"12",sm:"12"}},[i("p",{staticClass:"owner"},[e._v("Client's Details")])]),e.isEditDialog?e._e():i("v-col",{attrs:{xs:"12",sm:6,md:6}},[i("v-select",{staticClass:"dialog__textfield d-field",attrs:{"prepend-inner-icon":"mdi-account-circle-outline",label:"Client",dense:"",filled:"","hide-details":"",color:"#657186",items:e.is_new_client_items},model:{value:e.is_new_client,callback:function(t){e.is_new_client=t},expression:"is_new_client"}})],1),e.isEditDialog?e._e():i("v-col",{attrs:{xs:"12",sm:6,md:6}},[i("v-select",{staticClass:"dialog__textfield d-field",attrs:{"prepend-inner-icon":"mdi-account-circle-outline",label:e.exists_client_label,dense:"",filled:"","hide-details":"",color:"#657186",items:e.clients_list,disabled:e.is_new_client,"item-text":"fullname","return-object":""},model:{value:e.existing_client,callback:function(t){e.existing_client=t},expression:"existing_client"}})],1),e.is_new_client?i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{"prepend-inner-icon":"mdi-account-settings-outline",label:"First Name *",dense:"",filled:"","hide-details":"",color:"#657186"},model:{value:e.first_name,callback:function(t){e.first_name="string"===typeof t?t.trim():t},expression:"first_name"}})],1),i("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{"prepend-inner-icon":"mdi-account-settings-outline",label:"Last Name *",dense:"",filled:"","hide-details":"",color:"#657186"},model:{value:e.last_name,callback:function(t){e.last_name="string"===typeof t?t.trim():t},expression:"last_name"}})],1),i("v-col",{attrs:{xs:"12",sm:"12"}},[i("vue-phone-number-input",{staticClass:"dialog__textfield d-field",attrs:{size:"lg",clearable:"","show-code-on-list":"","default-country-code":e.defaultCountryCode},on:{update:e.showUpdate,"phone-number-blur":e.telephone_on_blur},model:{value:e.contact_number,callback:function(t){e.contact_number=t},expression:"contact_number"}})],1),i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-text-field",{staticClass:"dialog__email d-field",attrs:{"prepend-inner-icon":"mdi-email-receive",label:"Contact Email *",dense:"",filled:"","hide-details":"",color:"#657186"},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}})],1),i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-select",{staticClass:"dialog__selectfield d-field",attrs:{"prepend-inner-icon":"mdi-account-question-outline",label:"Status *",items:e.status_items,dense:"",filled:"","hide-details":"",color:"#657186"},model:{value:e.status,callback:function(t){e.status="string"===typeof t?t.trim():t},expression:"status"}})],1),e.isEditDialog?e._e():i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-text-field",{staticClass:"dialog__password d-field",attrs:{"prepend-inner-icon":"mdi-account-lock-outline","append-icon":e.show_password?"visibility_off":"visibility",type:e.show_password?"text":"password",label:"Password *",dense:"",filled:"","hide-details":"",color:"#657186"},on:{"click:append":function(t){e.show_password=!e.show_password}},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1),e.isEditDialog?e._e():i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-text-field",{staticClass:"dialog__password d-field",attrs:{"prepend-inner-icon":"mdi-account-key-outline","append-icon":e.show_repeat_password?"visibility_off":"visibility",type:e.show_repeat_password?"text":"password",label:"Repeat Password *",dense:"",filled:"","hide-details":"",color:"#657186"},on:{"click:append":function(t){e.show_repeat_password=!e.show_repeat_password}},model:{value:e.repeat_password,callback:function(t){e.repeat_password="string"===typeof t?t.trim():t},expression:"repeat_password"}})],1)],1):e._e()],1)],1)],2)},s=[],a=(i("7f7f"),i("57e5")),l=i("1be9"),o={name:"ClientsDialog",components:{CustomDialog:a["a"]},props:{dialog:Boolean,dialogTitle:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,show_password:!1,show_repeat_password:!1,first_name:null,last_name:null,company_name:null,telephone:null,contact_number:null,contact_name:null,email:null,status:"Active",location:null,password:null,repeat_password:null,status_items:[{id:1,text:"Active",value:"Active"},{id:2,text:"Inactive",value:"Inactive"}],telephone_is_valid:!1,defaultCountryCode:"CA",is_new_client:!0,is_new_client_items:[{text:"Add as new client",value:!0},{text:"Attach to existing client",value:!1}],clients_list:[],existing_client:null}},created:function(){this.get_all_clients()},watch:{dialog:function(e){this.open=e},open:function(e){this.$emit("update:dialog",e)},fieldsToEdit:{handler:function(e){this.isEditDialog&&this.update_fields(e)},deep:!0},is_new_client:function(e){e&&(this.existing_client=null)}},computed:{readyForSubmit:function(){return this.validation_passed()},exists_client_label:function(){return this.is_new_client?"Enter client details below":"Select from existing clients *"}},methods:{cancel:function(){this.open=!1},validation_passed:function(){if(!this.is_new_client)return this.existing_client&&this.company_name;var e=!0;return this.telephone&&(e=this.telephone_is_valid),this.isEditDialog?e&&this.first_name&&this.last_name&&this.company_name&&this.email&&this.status:e&&this.password&&this.repeat_password&&this.first_name&&this.last_name&&this.company_name&&this.email&&this.status},save:function(){if(this.is_new_client){var e={first_name:this.first_name,last_name:this.last_name,company_name:this.company_name,telephone:this.telephone,contact_name:this.contact_name,email:this.email,status:this.status,location:this.location};if(!this.isEditDialog){if(this.password!==this.repeat_password)return this.$event.$emit("open_snackbar","Passwords don't match","error"),void this.$event.$emit("btnloading_off",!1);e.password=this.password,e.password_confirmation=this.repeat_password}this.$emit("save",e)}else this.$emit("save",{company_name:this.company_name,client_id:this.existing_client.id})},update_fields:function(e){var t=e.fields,i=Object.assign({},t);this.first_name=i.first_name,this.last_name=i.last_name,this.company_name=i.company.name||null,this.contact_name=i.company.others.contact_name||null,this.email=i.email,this.status=i.props.status||"Active",this.location=i.props.location||null,i.telephone?(this.contact_number=i.telephone.phoneNumber,this.defaultCountryCode=i.telephone.countryCode,this.telephone_is_valid=!0):(this.contact_number=null,this.defaultCountryCode=null),this.is_new_client=!0},clearAll:function(){this.first_name="",this.last_name="",this.company_name="",this.location="",this.contact_name="",this.telephone=null,this.email="",this.status="Active",this.password="",this.repeat_password="",this.telephone_is_valid=!1,this.existing_client=null,this.is_new_client=!0},clear_and_close:function(){this.clearAll(),this.cancel()},showUpdate:function(e){this.telephone_is_valid=e.isValid,this.telephone=e.isValid?e:null},telephone_on_blur:function(){this.telephone_is_valid||this.$event.$emit("open_snackbar","Invalid Phone format","error")},get_all_clients:function(){var e=this;l["a"].get("api/company/clients").then((function(t){var i=t.data;e.clients_list=i}))}}},d=o,r=(i("6e63"),i("2877")),c=Object(r["a"])(d,n,s,!1,null,"d8125642",null);t["a"]=c.exports},af61:function(e,t,i){},c5c4:function(e,t,i){},ee09:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[e.hasEdit?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.can_edit,expression:"can_edit"}],attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{dense:"",icon:""},on:{click:function(t){return e.handle_action("edit")}}},n),[i("v-icon",[e._v(e._s(e.editIcon))])],1)]}}],null,!1,4170341451)},[i("span",[e._v("Edit")])]):e._e(),e.hasView?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.can_view,expression:"can_view"}],attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{dense:"",icon:""},on:{click:function(t){return e.handle_action("view")}}},n),[i("v-icon",[e._v(e._s(e.viewIcon))])],1)]}}],null,!1,701816587)},[i("span",[e._v("View")])]):e._e(),e.hasDelete?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.can_delete,expression:"can_delete"}],attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{dense:"",icon:""},on:{click:function(t){return e.handle_action("delete")}}},n),[i("v-icon",[e._v(e._s(e.deleteIcon))])],1)]}}],null,!1,4164065227)},[i("span",[e._v("Delete")])]):e._e(),e._t("extra")],2)},s=[],a={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-circle-edit-outline"},viewIcon:{type:String,default:"mdi-eye-circle-outline"},deleteIcon:{type:String,default:"mdi-delete-circle-outline"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(e){this.item&&this.$emit(e,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},l=a,o=(i("7e7e"),i("2877")),d=Object(o["a"])(l,n,s,!1,null,null,null);t["a"]=d.exports},fe54:function(e,t,i){"use strict";var n=i("2ab4"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-6abed35e.fbd09611.js.map