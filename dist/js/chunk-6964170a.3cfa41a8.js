(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6964170a"],{"0edc5":function(e,t,i){},2168:function(e,t,i){},"259d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:e.paths},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:a.disabled}},[i("span",{on:{click:function(t){return e.navigate_from_breadcrumb(a)}}},[e._v(" "+e._s(a.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("chevron_right")])],1),e._t("extra")],2)},o=[],n={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(e){if(e.hasOwnProperty("path"))e.path&&this.$router.push({path:e.path});else{var t=e.router_name;t&&this.$router.push({name:t})}}}},s=n,r=(i("5e17"),i("79a2"),i("2877")),l=Object(r["a"])(s,a,o,!1,null,"3cda09ee",null);t["a"]=l.exports},2699:function(e,t,i){},"29d6":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{staticClass:"table-header",attrs:{wrap:""}},[i("breadcrumb",{attrs:{paths:e.paths}}),i("v-flex",[e.noButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click")}}},[i("v-icon",[e._v("add")])],1),e.noSortButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-sort-by")}}},[i("v-icon",[e._v("sort")])],1),e.noListButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-list-view")}}},[i("v-icon",[e._v("list")])],1),e.noGridButton?e._e():i("v-btn",{staticClass:"add__btn mr-2",attrs:{fab:"",small:"",dark:"",color:"#3b589e"},on:{click:function(t){return e.$emit("click-grid-view")}}},[i("v-icon",[e._v("mdi-view-dashboard")])],1),e._t("form-btn")],2)],1)},o=[],n=i("259d"),s={name:"TableHeader",props:{paths:{type:Array,default:[]},noButton:{type:Boolean,default:!1},noListButton:{type:Boolean,default:!0},noGridButton:{type:Boolean,default:!0},noSortButton:{type:Boolean,default:!0}},data:function(){return{fab:!0}},components:{Breadcrumb:n["a"]}},r=s,l=(i("337a"),i("2877")),c=Object(l["a"])(r,a,o,!1,null,"b8bfd1cc",null);t["a"]=c.exports},"32f3":function(e,t,i){"use strict";var a=i("2168"),o=i.n(a);o.a},"337a":function(e,t,i){"use strict";var a=i("9e25"),o=i.n(a);o.a},"382f":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice"},[i("table-header",{attrs:{paths:e.paths},on:{click:e.open_create_dialog}}),i("StepperInvoiceDialog",{ref:"invoiceEditDialog",attrs:{type:"edit"},on:{updated:e.invoice_updated}}),i("StepperInvoiceDialog",{ref:"invoiceCreateDialog",attrs:{type:"create"},on:{created:function(t){return e.items.unshift(t)}}}),i("ViewInvoice",{ref:"view_invoice_dialog",attrs:{item:e.view_item,open:e.view_invoice_dialog},on:{close:function(t){e.view_invoice_dialog=!1}}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Invoice","text-content":"Are you sure you want to delete this invoice?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:e.delete_invoice}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Invoices","text-content":"Are you sure you want to delete these invoices? This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:function(t){return e.bulk_delete("bulk_delete_invoices")}}}),i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"list",loading:e.loading,title:"Invoice",noMoreData:e.noMoreData,showSelect:!0},on:{"delete-selected":function(t){return e.open_bulk_delete_dialog(t)},"load-more":e.load_more},scopedSlots:e._u([{key:"row-slot",fn:function(t){var a=t.item;return[i("td",{on:{click:function(t){return e.open_view_dialog(a)}}},[e._v("#INV-"+e._s(a.id))]),i("td",{staticClass:"clickable-td",on:{click:function(t){return e.open_view_dialog(a)}}},[e._v(" "+e._s(e._f("ucwords")(a.title))+" ")]),i("td",[e._v(e._s(e._f("format")(a.due_date)))]),i("td",[i("v-avatar",{attrs:{size:"30",color:"teal"}},[i("v-img",{attrs:{src:a.billedTo.image_url,title:a.billedTo.fullname},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("span",{staticClass:"white--text headline"},[e._v("C")])]},proxy:!0}],null,!0)})],1),e._v(" "+e._s(e._f("ucwords")(a.billedTo.fullname))+" ")],1),i("td",[e._v(e._s(e._f("ucwords")(a.status)))]),i("td",[e._v(e._s(e._f("money")(a.total_amount)))]),i("Actions",{attrs:{item:a,permissions:e.$_permissions.get("invoices")},on:{delete:function(t){return e.open_delete_dialog(a)},edit:function(t){return e.open_edit_dialog(a)},view:function(t){return e.open_view_dialog(a)}},scopedSlots:e._u([e.can_pay(a)?{key:"extra",fn:function(){return[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-btn",e._g({attrs:{dense:"",icon:""},on:{click:function(t){return e.navigatePayment(a)}}},o),[i("v-icon",{attrs:{small:""}},[e._v("mdi-cash")])],1)]}}],null,!0)},[i("span",[e._v("Pay")])])]},proxy:!0}:null],null,!0)})]}},{key:"empty-slot",fn:function(){return[i("v-btn",{attrs:{dark:"",color:"#3b589e"},on:{click:e.open_create_dialog}},[e._v(" Add Invoice")])]},proxy:!0}])})],1)},o=[],n=(i("8e6e"),i("456d"),i("ac6a"),i("20d6"),i("96cf"),i("1da1")),s=i("ade3"),r=i("e6d3"),l=i("e06e"),c=i("2f62"),d=i("0644"),u=i.n(d),p=i("579d"),v=i("29d6"),_=i("5b70"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("v-card",{staticClass:"email__dialog"},[i("v-card-title",{staticClass:"dialog__header"},[i("span",{staticClass:"dialog__title"},[e._v("Send Invoice Options")]),i("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:""},on:{click:e.clear_and_close}},[i("v-icon",[e._v("close")])],1)],1),i("v-card-text",{staticClass:"dialog__body"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-select",{staticClass:"dialog__selectfield",attrs:{label:"Status",items:e.status_items,solo:"","hide-details":"",color:"#657186"},model:{value:e.selected_status,callback:function(t){e.selected_status=t},expression:"selected_status"}})],1)],1)],1),i("v-card-actions",{staticClass:"dialog__actions"},[i("v-btn",{on:{click:e.clear_and_close}},[e._v("Cancel")]),i("v-btn",{attrs:{disabled:e.status_disabled},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)},f=[],b=i("1be9");function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y={name:"EmailDialog",props:{dialog:Boolean},data:function(){return{open:!1,status_items:[{id:1,text:"Once",value:"once"},{id:2,text:"Weekly",value:"weekly"},{id:3,text:"Monthly",value:"monthly"}],selected_status:null}},computed:g(g({},Object(c["c"])("invoice",["invoice_id"])),{},{status_disabled:function(){return!this.selected_status}}),watch:{dialog:function(e){this.open=e},open:function(e){this.$emit("update:dialog",e)}},methods:{clear_and_close:function(){this.$store.commit("invoice/set_invoice_id",null),Object.assign(this.$data,this.$options.data.apply(this)),this.open=!1},save:function(){b["a"].post("api/invoice/email",{invoice_id:this.invoice_id,iteration:this.selected_status}),this.clear_and_close()}}},w=y,O=(i("de01"),i("3c5c"),i("2877")),j=Object(O["a"])(w,m,f,!1,null,"b4785a44",null),x=j.exports,C=i("e93d"),k=i("9107"),D=i("ee09"),P=i("0ebe"),S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-dialog",{ref:"dialog",attrs:{title:e.dialogTitle,hasFooter:!1,open:e.open,maxWidth:"800px"},on:{"update:open":function(t){e.open=t}}},[i("template",{slot:"content"},[i("v-stepper",{attrs:{flat:""},model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[i("v-stepper-header",{attrs:{flat:""}},[i("v-stepper-step",{attrs:{rules:[e.stepOneRules],complete:e.stepper>1,step:"1"}},[e._v("Basic Info")]),i("v-divider"),i("v-stepper-step",{attrs:{rules:[e.stepTwoRules],complete:e.stepper>2,step:"2"}},[e._v("Additional Info")]),i("v-divider"),i("v-stepper-step",{attrs:{step:"3"}},[e._v("Customize & Save")])],1),i("v-stepper-items",[i("v-stepper-content",{attrs:{step:"1"}},[i("v-card",{staticClass:"mb-12",attrs:{flat:""}},[i("StepOne")],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-spacer"),i("v-btn",{staticClass:"mx-1",attrs:{color:"primary",disabled:!e.can_proceed_two},on:{click:function(t){e.stepper=2}}},[e._v(" Next "),i("v-icon",{attrs:{right:""}},[e._v("mdi-arrow-right")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",{staticClass:"mb-12",attrs:{flat:""}},[i("StepTwo")],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-btn",{staticClass:"mx-1",attrs:{outlined:"",text:""},on:{click:function(t){e.stepper=1}}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" Previous ")],1),i("v-spacer"),i("v-btn",{staticClass:"mx-1",attrs:{color:"primary",disabled:!e.can_proceed_three},on:{click:function(t){e.stepper=3}}},[e._v(" Next "),i("v-icon",{attrs:{right:""}},[e._v("mdi-arrow-right")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"3"}},[i("v-card",{staticClass:"mb-12",attrs:{flat:""}},[i("StepThree")],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-btn",{staticClass:"mx-1",attrs:{outlined:"",text:""},on:{click:function(t){e.stepper=2}}},[i("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" Previous ")],1),i("v-spacer"),i("v-btn",{staticClass:"mx-1",attrs:{outlined:"",color:"primary",loading:e.btnloading,disabled:!e.can_submit,text:""},on:{click:e.save_invoice}},[e._v(" "+e._s(e.buttonLabel)+" "),i("v-icon",{attrs:{right:""}},[e._v("mdi-content-save-move-outline")])],1)],1)],1)],1)],1)],1)],2)},$=[],T=(i("6762"),i("2fdb"),i("57e5")),I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{attrs:{"no-gutters":""}},["create"!==e.dialog.type?i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Invoice ID")]):e._e(),"create"!==e.dialog.type?i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("v-text-field",{staticClass:"textfield",attrs:{disabled:"edit"===e.dialog.type,outlined:"",dense:"",color:"#657186",solo:"","hide-details":"",flat:"",placeholder:"#",value:"#INV-"+e.invoice_id}})],1):e._e(),i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Invoice Title "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("v-text-field",{staticClass:"titlefield",attrs:{color:"#657186",solo:"","hide-details":"",flat:"",dense:"",outlined:"",placeholder:"Add Invoice Title *"},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}})],1),i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Select Type "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("v-select",{attrs:{disabled:"view"===e.dialog.type,solo:"",outlined:"","full-width":"",dense:"","hide-details":"",color:"#657186",flat:"",items:["hourly","monthly"],placeholder:"Select Invoice Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),"hourly"===e.type?i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Select Project "),i("span",{staticClass:"required"},[e._v("*")])]):e._e(),"hourly"===e.type?i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("v-select",{attrs:{clearable:"",solo:"","hide-details":"",color:"#657186",flat:"","full-width":"",outlined:"",dense:"",items:e.projects,value:e.selected_project,"item-text":"title","item-value":"id",placeholder:"Select Project"},on:{change:e.setBillingTargets}})],1):e._e(),i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Invoice Date "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("date-picker",{staticClass:"textfield",attrs:{hasButtons:!1,dense:"",outlined:"","hide-details":"",color:"#657186",flat:"",placeholder:"Select Date",value:e.date,max:e.due_date},on:{input:function(t){return e.update_date({date:t,field:"date"})}}})],1),i("v-col",{staticClass:"label",attrs:{md:"3",sm:"4"}},[e._v("Due Date "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{staticClass:"value",attrs:{md:"9",sm:"8"}},[i("date-picker",{staticClass:"textfield",attrs:{hasButtons:!1,dense:"",outlined:"","hide-details":"",color:"#657186",flat:"",placeholder:"Select Date",value:e.due_date,min:e.date},on:{input:function(t){return e.update_date({date:t,field:"due_date"})}}})],1),i("v-col",{attrs:{md:"3",sm:"4"}},[e._v("Billed From "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{attrs:{md:"9",sm:"8"}},[i("v-autocomplete",{attrs:{items:e.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:e.billed_from,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(t){return e.show_add_member_dialog("billed_from")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",e._b({attrs:{tile:"",outlined:""}},"v-chip",t.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[e._v("mdi-account-circle")])],1),e._v(" "+e._s(t.item.fullname)+" ")],1)]}},{key:"item",fn:function(t){var a=t.item;return[[i("v-list-item-avatar",[i("img",{attrs:{src:a.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(a.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:e._s(a.job_title)}})],1)]]}}]),model:{value:e.billed_from,callback:function(t){e.billed_from=t},expression:"billed_from"}})],1),i("v-col",{attrs:{md:"3",sm:"4"}},[e._v("Billed To "),i("span",{staticClass:"required"},[e._v("*")])]),i("v-col",{attrs:{md:"9",sm:"8"}},[i("v-autocomplete",{attrs:{items:e.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:e.billed_to,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(t){return e.show_add_member_dialog("billed_to")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",e._b({attrs:{tile:"",outlined:""}},"v-chip",t.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[e._v("mdi-account-circle")])],1),e._v(" "+e._s(t.item.fullname)+" ")],1)]}},{key:"item",fn:function(t){var a=t.item;return[i("v-list-item-avatar",[i("img",{attrs:{src:a.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(a.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:e._s(a.job_title)}})],1)]}}]),model:{value:e.billed_to,callback:function(t){e.billed_to=t},expression:"billed_to"}})],1),i("teams-dialog",{ref:"add_dialog",attrs:{title:"Add New Member",dialog:e.add_dialog},on:{"update:dialog":function(t){e.add_dialog=t},save:e.add_member,"close-dialog":function(t){e.add_dialog=!1}}})],1)},E=[],B=i("d4e9"),A=i("c97a"),R=i("23ca");function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var N={name:"StepOne",components:{DatePicker:A["a"],TeamsDialog:R["a"]},data:function(){return{members:[],original:[],selected:0,add_dialog:!1,target_add:""}},mounted:function(){var e=this;setTimeout((function(){e.getMembers()}),1)},computed:L(L({},Object(c["c"])("invoice",["projects","selected_project","due_date","date","dialog","invoice_id","type","company_logo","dialog"])),{},{billed_to:{get:function(){return this.$store.getters["invoice/billed_to"]},set:function(e){this.$store.commit("invoice/set_billed_to",e)}},billed_from:{get:function(){return this.$store.getters["invoice/billed_from"]},set:function(e){this.$store.commit("invoice/set_billed_from",e)}},type:{get:function(){return this.$store.getters["invoice/type"]},set:function(e){this.set_type(e)}},title:{get:function(){return this.$store.getters["invoice/title"]},set:function(e){this.$store.commit("invoice/set_title",e)}}}),watch:{type:function(e){"monthly"===e&&this.type_changed_to_monthly()}},methods:L(L(L({},Object(c["b"])("invoice",["type_changed_to_monthly"])),Object(c["d"])("invoice",["init_date","set_type","set_selected_project","update_date"])),{},{setBillingTargets:function(e){this.set_selected_project(e)},setFrom:function(e){this.billed_from=e},setTo:function(e){this.billed_to=e},getMembers:function(){var e=this;B["a"].get_all_teams().then((function(t){var i=t.data;e.original=u()(i),e.members=i}))},show_add_member_dialog:function(e){this.target_add=e,this.add_dialog=!0},add_member:function(e){var t=this;B["a"].add_new_team(e).then((function(e){var i=e.data;t.members.push(i),"billed_from"===t.target_add?t.billed_from=i.id:"billed_to"===t.target_add&&(t.billed_to=i.id),t.$refs.add_dialog.clear_and_close()})).finally((function(){t.target_add="",t.$event.$emit("btnloading_off",!1)}))}})},q=N,F=(i("6b43"),Object(O["a"])(q,I,E,!1,null,"29785622",null)),H=F.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"12"}},[i("TableSection")],1),i("v-col",{staticClass:"my-2",attrs:{md:"12"}},[i("BottomRight")],1),i("v-col",{staticClass:"label mb-2",attrs:{md:"3",sm:"4"}},[e._v("Notes")]),i("v-col",{staticClass:"value mb-2",attrs:{md:"9",sm:"8"}},[i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Notes - any revelant information not already covered",value:e.notes,disabled:"view"===e.dialog.type,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(t){return e.update_textarea(t,"notes")}}})],1),i("v-divider"),i("v-col",{staticClass:"label mb-2",attrs:{md:"3",sm:"4"}},[e._v("Terms")]),i("v-col",{staticClass:"value mb-2",attrs:{md:"9",sm:"8"}},[i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Terms and conditions - late fees, payment methods, delivery schedule",value:e.terms,disabled:"view"===e.dialog.type,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(t){return e.update_textarea(t,"terms")}}})],1)],1)},J=[],z=i("0885"),G=i("210b");function W(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?W(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var K={name:"StepTwo",components:{TableSection:z["a"],BottomRight:G["a"]},computed:Y({},Object(c["c"])("invoice",["notes","terms","dialog"])),methods:{update_textarea:function(e,t){this.$store.commit("invoice/set_textarea",{new_val:e,field:t})},isEmptyField:function(e,t){if(e&&!t)return!0}}},U=K,Q=Object(O["a"])(U,V,J,!1,null,null,null),X=Q.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"5",sm:"6"}},[e._v("Company Logo")]),i("v-col",{attrs:{md:"7",sm:"6"}},[e.image_preview?i("div",{staticClass:"add__logo_box"},[i("img",{staticClass:"image-preview",attrs:{src:e.image_preview}}),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.image_preview,expression:"image_preview"}],staticClass:"button",attrs:{outlined:""}},[e._v("Remove")])],1):i("div",{staticClass:"add__logo_box",on:{click:function(t){return e.$refs.hidden_input.click()}}},[i("span",{staticClass:"text"},[e._v("+ Add Your Logo")]),i("input",{ref:"hidden_input",staticClass:"hidden-input",attrs:{type:"file",accept:"image/*"},on:{change:e.file_selected}})])]),i("v-col",{staticClass:"label",attrs:{md:"5",sm:"6"}},[e._v("Send email to recepient?")]),i("v-col",{staticClass:"value",attrs:{md:"7",sm:"6"}},[i("v-radio-group",{attrs:{mandatory:!0,row:""},model:{value:e.props.send_email,callback:function(t){e.$set(e.props,"send_email",t)},expression:"props.send_email"}},[i("v-radio",{attrs:{label:"Yes",value:"yes"}}),i("v-radio",{attrs:{label:"No",value:"no"}})],1)],1),i("v-col",{staticClass:"label",attrs:{md:"5",sm:"6"}},[e._v("Invoice Template ")]),i("v-col",{staticClass:"value",attrs:{md:"7",sm:"6"}},[i("v-select",{attrs:{items:e.templates,placeholder:"Select template","item-text":"name","item-value":"id",solo:"",flat:"",outlined:"",dense:""},model:{value:e.props.template,callback:function(t){e.$set(e.props,"template",t)},expression:"props.template"}})],1)],1)},ee=[],te=i("53ca");function ie(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function ae(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ie(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var oe={name:"StepThree",data:function(){return{templates:[{id:1,name:"Default"}],image_preview:null}},computed:ae({},Object(c["c"])("invoice",["props","dialog","company_logo"])),watch:{company_logo:function(e){var t=this;if(e)if("object"===Object(te["a"])(e)){var i=new FileReader;i.onload=function(e){t.image_preview=e.target.result},i.readAsDataURL(e)}else this.image_preview=e;else this.image_preview=null}},methods:{file_selected:function(e){var t=this;if(e.target.files&&e.target.files[0]){var i=new FormData;i.append("file",e.target.files[0]),b["a"].post("api/file/image-upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var i=e.data;t.$store.commit("invoice/set_company_logo",i.url)}))}}}},ne=oe,se=(i("6f75"),Object(O["a"])(ne,Z,ee,!1,null,"71e95d7c",null)),re=se.exports;function le(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function ce(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?le(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):le(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var de={name:"StepperInvoiceDialog",components:{CustomDialog:T["a"],StepOne:H,StepTwo:X,StepThree:re},data:function(){return{open:!1,stepper:1,btnloading:!1}},props:{type:{type:String,default:"create"}},computed:ce(ce(ce({},Object(c["c"])(["user"])),Object(c["c"])("invoice",["billed_to","selected_project","due_date","date","billed_from","company_logo","title","rows","toolbar","can_create_invoice","can_edit_invoice","dialog","invoice"])),{},{dialogTitle:function(){return this.toolbar.title},can_proceed_two:function(){return this.stepOneRules()},can_proceed_three:function(){return this.stepTwoRules()},can_submit:function(){return"create"===this.dialog.type?this.can_create_invoice:"edit"===this.dialog.type&&this.can_edit_invoice},buttonLabel:function(){return"create"===this.dialog.type?"Create":"Save"}}),methods:ce(ce({},Object(c["d"])("invoice",["set_dialog","revert_invoice"])),{},{openDialog:function(){this.open=!0,this.btnloading=!1,this.stepper=1,"create"===this.dialog.type&&this.$store.commit("invoice/clear")},closeDialog:function(){this.open=!1,["edit"].includes(this.dialog.type)&&this.revert_invoice(),this.set_dialog({type:null})},stepOneRules:function(){return!!(this.billed_from&&this.billed_to&&this.due_date&&this.date&&this.title)},stepTwoRules:function(){return this.rows.length>0},save_invoice:function(){this.can_submit&&("create"===this.dialog.type&&this.create_invoice(),"edit"===this.dialog.type&&this.update_invoice())},create_invoice:function(){var e=this;this.btnloading=!0,r["a"].create_invoice(this.get_invoice()).then((function(t){var i=t.data;return e.$emit("created",i)})).finally((function(){e.$store.commit("invoice/reset_state"),e.closeDialog(),e.$store.commit("invoice/clear"),e.btnloading=!1}))},update_invoice:function(){var e=this;this.btnloading=!0,r["a"].update_invoice(this.get_invoice(),this.invoice.invoice_id).then((function(t){var i=t.data;return e.$emit("updated",i)})).finally((function(){e.$store.commit("invoice/reset_state"),e.closeDialog(),e.$store.commit("invoice/clear"),e.btnloading=!1}))},get_invoice:function(){var e=new FormData;e.append("company_logo",this.invoice.company_logo),e.append("project_id",this.invoice.selected_project||0),e.append("type",this.invoice.type),e.append("title",this.invoice.title),e.append("billed_to",this.invoice.billed_to),e.append("billed_from",this.invoice.billed_from),e.append("date",this.invoice.date),e.append("due_date",this.invoice.due_date),e.append("total_amount",this.invoice.total_amount),e.append("items",JSON.stringify(this.invoice.rows)),e.append("terms",this.invoice.terms),e.append("notes",this.invoice.notes);var t=this.calculate_field(this.invoice,"tax"),i=this.calculate_field(this.invoice,"discount"),a=this.calculate_field(this.invoice,"shipping");return e.append("tax",0==t?0:t.value),e.append("discount",0==i?0:i.value),e.append("shipping",0==a?0:a.value),e.append("symbol",0==t?"":t.symbol),e.append("send_email",this.invoice.props.send_email),e.append("template",this.invoice.props.template),e},calculate_field:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e[t].show&&i?{value:e[t].value,symbol:e[t].symbol}:e[t].show&&!i?{value:e[t].value}:0}})},ue=de,pe=Object(O["a"])(ue,S,$,!1,null,null,null),ve=pe.exports;function _e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function me(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_e(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var fe={name:"Invoice",mixins:[l["a"],p["a"]],components:{TableHeader:v["a"],InvoiceDialog:C["a"],StepperInvoiceDialog:ve,VueTable:P["a"],EmailDialog:x,DeleteDialog:_["a"],ViewInvoice:k["a"],Actions:D["a"]},data:function(){return{view_invoice_dialog:!1,paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Invoice",disabled:!0,router_name:null}],headers:[{text:"Invoice #",sortable:!1},{text:"Title",sortable:!1},{text:"Due Date",sortable:!1},{text:"Billed To",sortable:!1},{text:"Status",sortable:!1},{text:"Amount",sortable:!1},{text:"Action",value:"actions",sortable:!1,width:"180px",align:"center"}],view_item:null,table_config:{add_message:"New invoice added successfully!",update_message:"Invoice updated successfully!",delete_message:"Invoice deleted successfully!",refresh_table_message:"Table refreshed"}}},created:function(){this.fetch_data(),this.getInvoices()},beforeDestroy:function(){this.$store.commit("invoice/reset_state")},computed:{user:function(){return this.$store.getters.user}},methods:me(me({},Object(c["d"])("invoice",["set_dialog","set_toolbar","set_projects","open_invoice_for_editing","set_selected_project","set_props"])),{},{can_pay:function(e){return e.billed_to===this.user.id},navigatePayment:function(e){this.$router.push({name:"pay-invoice",params:{id:e.id}})},open_create_dialog:function(){this.set_toolbar({title:"Create Invoice"}),this.set_dialog({type:"create",open:!0}),this.set_props({send_email:"no",template:1}),this.$refs.invoiceCreateDialog.openDialog()},open_edit_dialog:function(e){this.set_toolbar({title:"Edit Dialog"}),this.open_invoice_for_editing(u()(e)),0!==e.project_id&&this.set_selected_project(e.project_id),this.set_dialog({type:"edit",open:!0}),this.$refs.invoiceEditDialog.openDialog()},open_view_dialog:function(e){this.view_item=e,this.view_invoice_dialog=!0},delete_invoice:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.delete_dialog=!1,e.next=4,r["a"].delete_invoice(this.delete_item_id);case 4:this.loading=!1,t=this.items.findIndex((function(e){return e.id===i.delete_item_id})),~t&&this.items.splice(t,1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch_data:function(){var e=this;r["a"].get_all_projects().then((function(t){e.set_projects(t.data)})).finally((function(){return e.loading=!1}))},invoice_updated:function(e){var t=this.items.findIndex((function(t){return t.id===e.id}));~t&&this.items.splice(t,1,e)},getInvoices:function(){var e=this;this.loading=!0,r["a"].get_invoices(this.pagination.current,this.rows_per_page).then((function(t){var i=t.data;e.items=i.data,e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},load_more:function(){var e=this;this.loading=!0,r["a"].get_invoices(this.pagination.current+1).then((function(t){var i=t.data;console.log(i.data),i.data.forEach((function(t){e.items.push(t)})),e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))}})},be=fe,he=(i("32f3"),i("7757"),Object(O["a"])(be,a,o,!1,null,"ad13cf5c",null));t["default"]=he.exports},"3c5c":function(e,t,i){"use strict";var a=i("a2ff"),o=i.n(a);o.a},"5e17":function(e,t,i){"use strict";var a=i("8c6e"),o=i.n(a);o.a},"6b43":function(e,t,i){"use strict";var a=i("2699"),o=i.n(a);o.a},"6f75":function(e,t,i){"use strict";var a=i("8642"),o=i.n(a);o.a},7757:function(e,t,i){"use strict";var a=i("9516"),o=i.n(a);o.a},"79a2":function(e,t,i){"use strict";var a=i("0edc5"),o=i.n(a);o.a},8642:function(e,t,i){},"8c6e":function(e,t,i){},9516:function(e,t,i){},"9e25":function(e,t,i){},a2ff:function(e,t,i){},c415:function(e,t,i){},de01:function(e,t,i){"use strict";var a=i("c415"),o=i.n(a);o.a}}]);
//# sourceMappingURL=chunk-6964170a.3cfa41a8.js.map