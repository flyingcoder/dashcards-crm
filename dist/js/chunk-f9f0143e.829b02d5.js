(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9f0143e"],{"36ee":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-row",{staticClass:"py-3 px-3 grid--wrapper",attrs:{"no-gutters":""}},e._l(e.items,(function(t){return s("v-col",{key:t.user_id,attrs:{md:"3",sm:"6",xs:"12"}},[s("v-card",{staticClass:"mx-2 my-2"},[s("v-card-text",{staticClass:"px-5"},[s("v-row",[t.is_online?s("v-icon",{attrs:{small:"",title:"Online",color:"success"}},[e._v("mdi-check-circle")]):s("v-icon",{attrs:{small:""}}),s("v-spacer"),s("span",[e._v(e._s(t.job_title))]),s("v-spacer"),s("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[s("v-btn",e._g({attrs:{icon:""}},i),[s("v-icon",[e._v("settings")])],1)]}}],null,!0)},[s("v-list",[s("v-list-item",{on:{click:function(s){return e.$emit("edit",t)}}},[s("v-list-item-subtitle",[s("v-icon",{attrs:{small:""}},[e._v("edit")]),e._v(" Edit")],1)],1),s("v-list-item",{on:{click:function(s){return e.$emit("delete",t)}}},[s("v-list-item-subtitle",[s("v-icon",{attrs:{small:""}},[e._v("delete")]),e._v(" Delete")],1)],1)],1)],1)],1),s("v-row",{staticClass:"my-2",attrs:{align:"center"}},[s("v-spacer"),s("v-avatar",{attrs:{size:"75"}},[s("v-img",{attrs:{src:t.image_url,alt:t.first_name}})],1),s("v-spacer")],1),s("v-col",{staticClass:"text-center",attrs:{md:"12"}},[s("strong",[e._v(e._s(t.fullname))])]),s("v-row",[s("v-btn",{attrs:{text:"",block:"",dense:"",small:""},on:{click:function(s){return e.navigate_to_view_profile(t)}}},[s("v-icon",{attrs:{small:"",left:"",color:"success"}},[e._v("account_circle")]),e._v(" Profile ")],1),s("v-btn",{attrs:{text:"",block:"",dense:"",small:"",disabled:""}},[s("v-icon",{attrs:{small:"",left:"",color:"indigo"}},[e._v("mdi-map-marker")]),e._v(" "+e._s(t.location)+" ")],1)],1),s("v-row",[e.showTaskCount?s("v-col",[s("h5",{staticClass:"text-center"},[e._v("Tasks")]),s("h4",{staticClass:"text-center"},[e._v(e._s(e.count(t.tasks)))])]):e._e(),e.showProjectCount?s("v-col",[s("h5",{staticClass:"text-center"},[e._v("Projects")]),s("h4",{staticClass:"text-center"},[e._v(e._s(e.count(t.projects)))])]):e._e()],1)],1)],1)],1)})),1),e.hasFooter?s("v-card-actions",{staticClass:"py-2"},[s("v-spacer"),!0===e.noMoreData?s("v-btn",{attrs:{tile:"",text:"",disabled:""}},[e._v("NO MORE DATA")]):s("v-btn",{attrs:{tile:"",text:"",loading:e.btnloading},on:{click:e.handleLoadMore}},[e._v("LOAD MORE")]),s("v-spacer")],1):e._e()],1)},a=[],n=s("7618"),r=(s("ac6a"),s("8615"),{name:"VueGrid",props:{items:Array,permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0},noMoreData:{type:Boolean,default:!1},hasFooter:{type:Boolean,default:!0},showTaskCount:{type:Boolean,default:!0},showProjectCount:{type:Boolean,default:!0}},data:function(){return{btnloading:!1}},computed:{logged_user:function(){return this.$store.getters.user}},created:function(){var e=this;this.$event.$on("btnloading_off",(function(t){return e.btnloading=!1}))},methods:{handle_action:function(e){this.item&&this.$emit(e,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.can.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.can.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.can.view},handleLoadMore:function(){this.btnloading=!0,this.$emit("load-more")},navigate_to_view_profile:function(e){var t=Object.values(e.user_roles);t[0].indexOf("client")>=0||t[0].indexOf("agent")>=0?this.$router.push("/dashboard/clients/profile/".concat(e.user_id)):this.$router.push("/dashboard/team/profile/".concat(e.user_id))},count:function(e){return"object"===Object(n["a"])(e)?e.length:e}}}),o=r,l=(s("6224"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,null,null);t["a"]=c.exports},"37f1":function(e,t,s){"use strict";var i=s("ea26"),a=s.n(i);a.a},"4d9c":function(e,t,s){},"588f":function(e,t,s){},6224:function(e,t,s){"use strict";var i=s("f063"),a=s.n(i);a.a},"6eb9":function(e,t,s){},7345:function(e,t,s){"use strict";var i=s("4d9c"),a=s.n(i);a.a},a801:function(e,t,s){"use strict";var i=s("6eb9"),a=s.n(i);a.a},bc29:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"members-dropdown"},[s("v-autocomplete",e._b({attrs:{value:e.members,items:e.items,"search-input":e.search,loading:e.isLoading,"item-value":"id","prepend-icon":"search","no-filter":"",chips:"",multiple:"",clearable:"","hide-details":"",color:"#657186",label:"Assign member(s)",box:"","append-outer-icon":e.showOuterIcon?"add":""},on:{input:e.members_selected,"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},"click:append-outer":e.open_add_new_member},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",{staticClass:"chip--select-multi",attrs:{"input-value":t.selected,outlined:"",close:""},on:{input:function(s){return e.remove_chip(t.index)}}},[s("img",{attrs:{src:t.item.image_url,width:"30",height:"30"}}),e._v(" "),s("span",{staticClass:"chip-member-name"},[e._v(e._s(t.item.name))])])]}},{key:"item",fn:function(t){var i=t.item;return[s("div",{staticClass:"member"},[s("div",{staticClass:"member-avatar"},[s("img",{attrs:{src:i.image_url}})]),s("div",{staticClass:"member-info"},[s("div",{staticClass:"full-name"},[e._v(" "+e._s(i.first_name)+" ")]),s("div",{staticClass:"job-title"},[e._v(" "+e._s(i.job_title)+" ")])]),e.is_item_active(i.id)?e._e():s("div",{staticClass:"checked-icon"},[s("v-icon",{attrs:{color:"gray"}},[e._v("check_circle_outline")])],1),e.is_item_active(i.id)?s("div",{staticClass:"checked-icon"},[s("v-icon",{attrs:{color:"green"}},[e._v("check_circle")])],1):e._e()])]}}])},"v-autocomplete",e.$attrs,!1))],1)},a=[],n=(s("6762"),s("2fdb"),s("75fc")),r=s("0644"),o=s.n(r),l={name:"MembersDropdown",inheritAttrs:!1,props:{members:Array,memberItems:Array,isLoading:Boolean,showOuterIcon:{type:Boolean,default:!1}},data:function(){return{items:[],search:null}},watch:{search:function(e){this.$emit("search",e)},memberItems:function(e){this.items=Object(n["a"])(e)}},methods:{members_selected:function(e){this.$emit("update:members",e)},is_item_active:function(e){return this.members.includes(e)},remove_chip:function(e){var t=o()(this.members);t.splice(e,1),this.$emit("update:members",t)},open_add_new_member:function(){this.$event.$emit("open-new-member-dialog",!0)}}},c=l,d=(s("d668"),s("37f1"),s("2877")),m=Object(d["a"])(c,i,a,!1,null,"184dfa3e",null);t["a"]=m.exports},bd5b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"members-tab"},[s("v-row",{staticClass:"mb-2",attrs:{"no-gutters":""}},[s("v-spacer"),s("v-btn",{staticClass:"mr-1",attrs:{fab:"",small:""},on:{click:function(t){e.add_dialog=!0}}},[s("v-icon",[e._v("add")])],1),s("v-btn",{staticClass:"mr-1",attrs:{fab:"",small:""},on:{click:function(t){return e.setPreferredView("list")}}},[s("v-icon",[e._v("list")])],1),s("v-btn",{staticClass:"mr-1",attrs:{fab:"",small:""},on:{click:function(t){return e.setPreferredView("grid")}}},[s("v-icon",[e._v("mdi-view-dashboard")])],1)],1),s("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{indeterminate:!0}}),s("add-dialog",{ref:"add_dialog",attrs:{dialog:e.add_dialog,id:e.id,title:"Add Member(s)"},on:{"update:dialog":function(t){e.add_dialog=t},save:function(t){return e.add_item("add_members",t,e.dynamic_api)}}}),s("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Member","text-content":"Are you sure you want to delete this member?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_member",e.dynamic_api)}}}),"list"===e.view?s("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"mdi-clock",title:"Project Timers",noMoreData:e.noMoreData,hasFooter:!1},scopedSlots:e._u([{key:"row-slot",fn:function(t){var i=t.item;return[s("tr",[s("td",{staticClass:"text-cap"},[s("v-avatar",{staticClass:"mr-1",attrs:{size:"36"}},[s("v-img",{attrs:{src:i.image_url,title:i.fullname}})],1),e._v(" "+e._s(i.fullname)+" ")],1),s("td",{staticClass:"email"},[e._v(e._s(i.email))]),s("td",[e._v(e._s(i.telephone||"none"))]),s("td",{staticClass:"text-cap"},[e._v(e._s(i.job_title))]),s("td",[e._v(e._s(i.tasks.length))]),s("Actions",{attrs:{item:i,hasEdit:!1,permissions:e.$_permissions.get("hq_members")},on:{delete:function(t){return e.open_delete_dialog(i)},view:function(t){return e.navigate_to_view_profile(i)}}})],1)]}},{key:"empty-slot",fn:function(){return[s("v-btn",{attrs:{tile:"",text:"",outlined:""},on:{click:function(t){e.add_dialog=!0}}},[s("v-icon",{attrs:{left:""}},[e._v("add")]),e._v(" Add Member")],1)]},proxy:!0}],null,!1,98759396)}):s("VueGrid",{key:e.componentKey,attrs:{items:e.items,permissions:e.$_permissions.get("hq_members"),noMoreData:e.noMoreData,hasFooter:!1,showProjectCount:!1},on:{"load-more":e.load_more_users,delete:e.open_delete_dialog,edit:e.open_edit_dialog}})],1)},a=[],n=(s("ac6a"),s("8615"),s("c5f6"),s("e06e")),r=s("5b70"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{"justify-center":""}},[s("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"600px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[s("v-card",{staticClass:"membertab-dialog"},[s("v-card-title",{staticClass:"dialog__header"},[s("span",{staticClass:"dialog__title"},[e._v(e._s(e.title))]),s("v-btn",{staticClass:"close__dialog",attrs:{small:"",fab:""},on:{click:e.cancel}},[s("v-icon",{attrs:{dark:""}},[e._v("close")])],1)],1),s("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),s("v-card-text",{staticClass:"dialog__body"},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("members-dropdown",{attrs:{members:e.members.selected,"member-items":e.members.items,"is-loading":e.members.loading},on:{"update:members":function(t){return e.$set(e.members,"selected",t)},search:e.filter_members}})],1)],1)],1),s("v-card-actions",{staticClass:"dialog__actions"},[s("v-btn",{on:{click:e.cancel}},[e._v("Cancel")]),s("v-btn",{attrs:{disable:e.disableSave},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)},l=[],c=(s("6762"),s("2fdb"),s("1be9")),d=function(e){return c["a"].get("api/projects/".concat(e,"/new-members"))},m=s("bc29"),u=s("0644"),_=s.n(u),v={name:"AddDialog",components:{MembersDropdown:m["a"]},props:{dialog:Boolean,title:String,id:[Number,String]},data:function(){return{open:!1,name:"",members:{selected:[],items:[],allItems:[],loading:!1}}},computed:{disableSave:function(){return!this.members.selected.length}},watch:{dialog:function(e){e&&this.getProjectMembers(),this.open=e},open:function(e){this.$emit("update:dialog",e)}},methods:{getProjectMembers:function(){var e=this;this.members.loading=!0,d(this.id).then((function(t){var s=t.data;e.members.allItems=s,e.members.items=s})).finally((function(){return e.members.loading=!1}))},cancel:function(){this.open=!1},save:function(){this.disableSave||this.$emit("save",this.members.selected)},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()},filter_members:function(e){var t=_()(this.members.allItems);if(e){var s=t.filter((function(t){return t.first_name.toLowerCase().includes(e.toLowerCase())||t.last_name.toLowerCase().includes(e.toLowerCase())}));this.$set(this.members,"items",s)}else this.members.items=t}}},p=v,f=(s("a801"),s("2877")),b=Object(f["a"])(p,o,l,!1,null,"ee785b1a",null),h=b.exports,g=s("0ebe"),w=s("ee09"),y=s("36ee"),C={name:"MembersTab",mixins:[n["a"]],components:{VueTable:g["a"],AddDialog:h,DeleteDialog:r["a"],Actions:w["a"],VueGrid:y["a"]},inheritAttrs:!1,props:{id:[Number,String]},data:function(){return{headers:[{text:"Member",value:"member"},{text:"Email",value:"email"},{text:"Telephone",value:"telephone"},{text:"Position",value:"position"},{text:"Tasks",value:"tasks"},{text:"Action",value:"action",width:"140px"}],sortList:[{title:"Sort by member"},{title:"Sort by email"},{title:"Sort by telephone"},{title:"Sort by position"},{title:"Sort by tasks"}],table_config:{route_name:"project_preview",add_message:"New Members(s) added successfully!",delete_message:"Members deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_tab_members_table"}}},computed:{dynamic_api:function(){return"api/projects/".concat(this.id,"/member")}},created:function(){this.view=this.getPreferredView(),this.fill_table("get_members",!0,this.dynamic_api)},methods:{can_be_deleted:function(e){return!("Administrator"===e.job_title||"Client"===e.job_title)},navigate_to_view_profile:function(e){var t=Object.values(e.user_roles);t[0].indexOf("client")>=0||t[0].indexOf("agent")>=0?this.$router.push("/dashboard/clients/profile/".concat(e.id)):this.$router.push("/dashboard/team/profile/".concat(e.id))}}},x=C,k=(s("7345"),Object(f["a"])(x,i,a,!1,null,"349fdb88",null));t["default"]=k.exports},d668:function(e,t,s){"use strict";var i=s("588f"),a=s.n(i);a.a},ea26:function(e,t,s){},f063:function(e,t,s){}}]);
//# sourceMappingURL=chunk-f9f0143e.829b02d5.js.map