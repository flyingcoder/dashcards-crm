{"version":3,"sources":["webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue?6e3b","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.scss?1b80","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue?5910","webpack:///./src/modules/ProjectPreview-Invoice/api.js","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.js","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.js?b763","webpack:///./src/modules/ProjectPreview-Invoice/Invoice.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","on","invoice_updated","view_item","delete_dialog","$event","delete_invoice","bulk_delete_dialog","bulk_delete","key","componentKey","items","headers","loading","noMoreData","getMoreInvoices","open_bulk_delete_dialog","scopedSlots","_u","fn","item","_v","_s","title","_g","billed_to","image_url","fullname","_f","due_date","total_amount","open_delete_dialog","open_edit_dialog","open_view_dialog","staticRenderFns","apiTo","getInvoices","projectId","page","request","get","id","delete","update_invoice","payload","post","get_all_projects","name","mixins","list_functionality","global_utils","components","VueTable","DeleteDialog","ViewInvoice","Actions","StepperInvoiceDialog","props","Number","String","data","text","value","width","align","view_invoice_dialog","created","fetch_data","methods","mapMutations","delete_item_id","index","findIndex","splice","$refs","open_dialog","set_toolbar","open_invoice_for_editing","_cloneDeep","set_selected_project","project_id","set_dialog","type","open","invoiceEditDialog","openDialog","then","res2","set_projects","pagination","current","current_page","total","last_page","hasMoreData","finally","$emit","forEach","push","invoice","component"],"mappings":"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","file":"js/chunk-37a80002.3565ce0a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invoice.vue?vue&type=style&index=1&id=5676a9e7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invoice.vue?vue&type=style&index=1&id=5676a9e7&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Invoice.scss?vue&type=style&index=0&id=5676a9e7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./Invoice.scss?vue&type=style&index=0&id=5676a9e7&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"invoice\"},[_c('StepperInvoiceDialog',{ref:\"invoiceEditDialog\",attrs:{\"projectLock\":true,\"type\":\"edit\"},on:{\"updated\":_vm.invoice_updated}}),_c('ViewInvoice',{ref:\"view_invoice_dialog\",attrs:{\"item\":_vm.view_item}}),_c('delete-dialog',{attrs:{\"open-dialog\":_vm.delete_dialog,\"title\":\"Delete Invoice\",\"text-content\":\"Are you sure you want to delete this invoice?\"},on:{\"update:openDialog\":function($event){_vm.delete_dialog=$event},\"update:open-dialog\":function($event){_vm.delete_dialog=$event},\"delete\":_vm.delete_invoice}}),_c('delete-dialog',{attrs:{\"open-dialog\":_vm.bulk_delete_dialog,\"title\":\"Delete Invoices\",\"text-content\":\"Are you sure you want to delete these invoices? This can't be undone.\"},on:{\"update:openDialog\":function($event){_vm.bulk_delete_dialog=$event},\"update:open-dialog\":function($event){_vm.bulk_delete_dialog=$event},\"delete\":function($event){return _vm.bulk_delete('bulk_delete_invoices')}}}),_c('VueTable',{key:_vm.componentKey,attrs:{\"items\":_vm.items,\"headers\":_vm.headers,\"showRowActions\":true,\"icon\":\"list\",\"loading\":_vm.loading,\"title\":\"Project Invoice\",\"noMoreData\":_vm.noMoreData},on:{\"load-more\":_vm.getMoreInvoices,\"delete-selected\":function($event){return _vm.open_bulk_delete_dialog($event)}},scopedSlots:_vm._u([{key:\"row-slot\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',[_vm._v(_vm._s(item.title))]),_c('td',[_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-avatar',_vm._g({attrs:{\"color\":\"teal\",\"size\":\"35\"}},on),[_c('v-img',{attrs:{\"src\":item.billed_to.image_url}})],1)]}}],null,true)},[_c('span',[_vm._v(_vm._s(item.billed_to.fullname))])]),_vm._v(\" \"+_vm._s(item.billed_to.fullname)+\" \")],1),_c('td',[_vm._v(_vm._s(_vm._f(\"format\")(item.due_date)))]),_c('td',[_vm._v(_vm._s(_vm._f(\"money\")(item.total_amount)))]),_c('Actions',{attrs:{\"item\":item},on:{\"delete\":function($event){return _vm.open_delete_dialog(item)},\"edit\":function($event){return _vm.open_edit_dialog(item)},\"view\":function($event){return _vm.open_view_dialog(item)}}})]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/services/axios_instance'\r\n\r\nexport const apiTo = {\r\n  getInvoices(projectId, page) {\r\n    return request.get(`api/projects/${projectId}/invoice?page=${page}`)\r\n  },\r\n\r\n  delete_invoice(id) {\r\n    return request.delete(`api/invoice/${id}`)\r\n  },\r\n  update_invoice(payload, id) {\r\n    return request.post(`api/invoice/${id}`, payload, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  },\r\n  get_all_projects() {\r\n    return request.get('api/projects?all=true')\r\n  }\r\n}\r\n","import { apiTo } from './api'\r\nimport { list_functionality } from '@/services/list-functionality/list-functionality'\r\nimport { mapMutations } from 'vuex'\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\nimport { global_utils } from '@/global_utils/global_utils'\r\n//Components\r\n\r\nimport ViewInvoice from '@/modules/Invoice/components/ViewInvoice/ViewInvoice.vue'\r\nimport DeleteDialog from '@/common/DeleteDialog.vue'\r\nimport VueTable from '@/common/VueTable/VueTable.vue'\r\nimport Actions from '@/common/VueTable/Actions.vue'\r\nimport StepperInvoiceDialog from '@/modules/Invoice/components/StepperDialog/StepperInvoiceDialog.vue'\r\n\r\nexport default {\r\n    name: 'Invoice',\r\n    mixins: [list_functionality, global_utils],\r\n\r\n    components: {\r\n        VueTable,\r\n        DeleteDialog,\r\n        ViewInvoice,\r\n        Actions,\r\n        StepperInvoiceDialog\r\n    },\r\n\r\n    props: {\r\n        id: [Number, String]\r\n    },\r\n\r\n    data: () => ({\r\n        headers: [\r\n            { text: 'Invoice', value: 'invoice', width: '30%' },\r\n            { text: 'Client', value: 'client', width: '20%' },\r\n            { text: 'Due Date', value: 'due_date', width: '20%' },\r\n            { text: 'Amount', value: 'amount', width: '10%' },\r\n            { text: 'Actions', value: 'action', width: '20%', align: 'center' }\r\n        ],\r\n        view_invoice_dialog: false,\r\n        view_item: null\r\n    }),\r\n\r\n    created() {\r\n        this.loading = true\r\n        this.fetch_data()\r\n        this.getInvoices()\r\n    },\r\n\r\n    methods: {\r\n        ...mapMutations('invoice', [\r\n            'set_dialog',\r\n            'set_toolbar',\r\n            'set_projects',\r\n            'open_invoice_for_editing',\r\n            'set_selected_project'\r\n        ]),\r\n        async delete_invoice() {\r\n            this.loading = true\r\n            this.delete_dialog = false\r\n            await apiTo.delete_invoice(this.delete_item_id)\r\n            this.loading = false\r\n            const index = this.items.findIndex(\r\n                item => item.id === this.delete_item_id\r\n            )\r\n            if (~index) this.items.splice(index, 1)\r\n        },\r\n        open_view_dialog(data) {\r\n            this.view_item = data\r\n            this.$refs.view_invoice_dialog.open_dialog(data)\r\n        },\r\n        open_edit_dialog(data) {\r\n            this.set_toolbar({ title: 'Edit Dialog' })\r\n            this.open_invoice_for_editing(_cloneDeep(data))\r\n            this.set_selected_project(data.project_id)\r\n            this.set_dialog({ type: 'edit', open: true })\r\n            this.$refs.invoiceEditDialog.openDialog()\r\n        },\r\n        fetch_data() {\r\n            apiTo.get_all_projects().then(res2 => {\r\n                this.set_projects(res2.data)\r\n            })\r\n        },\r\n        getInvoices() {\r\n            this.loading = true\r\n            apiTo\r\n                .getInvoices(this.id, this.pagination.current)\r\n                .then(({ data }) => {\r\n                    this.items = data.data\r\n                    this.pagination.current = data.current_page\r\n                    this.pagination.total = data.last_page\r\n                    this.hasMoreData()\r\n                })\r\n                .finally(() => {\r\n                    this.loading = false\r\n                    this.$event.$emit('btnloading_off', false)\r\n                })\r\n        },\r\n        getMoreInvoices() {\r\n            this.loading = true\r\n            apiTo\r\n                .getInvoices(this.id, this.pagination.current + 1)\r\n                .then(({ data }) => {\r\n                    data.data.forEach(item => {\r\n                        this.items.push(item)\r\n                    })\r\n                    this.pagination.current = data.current_page\r\n                    this.pagination.total = data.last_page\r\n                    this.hasMoreData()\r\n                })\r\n                .finally(() => {\r\n                    this.loading = false\r\n                    this.$event.$emit('btnloading_off', false)\r\n                })\r\n        },\r\n        invoice_updated(invoice) {\r\n            const index = this.items.findIndex(item => item.id === invoice.id)\r\n            if (~index) {\r\n                this.items.splice(index, 1, invoice)\r\n            }\r\n        }\r\n    }\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Invoice.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Invoice.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Invoice.vue?vue&type=template&id=5676a9e7&scoped=true&\"\nimport script from \"./Invoice.js?vue&type=script&lang=js&\"\nexport * from \"./Invoice.js?vue&type=script&lang=js&\"\nimport style0 from \"./Invoice.scss?vue&type=style&index=0&id=5676a9e7&lang=scss&scoped=true&\"\nimport style1 from \"./Invoice.vue?vue&type=style&index=1&id=5676a9e7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5676a9e7\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}