(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e32f983"],{"1e55":function(e,t,i){},"63fa":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice-templates"},[i("VueTable",{attrs:{title:"Invoice Templates",hasSearch:!1,headers:e.headers,loading:e.loading,items:e.items,noMoreData:e.noMoreData,showSelect:!1},on:{"load-more":e.getMoreInvoiceTemplates},scopedSlots:e._u([{key:"header-toolbar",fn:function(){return[i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"ml-2 action-btn",attrs:{fab:""},on:{click:e.open_add_dialog}},"v-icon",a,!1),n),[e._v("add_circle_outline")])]}}])},[i("span",[e._v("Create Template")])]),i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"ml-2 action-btn",attrs:{fab:""},on:{click:e.open_help_dialog}},"v-icon",a,!1),n),[e._v("mdi-help-circle-outline")])]}}])},[i("span",[e._v("Invoice Template Guide and Rules")])])]},proxy:!0},{key:"row-slot",fn:function(t){var n=t.item;return[i("td",[e._v(e._s(e._f("ucwords")(n.name)))]),n.creator?i("td",[i("Avatar",{attrs:{user:n.creator}})],1):i("td",[i("v-avatar",[i("v-icon",{attrs:{large:""}},[e._v("mdi-monitor-clean")])],1),e._v(" System Default ")],1),0===n.company_id?i("td"):i("td",[e._v(e._s(e._f("bzFromNow")(n.created_at)))]),i("Actions",{attrs:{hasDelete:e.can_action(n)&&e.can_delete(n),hasEdit:e.can_action(n),item:n,permissions:e.$_permissions.get("templates")},on:{delete:function(t){return e.open_delete_dialog(n)},edit:function(t){return e.open_edit_dialog(n)},view:function(t){return e.open_view_dialog(n)}}})]}},{key:"empty-slot",fn:function(){return[i("v-btn",{attrs:{dark:"",color:"#3b589e"},on:{click:e.open_add_dialog}},[e._v("Add new invoice template")])]},proxy:!0}])}),i("InvoiceTemplateDialog",{ref:"add_edit_dialog",attrs:{defaultTemplates:e.defaultTemplates,invoicefields:e.invoicefields},on:{save:e.handleSave,preview:e.open_view_dialog}}),i("InvoiceTemplatePreview",{ref:"view_dialog",attrs:{item:e.activeItem,invoicefields:e.invoicefields}}),i("InvoiceTemplateHelp",{ref:"help_dialog",attrs:{invoicefields:e.invoicefields}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Template","text-content":"Are you sure you want to delete this invoice template?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_invoice_template",t)}}})],1)},a=[],o=(i("20d6"),i("1be9")),l=i("e06e"),s=i("0ebe"),d=i("2c63"),c=i("bfc6"),r=i("2089"),p=i("ee09"),u=i("5b70"),_={name:"InvoiceTemplates",mixins:[l["a"]],components:{VueTable:s["a"],InvoiceTemplateDialog:d["a"],InvoiceTemplatePreview:c["a"],InvoiceTemplateHelp:r["a"],Actions:p["a"],DeleteDialog:u["a"]},data:function(){return{headers:[{text:"Name",align:"left",sortable:!1},{text:"Added By",sortable:!1},{text:"Added On",sortable:!1},{text:"Action",sortable:!1,align:"center",width:"140px"}],paths:[{text:"Dashboard",disabled:!1,router_name:"default-content"},{text:"Invoice Templates",disabled:!1,router_name:"templates"}],activeItem:null,isEdit:!1,invoicefields:[]}},computed:{user:function(){return this.$store.getters.user},permissions:function(){return this.$_permissions.get("templates")},defaultTemplates:function(){return this.items.length>0?this.items.filter((function(e){return 0===e.company_id})):[]}},mounted:function(){var e=this;this.$event.$emit("path-change",this.paths),this.getInvoiceTemplates(),this.getFields(),this.$event.$on("show-invoice-template-guide",(function(){e.open_help_dialog()}))},methods:{can_action:function(e){return 0!==e.company_id},can_delete:function(e){return!!this.user.is_admin||this.permissions&&this.permissions.delete},getInvoiceTemplates:function(){this.fill_table_via_url("api/template/invoices")},getMoreInvoiceTemplates:function(){this.load_more_via_url("api/template/invoices")},open_add_dialog:function(){this.isEdit=!1,this.$refs.add_edit_dialog.open_dialog(!1,null)},open_view_dialog:function(e){this.activeItem=e,this.$refs.view_dialog.open_dialog(e)},open_help_dialog:function(){this.$refs.help_dialog.open_dialog()},open_edit_dialog:function(e){this.isEdit=!0,this.activeItem=e,this.$refs.add_edit_dialog.open_dialog(!0,e)},handleSave:function(e){this.isEdit?this.updateTemplate(e):this.createTemplate(e)},createTemplate:function(e){var t=this;o["a"].post("api/template/invoices",e).then((function(e){var i=e.data;t.items.push(i),t.$refs.add_edit_dialog.clear_and_close()})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},updateTemplate:function(e){var t=this;o["a"].put("api/template/invoices",e).then((function(e){var i=e.data,n=t.items.findIndex((function(e){return e.id===i.id}));~n&&t.items.splice(n,1,i),t.$refs.add_edit_dialog.clear_and_close()})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},getFields:function(){var e=this;o["a"].get("api/template/invoices/fields").then((function(t){var i=t.data;e.invoicefields=i}))}}},v=_,f=(i("e51c"),i("2877")),m=Object(f["a"])(v,n,a,!1,null,"271e35ed",null);t["default"]=m.exports},e51c:function(e,t,i){"use strict";var n=i("1e55"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-3e32f983.985c7b8f.js.map