(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f89178"],{"206b":function(e,t,i){e.exports=i.p+"img/edit.26f5333c.svg"},"2f21":function(e,t,i){"use strict";var n=i("79e5");e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"386d":function(e,t,i){"use strict";var n=i("cb7c"),a=i("83a1"),s=i("5f1b");i("214f")("search",1,(function(e,t,i,o){return[function(i){var n=e(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,n):new RegExp(i)[t](String(n))},function(e){var t=o(i,e,this);if(t.done)return t.value;var r=n(e),l=String(this),d=r.lastIndex;a(d,0)||(r.lastIndex=0);var c=s(r,l);return a(r.lastIndex,d)||(r.lastIndex=d),null===c?-1:c.index}]}))},"408c":function(e,t,i){var n=i("2b3e"),a=function(){return n.Date.now()};e.exports=a},5378:function(e,t,i){"use strict";var n=i("9f7b"),a=i.n(n);a.a},"55dd":function(e,t,i){"use strict";var n=i("5ca1"),a=i("d8e8"),s=i("4bf8"),o=i("79e5"),r=[].sort,l=[1,2,3];n(n.P+n.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!i("2f21")(r)),"Array",{sort:function(e){return void 0===e?r.call(s(this)):r.call(s(this),a(e))}})},"6af0":function(e,t,i){"use strict";var n=i("7307"),a=i.n(n);a.a},7307:function(e,t,i){},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"8b7f":function(e,t,i){"use strict";var n=i("c7e7"),a=i.n(n);a.a},"9f7b":function(e,t,i){},a130:function(e,t,i){e.exports=i.p+"img/menu.02d0eeb5.svg"},a5da:function(e,t,i){e.exports=i.p+"img/delete.ba632ac8.svg"},b047c:function(e,t,i){var n=i("1a8c"),a=i("408c"),s=i("b4b0"),o="Expected a function",r=Math.max,l=Math.min;function d(e,t,i){var d,c,u,f,_,p,h=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError(o);function b(t){var i=d,n=c;return d=c=void 0,h=t,f=e.apply(n,i),f}function w(e){return h=e,_=setTimeout(x,t),g?b(e):f}function $(e){var i=e-p,n=e-h,a=t-i;return m?l(a,u-n):a}function y(e){var i=e-p,n=e-h;return void 0===p||i>=t||i<0||m&&n>=u}function x(){var e=a();if(y(e))return k(e);_=setTimeout(x,$(e))}function k(e){return _=void 0,v&&d?b(e):(d=c=void 0,f)}function D(){void 0!==_&&clearTimeout(_),h=0,d=p=c=_=void 0}function T(){return void 0===_?f:k(a())}function B(){var e=a(),i=y(e);if(d=arguments,c=this,p=e,i){if(void 0===_)return w(p);if(m)return clearTimeout(_),_=setTimeout(x,t),b(p)}return void 0===_&&(_=setTimeout(x,t)),f}return t=s(t)||0,n(i)&&(g=!!i.leading,m="maxWait"in i,u=m?r(s(i.maxWait)||0,t):u,v="trailing"in i?!!i.trailing:v),B.cancel=D,B.flush=T,B}e.exports=d},b4b0:function(e,t,i){var n=i("1a8c"),a=i("ffd6"),s=NaN,o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;function u(e){if("number"==typeof e)return e;if(a(e))return s;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var i=l.test(e);return i||d.test(e)?c(e.slice(2),i?2:8):r.test(e)?s:+e}e.exports=u},c7e7:function(e,t,i){},e06e:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("386d"),i("a481"),i("c5f6"),i("28a5"),i("55dd"),i("2fdb"),i("ac6a"),i("6762"),i("20d6");var n=i("2909"),a=i("b047c"),s=i.n(a),o=i("d4e9"),r=i("1be9"),l={methods:{resetPagination:function(){this.pagination.current=1,this.pagination.total=0,this.noMoreData=!1},clear_selected:function(){this.selected=[],this.$event.$emit("clear_selected",[]),this.$event.$emit("btnloading_off",!1)},add_item:function(e,t){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;o["a"][e](t,a).then((function(e){var t=e.data;if(Array.isArray(t)){var a;(a=i.items).push.apply(a,Object(n["a"])(t.reverse()))}else{var o=i.items.findIndex((function(e){return e.id===t.id}));~o?i.items.splice(o,1,t):i.items.push(t)}i.clear_selected(),i.$refs.add_dialog&&i.$refs.add_dialog.clear_and_close(),i.$event.$emit("open_snackbar",i.table_config.add_message),"function"===typeof s&&s(e)})).finally((function(){return i.$event.$emit("btnloading_off",!1)}))},extract_per_page:function(e){var t=e.search("per_page");return e.substring(t+9,t+10)},calc_per_page_items:function(e,t){var i=[5,10,15,20,25];return i.includes(e)||i.push(e),!i.includes(t)&&t<=25&&i.push(t),i},update_item:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;o["a"][e](this.edit_item.id,t,n).then((function(e){var t=i.items.findIndex((function(t){return t.id===e.data.id}));~t&&i.items.splice(t,1,e.data),i.edit_item={id:null,fields:null},i.edit_dialog=!1,i.clear_selected(),i.$event.$emit("open_snackbar",i.table_config.update_message),"function"===typeof a&&a(e)})).finally((function(){return i.$event.$emit("btnloading_off",!1)}))},delete_item:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;o["a"][e](this.delete_item_id,i).then((function(){var e=t.items.findIndex((function(e){return e.id===t.delete_item_id}));~e&&t.items.splice(e,1),t.delete_item_id=null,t.delete_dialog=!1,t.clear_selected(),t.$event.$emit("open_snackbar",t.table_config.delete_message),"function"===typeof n&&n(response)})).finally((function(){return t.$event.$emit("btnloading_off",!1)}))},bulk_delete:function(e){var t=this,i={ids:this.selected.map((function(e){return e.id}))};o["a"][e]({data:i}).then((function(e){var i=e.data;t.selected.forEach((function(e){var i=t.items.findIndex((function(t){return t.id===e.id}));~i&&t.items.splice(i,1)})),t.bulk_delete_dialog=!1,t.clear_selected(),t.$event.$emit("open_snackbar",i.message)})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},bulk_delete_via_url:function(e){var t=this,i={ids:this.selected.map((function(e){return e.id}))};r["a"].delete(e,{data:i}).then((function(e){var i=e.data;t.selected.forEach((function(e){var i=t.items.findIndex((function(t){return t.id===e.id}));~i&&t.items.splice(i,1)})),t.bulk_delete_dialog=!1,t.clear_selected(),t.$event.$emit("open_snackbar",i.message)})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},open_edit_dialog:function(e){this.edit_dialog=!0,this.$set(this.edit_item,"id",e.id),this.$set(this.edit_item,"fields",e)},open_delete_dialog:function(e){this.delete_dialog=!0,this.delete_item_id=e.id},open_bulk_delete_dialog:function(e){this.bulk_delete_dialog=!0,this.selected=e},fill_table:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0,o["a"][e](n).then((function(e){t.items_response=e.data,i?(t.items=e.data.data,t.pagination.current=e.data.current_page,t.pagination.total=e.data.last_page,t.hasMoreData()):t.items=e.data})).finally((function(){t.clear_selected(),t.loading=!1,t.$event.$emit("btnloading_off",!1)}))},fill_table_via_url:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.loading=!0;var a={page:this.pagination.current};e.includes("per_page")||(a.per_page=this.$store.getters["configs/general_page_limits"]),r["a"].get(e,{params:a}).then((function(e){t.items_response=e.data,i?(t.items=e.data.data,t.pagination.current=e.data.current_page,t.pagination.total=e.data.last_page,t.hasMoreData()):t.items=e.data,"function"===typeof n&&n(e)})).finally((function(){t.clear_selected(),t.loading=!1,t.$event.$emit("btnloading_off",!1)}))},load_more_on_table:function(e){var t=this;this.loading=!0;var i={page:this.pagination.current+1};o["a"][e]({params:i}).then((function(e){var i=e.data;t.items_response=i.data,i.data.forEach((function(e){t.items.push(e)})),t.pagination.current=i.current_page,t.pagination.total=i.last_page,t.hasMoreData()})).finally((function(){t.clear_selected(),t.loading=!1,t.scrollToBottom(),t.$event.$emit("btnloading_off",!1)}))},load_more_via_url:function(e,t){var i=this;this.loading=!0;var n={page:this.pagination.current+1};e.includes("per_page")||(n.per_page=this.$store.getters["configs/general_page_limits"]),r["a"].get(e,{params:n}).then((function(e){var n=e.data;i.items_response=n.data,n.data.forEach((function(e){i.items.push(e)})),i.pagination.current=n.current_page,i.pagination.total=n.last_page,i.hasMoreData(),"function"===typeof t&&t(n)})).finally((function(){i.clear_selected(),i.loading=!1,i.scrollToBottom(),i.$event.$emit("btnloading_off",!1)}))},fill_table_with_data:function(e){this.items=e},add_table_rows:function(e,t){this.items=e,this.items_response=t},changeSort:function(e){this.sort.sortBy===e?this.sort.descending=!this.sort.descending:(this.sort.sortBy=e,this.sort.descending=!1)},refresh_table:function(e){var t=this;o["a"][this.table_config.refresh_table_api_name](e).then((function(e){t.$event.$emit("open_snackbar",t.table_config.refresh_table_message),t.loading=!1,t.clear_selected(),t.items_response=e.data,t.items=e.data.data})).finally((function(){return t.$event.$emit("btnloading_off",!1)}))},update_table_actions:function(e){if(e.page&&(this.page=Number(e.page)),e.per_page&&(this.rows_per_page=Number(e.per_page)),e.search&&(this.search=e.search),e.sort){var t=e.sort.split("|");this.sort.sortBy=t[0],"asc"===t[1]?this.sort.descending=!1:"desc"===t[1]&&(this.sort.descending=!0)}},hasMoreData:function(){this.componentKey+=1,this.pagination.current>=this.pagination.total&&(this.noMoreData=!0)},toggleAll:function(){this.selected.length?this.clear_selected():this.selected=this.items.slice()},setPreferredView:function(e){window.localStorage.setItem("bzk_prefer_view",e),this.view=e},getPreferredView:function(){return window.localStorage.getItem("bzk_prefer_view")||"list"},scrollToBottom:function(){setTimeout((function(){var e=document.getElementsByClassName("v-data-table__wrapper")[0];e&&(e.scrollTop=e.scrollHeight)}),1)},debounce:s()((function(e){this.search=e}),500)}},d={mixins:[l],data:function(){return{edit_dialog:!1,add_dialog:!1,delete_dialog:!1,permissionDialog:!1,bulk_delete_dialog:!1,loading:!1,items:[],items_response:null,edit_item:{id:null,fields:null},delete_item_id:null,show_delete_selected:!1,selected_ids:[],selected:[],rows_per_page:null,page:1,sort:{sortBy:null,descending:!1},search:"",pagination:{current:1,total:0},noMoreData:!1,componentKey:1,view:"list",btnloading:!1}},watch:{selected_ids:function(e){e.length>0?this.show_delete_selected=!0:this.show_delete_selected=!1},api_query:function(e,t){var i=Number(this.extract_per_page(e)),n=Number(this.extract_per_page(t))||null;this.items_response&&this.rows_per_page===this.items.length&&i!==n||(this.$router.replace({name:this.table_config.route_name,query:{page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting}}),this.loading=!0,this.refresh_table(e))}}}},f158:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"members-tab"},[i("staff-dialog",{ref:"add_dialog",attrs:{title:"Add New Staff",dialog:e.add_dialog},on:{"update:dialog":function(t){e.add_dialog=t},save:e.handleAddStaff}}),i("staff-dialog",{ref:"edit_dialog",attrs:{title:"Edit Staff",dialog:e.edit_dialog,"fields-to-edit":e.edit_item,"is-edit-dialog":e.edit_dialog},on:{"update:dialog":function(t){e.edit_dialog=t},save:function(t){return e.update_item("update_team",t)}}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Staff","text-content":"Are you sure you want to delete this staff?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:function(t){return e.delete_item("delete_team",t)}}}),i("VueGrid",{key:e.componentKey,attrs:{items:e.items,title:"Staffs",noMoreData:e.noMoreData},on:{"load-more":e.load_more_users,delete:e.open_delete_dialog,edit:e.open_edit_dialog}},[i("template",{staticClass:"icons",slot:"header-toolbar"},[i("table-header",{attrs:{noListButton:"",noGridButton:""},on:{click:function(t){e.add_dialog=!0}}})],1)],2)],1)},a=[],s=(i("c5f6"),i("e06e")),o=i("1be9"),r={add_new_staff:function(e,t){return o["a"].post("api/clients/".concat(e,"/staffs"),t)},update_staff:function(e,t,i){return o["a"].put("api/clients/".concat(e,"/staffs/").concat(t),i)},delete_staff:function(e,t){return o["a"].put("api/clients/".concat(e,"/staffs/").concat(t))}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content__wrapper"},[n("div",{staticClass:"row buzz__tables"},[n("div",{staticClass:"buzz__tablesTwo"},[e._t("toolbar",[n("div",{staticClass:"table__toolbar"},[e._v(" "+e._s(e.toolbarTitle)+" ")])]),e._t("right_toolbar"),n("v-data-table",e._b({staticClass:"buzzooka__table",attrs:{headers:e.headers,items:e.items,loading:e.loading,"no-data-text":"","show-select":"","disable-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"headers",fn:function(t){return[n("tr",{staticClass:"table__head"},[e.$props.hasCheckbox&&!e.noRowDelete&&e.can_delete?n("th",[n("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleAll(t)}}})],1):e._e(),e._l(t.headers,(function(t){return n("th",{key:t.id,class:e.headerClasses(t),attrs:{width:t.width},on:{click:function(i){t.sortable&&e.changeSort(t.value)}}},["Icon"===t.text?[n("v-btn",{attrs:{fab:"",small:"",depressed:"",disabled:e.tableActionDisabled}},[n("img",{attrs:{src:i("a5da"),alt:""}})])]:t.is_action?[n("img",{attrs:{src:i("a130")}})]:[e._v(" "+e._s(t.text)+" "),t.sortable?n("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]):e._e()]],2)})),e.hasHeaderIcon?n("th",[n("img",{attrs:{src:i("a130")}})]):e._e()],2)]}},{key:"item",fn:function(t){var i=t.item;return[e._t("custom-item",null,{item:i})]}},{key:"items",fn:function(t){return[n("tr",{staticClass:"table__body-row",attrs:{active:t.selected}},[e.$props.hasCheckbox&&!e.noRowDelete&&e.can_delete?n("td",{on:{click:function(e){t.selected=!t.selected}}},[n("v-checkbox",{attrs:{"input-value":t.selected,primary:"","hide-details":""}})],1):e._e(),e.showRowActions?e._t("row-actions",[n("td",{staticClass:"text-xs-center table__actions"},[!e.noRowEdit&&e.can_edit?e._t("row-edit",[n("v-btn",{attrs:{fab:"",small:"",flat:"",depressed:""},on:{click:function(i){return e.$emit("edit",t.item)}}},[n("img",{attrs:{src:i("206b"),alt:""}})])],{item:t.item}):e._e(),!e.noRowDelete&&e.can_delete?e._t("row-delete",[n("v-btn",{attrs:{fab:"",small:"",flat:"",depressed:""},on:{click:function(i){return e.$emit("delete",t.item)}}},[n("img",{attrs:{src:i("a5da"),alt:""}})])],{item:t.item}):e._e(),!e.noRowView&&e.can_view?e._t("row-view",[n("v-btn",{attrs:{fab:"",flat:"",small:"",depressed:""},on:{click:function(i){return e.$emit("view",t.item)}}},[n("v-icon",[e._v("pageview")])],1)],{item:t.item}):e._e()],2)],{item:t.item}):e._e()],2)]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},"v-data-table",e.$attrs,!1),[n("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}),n("template",{slot:"no-data"},[n("Empty")],1),n("template",{slot:"footer"},[n("td",{staticStyle:{padding:"0"},attrs:{colspan:"100%"}},[e._t("table-actions")],2)])],2)],2)])])},d=[],c=(i("55dd"),{name:"CustomTable",inheritAttrs:!1,props:{headers:Array,items:Array,loading:Boolean,hasCheckbox:Boolean,hasHeaderIcon:Boolean,sort:Object,toolbarTitle:String,noRowEdit:Boolean,noRowDelete:Boolean,noRowView:Boolean,showRowActions:{type:Boolean,default:!0},permission:Object},data:function(){return{selected:[]}},computed:{user:function(){return this.$store.getters.user},can_view:function(){return!!this.user.is_admin||this.permission&&this.permission.view},can_edit:function(){return!!this.user.is_admin||this.permission&&this.permission.update},can_delete:function(){return!!this.user.is_admin||this.permission&&this.permission.delete}},watch:{selected:function(e){var t=e.map((function(e){return e.id}));this.$emit("items-selected",t)}},methods:{toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},changeSort:function(e){this.$emit("sorted",e)},headerClasses:function(e){var t=["column"];return"sortable"in e&&(t.push("sortable"),this.sort.descending?t.push("desc"):t.push("asc"),e.value===this.sort.sortBy&&t.push("active")),t}}}),u=c,f=(i("5378"),i("6af0"),i("2877")),_=Object(f["a"])(u,l,d,!1,null,"6013032a",null),p=_.exports,h=i("5b70"),g=i("23ca"),m=i("36ee"),v=i("29d6"),b={name:"MembersTab",mixins:[s["a"]],components:{CustomTable:p,StaffDialog:g["a"],DeleteDialog:h["a"],VueGrid:m["a"],TableHeader:v["a"]},inheritAttrs:!1,props:{user_id:[Number,String]},data:function(){return{add_dialog:!1,staff_id:""}},computed:{dynamic_api:function(){return"api/clients/".concat(this.user_id,"/staffs")}},created:function(){this.fill_table_via_url(this.dynamic_api)},methods:{can_be_deleted:function(e){return!(e.is_admin||e.is_client)},load_more_users:function(){this.load_more_via_url(this.dynamic_api)},navigate_to_view_profile:function(e){this.$router.push({name:"client_profile",params:{user_id:e}})},handleAddStaff:function(e){var t=this;r.add_new_staff(this.user_id,e).then((function(e){var i=e.data;t.items.push(i)}))}}},w=b,$=(i("8b7f"),Object(f["a"])(w,n,a,!1,null,"37996314",null));t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-71f89178.11949a05.js.map