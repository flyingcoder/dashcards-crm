{"version":3,"sources":["webpack:///./src/common/Avatars.vue?6873","webpack:///./src/modules/Chat/components/Message/MessageV2.scss?ec3c","webpack:///./node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./node_modules/core-js/modules/es6.regexp.match.js","webpack:///./src/services/chats/chat_utils.js","webpack:///./src/common/Avatars.vue?ea16","webpack:///src/common/Avatars.vue","webpack:///./src/common/Avatars.vue?664a","webpack:///./src/common/Avatars.vue","webpack:///./src/assets/temp/no-video-preview.png","webpack:///./node_modules/core-js/modules/_same-value.js","webpack:///./src/modules/Chat/components/ChatBox/ChatBox.vue?93f5","webpack:///./src/modules/Chat/components/Message/Message.vue?cc47","webpack:///src/modules/Chat/components/Message/Message.vue","webpack:///./src/modules/Chat/components/Message/Message.vue?4d1c","webpack:///./src/modules/Chat/components/Message/Message.vue","webpack:///src/modules/Chat/components/ChatBox/ChatBox.vue","webpack:///./src/modules/Chat/components/ChatBox/ChatBox.vue?bca5","webpack:///./src/modules/Chat/components/ChatBox/ChatBox.vue","webpack:///./src/assets/temp/no-image.jpg"],"names":["$export","fails","defined","quot","createHTML","string","tag","attribute","value","S","String","p1","replace","module","exports","NAME","exec","O","P","F","test","toLowerCase","split","length","anObject","sameValue","regExpExec","SEARCH","$search","maybeCallNative","regexp","this","fn","undefined","call","RegExp","res","done","rx","previousLastIndex","lastIndex","result","index","toLength","advanceStringIndex","MATCH","$match","global","fullUnicode","unicode","A","n","matchStr","chat_utils","data","group_channel","chat_notification_channel","app_channel","user_list","group_list","active_chat","messages","next_url","message_loading","sending","contact_list_loading","scrolling","computed","mapGetters","onlineUsers","$store","getters","mentionable_list","type","users","filter","item","id","user","is_group_creator","group_creator","sorted_messages","sort","a","b","methods","get_conversation_list","cb","request","get","then","map","each","has","findIndex","us","is_online","finally","open_conversation","conversation","fetch_message","mark_read_conversation","get_conversation_messages","$event","$emit","post","message_count","next_page_url","scrollToEnd","get_previous_conversation_messages","el","$refs","chat_wrapper","height","scrollHeight","scrollTop","push","$nextTick","scroll_pos","scrollTo","send_conversation_message","formData","FormData","append","message","files","add_new_message","some","msg","typing","console","log","element_class_name","container","$el","querySelector","scrollToElement","setTimeout","getElementsByClassName","scrollIntoView","on_scroll_top","event","diff_from_top","target","render","_vm","_h","$createElement","_c","_self","staticClass","cutList","_l","key","attrs","scopedSlots","_u","ref","on","deep","_g","image_url","_e","_v","_s","fullname","less","domProps","lessList","staticRenderFns","component","Object","is","x","y","group_name","style","messageHeight","directives","name","rawName","expression","staticStyle","no_active_convo_height","class","me_sender","mine","sender","_f","created_at","body","media"],"mappings":"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","file":"js/chunk-5ac9324b.73164932.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatars.vue?vue&type=style&index=0&id=ee48b49c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatars.vue?vue&type=style&index=0&id=ee48b49c&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./MessageV2.scss?vue&type=style&index=0&id=dd40187c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./MessageV2.scss?vue&type=style&index=0&id=dd40187c&lang=scss&scoped=true&\"","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","'use strict';\n\nvar anObject = require('./_an-object');\nvar sameValue = require('./_same-value');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[SEARCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative($search, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","'use strict';\n\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar advanceStringIndex = require('./_advance-string-index');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@match logic\nrequire('./_fix-re-wks')('match', 1, function (defined, MATCH, $match, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[MATCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative($match, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      if (!rx.global) return regExpExec(rx, S);\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","import {mapGetters} from \"vuex\";\r\nimport request from '@/services/axios_instance'\r\n\r\nexport const chat_utils = {\r\n    data: () => ({\r\n        group_channel: null,\r\n        chat_notification_channel: null,\r\n        app_channel: null,\r\n        user_list: [],\r\n        group_list: [],\r\n        active_chat: null,\r\n        messages: [],\r\n        next_url: null,\r\n        message_loading: false,\r\n        sending: false,\r\n        contact_list_loading: false,\r\n        scrolling: false\r\n    }),\r\n\r\n    computed: {\r\n        ...mapGetters(['user']),\r\n        onlineUsers() {\r\n            return this.$store.getters['onlineUsers/all_users']\r\n        },\r\n        mentionable_list() {\r\n            if (!this.active_chat) return []\r\n            if (this.active_chat.type && this.active_chat.users)\r\n                return this.active_chat.users.filter(item => {\r\n                    return item.id !== this.user.id\r\n                })\r\n            return this.active_chat.user ? [this.active_chat.user] : []\r\n        },\r\n        is_group_creator() {\r\n            if (!this.active_chat) return false\r\n            return this.user.id === this.active_chat.data.group_creator\r\n        },\r\n        sorted_messages() {\r\n            if (!this.messages.length) return []\r\n            return this.messages.sort(function (a, b) {\r\n                return a.id - b.id\r\n            });\r\n        }\r\n    },\r\n    methods: {\r\n\r\n        get_conversation_list(cb) {\r\n            this.contact_list_loading = true\r\n            request.get(`api/chat/conversations/list?has_msg_count=true`)\r\n                .then(({data}) => {\r\n                    /*map online to list*/\r\n                    this.user_list = data.user_list.map(each => {\r\n                        let has = this.onlineUsers.findIndex(us => us.id === each.id)\r\n                        each.is_online = !!(~has)\r\n                        return each\r\n                    });\r\n                    this.group_list = data.group_list\r\n                    if (typeof cb === 'function')\r\n                        cb(data)\r\n                })\r\n                .finally(() => this.contact_list_loading = false)\r\n        },\r\n        open_conversation(conversation, fetch_message) {\r\n            this.active_chat = conversation\r\n            this.mark_read_conversation(conversation)\r\n            if (fetch_message)\r\n                this.get_conversation_messages(conversation)\r\n\r\n            this.$event.$emit('conversation-opened', conversation)\r\n        },\r\n        mark_read_conversation(conversation) {\r\n            if (conversation) {\r\n                request.post(`api/chat/conversations/${conversation.id}/mark-as-read`)\r\n                    .then(({data}) => {\r\n                        if (!conversation.type) {\r\n                            let index = this.user_list.findIndex(item => item.conversation.id === conversation.id)\r\n                            if (~index) {\r\n                                this.user_list[index].message_count = 0\r\n                            }\r\n                        } else {\r\n                            let index = this.group_list.findIndex(item => item.id === conversation.id)\r\n                            if (~index) {\r\n                                this.group_list[index].message_count = 0\r\n                            }\r\n                        }\r\n\r\n                    })\r\n            }\r\n        },\r\n        get_conversation_messages(conversation) {\r\n            if (conversation) {\r\n                this.messages = []\r\n                this.message_loading = true\r\n                request.get(`api/chat/conversations/${conversation.id}/messages?page=1`)\r\n                    .then(({data}) => {\r\n                        this.messages = data.data\r\n                        this.next_url = data.next_page_url\r\n                    })\r\n                    .finally(() => {\r\n                        this.message_loading = false\r\n                        this.scrollToEnd('.messages-wrapper')\r\n                    })\r\n            }\r\n        },\r\n        get_previous_conversation_messages() {\r\n            let el = this.$refs.chat_wrapper\r\n            const height = el.scrollHeight + el.scrollTop\r\n            this.message_loading = true\r\n            this.scrolling = true\r\n            request.get(this.next_url)\r\n                .then(({data}) => {\r\n                    this.messages.push(...data.data)\r\n                    this.next_url = data.next_page_url\r\n                    this.$nextTick(() => {\r\n                        const scroll_pos = el.scrollHeight - el.scrollTop - height\r\n                        el.scrollTo(0, scroll_pos)\r\n                    })\r\n                })\r\n                .finally(() => {\r\n                    this.scrolling = false\r\n                    this.message_loading = false\r\n                })\r\n        },\r\n        send_conversation_message(data, cb) {\r\n            this.sending = true\r\n            let formData = new FormData()\r\n            formData.append('message', data.message)\r\n            formData.append('conversation_id', this.active_chat.id)\r\n            if (data.files.length > 0) {\r\n                formData.append('file', data.files[0])\r\n            }\r\n            request.post(`api/chat/conversations/${this.active_chat.id}/messages`, formData)\r\n                .then(({data}) => {\r\n                    this.messages.push(data)\r\n                    if (typeof cb === 'function')\r\n                        cb(data)\r\n                })\r\n                .finally(() => {\r\n                    this.scrollToEnd('.messages-wrapper')\r\n                    this.sending = false\r\n                    this.$event.$emit('btnsending_off', false)\r\n                })\r\n        },\r\n        add_new_message(message) {\r\n            if (!this.messages.some(msg => msg.id === message.id)) {\r\n                this.messages.push(message)\r\n            }\r\n        },\r\n        typing() {\r\n            //todo actual typing notif on opposite side\r\n            console.log('typing...')\r\n        },\r\n        scrollToEnd(element_class_name) {\r\n            const container = this.$el.querySelector(element_class_name);\r\n            if (container) container.scrollTop = container.scrollHeight;\r\n        },\r\n        scrollToElement(element_class_name) {\r\n            setTimeout(() => {\r\n                const el = this.$el.getElementsByClassName(element_class_name)[\r\n                this.$el.getElementsByClassName(element_class_name).length - 1\r\n                    ];\r\n                if (el) el.scrollIntoView();\r\n            }, 50);\r\n        },\r\n        on_scroll_top(event) {\r\n            if (!this.next_url || this.scrolling) return\r\n            const diff_from_top = event.target.scrollTop\r\n            if (diff_from_top <= 50)\r\n                this.get_previous_conversation_messages()\r\n        }\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"avatar-wrapper\"},[_c('ul',{staticClass:\"avatars\"},[(_vm.cutList.length > 0)?_vm._l((_vm.cutList),function(item,index){return _c('li',{key:index,staticClass:\"avatars__item\"},[_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [(_vm.deep && item.user)?_c('img',_vm._g({staticClass:\"avatars__img\",attrs:{\"src\":item.user.image_url}},on)):(item)?_c('img',_vm._g({staticClass:\"avatars__img\",attrs:{\"src\":item.image_url}},on)):_vm._e()]}}],null,true)},[(_vm.deep && item.user)?_c('span',[_vm._v(_vm._s(item.user.fullname))]):(item)?_c('span',[_vm._v(_vm._s(item.fullname))]):_vm._e()])],1)}):_vm._e(),(_vm.less > 0)?_c('li',{staticClass:\"avatars__item\"},[_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({staticClass:\"avatars__others\"},on),[_vm._v(\"+\"+_vm._s(_vm.less))])]}}],null,false,1062212335)},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.lessList)}})])],1):_vm._e(),(_vm.hasAddMember)?_c('li',{staticClass:\"avatars__item\"},[_c('span',{staticClass:\"avatars__add\"},[_c('v-icon',{attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$emit('add-member')}}},[_vm._v(\"add\")])],1)]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"avatar-wrapper\">\r\n        <ul class=\"avatars\">\r\n            <template v-if=\"cutList.length > 0\">\r\n                <li class=\"avatars__item\" v-for=\"(item, index) in cutList\" :key=\"index\">\r\n                    <v-tooltip top>\r\n                        <template v-slot:activator=\"{ on }\">\r\n                            <img v-on=\"on\" v-if=\"deep && item.user\" :src=\"item.user.image_url\" class=\"avatars__img\">\r\n                            <img v-on=\"on\" v-else-if=\"item\" :src=\"item.image_url\" class=\"avatars__img\">\r\n                        </template>\r\n                        <span v-if=\"deep && item.user\">{{ item.user.fullname }}</span>\r\n                        <span v-else-if=\"item\">{{ item.fullname }}</span>\r\n                    </v-tooltip>\r\n                </li>\r\n            </template>\r\n            <li class=\"avatars__item\" v-if=\"less > 0\">\r\n                <v-tooltip top>\r\n                    <template v-slot:activator=\"{ on }\">\r\n                        <span class=\"avatars__others\" v-on=\"on\">+{{ less }}</span>\r\n                    </template>\r\n                    <span v-html=\"lessList\"/>\r\n                </v-tooltip>\r\n            </li>\r\n            <li class=\"avatars__item\" v-if=\"hasAddMember\">\r\n                <span class=\"avatars__add\">\r\n                    <v-icon dark @click=\"$emit('add-member')\">add</v-icon>\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n<script>\r\n    import _cloneDeep from 'lodash/cloneDeep'\r\n\r\n    export default {\r\n        inheritAttrs: false,\r\n        props: {\r\n            items: {type: Array, default: () => []},\r\n            count: {type: Number, default: 3},\r\n            deep: {type: Boolean, default: false},\r\n            hasAddMember: {type: Boolean, default: false}\r\n        },\r\n        computed: {\r\n            less() {\r\n                return this.items.length - this.count\r\n            },\r\n            cutList() {\r\n                if (this.items.length < this.count) {\r\n                    return this.items\r\n                }\r\n                return _cloneDeep(this.items).slice(0, this.count)\r\n            },\r\n            lessList() {\r\n                var remain = _cloneDeep(this.items).slice(this.count, this.items.length)\r\n                if (remain.length > 0) {\r\n                    return remain\r\n                        .map(o => {\r\n                            return this.deep ?\r\n                                o.user ?\r\n                                    o.user.fullname :\r\n                                    'Deleted User' :\r\n                                o ?\r\n                                    o.fullname :\r\n                                    'Deleted User'\r\n                        })\r\n                        .join('<br>')\r\n                }\r\n                return 'Deleted User'\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    @import '~@/sass/variables';\r\n\r\n    div.avatar-wrapper {\r\n        display: flex;\r\n    }\r\n\r\n    ul.avatars {\r\n        display: flex;\r\n        list-style-type: none;\r\n        margin: 2px auto;\r\n        padding: 0px 7px 0px 0px;\r\n    }\r\n\r\n    li.avatars__item {\r\n        margin: 0px -10px 0px 0px;\r\n        padding: 0px 0px 0px 0px;\r\n        position: relative;\r\n    }\r\n\r\n    img.avatars__img,\r\n    span.avatars__initials,\r\n    span.avatars__others,\r\n    span.avatars__add {\r\n        background-color: $blue !important;\r\n        border: 2px solid $white;\r\n        border-radius: 100px;\r\n        color: $white;\r\n        display: block;\r\n        font-family: sans-serif;\r\n        font-size: 12px;\r\n        font-weight: bolder;\r\n        height: 45px;\r\n        line-height: 42px;\r\n        text-align: center;\r\n        width: 45px;\r\n    }\r\n\r\n    span.avatars__others {\r\n        background-color: $lightGray-3;\r\n    }\r\n\r\n    span.avatars__add {\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatars.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatars.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Avatars.vue?vue&type=template&id=ee48b49c&scoped=true&\"\nimport script from \"./Avatars.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatars.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Avatars.vue?vue&type=style&index=0&id=ee48b49c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee48b49c\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/no-video-preview.6c0717ce.png\";","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"outlined\":\"\",\"flat\":\"\"}},[(_vm.hasToolbar)?[(_vm.conversation)?_c('v-toolbar',{attrs:{\"color\":\"#3b589e\",\"dark\":\"\"}},[(_vm.conversation.type)?[_c('Avatars',{attrs:{\"items\":_vm.conversation.users,\"count\":3}}),_c('v-toolbar-title',{staticClass:\"ml-2\"},[_vm._v(_vm._s(_vm.conversation.data.group_name))])]:[_c('Avatar',{attrs:{\"user\":_vm.conversation.user}})],_c('v-spacer'),(_vm.conversation.type && _vm.is_group_creator)?_c('v-btn',{staticClass:\"mr-1\",attrs:{\"icon\":\"\"}},[_c('v-icon',{on:{\"click\":function($event){return _vm.$emit('manage-chat-members')}}},[_vm._v(\"mdi-account-multiple-plus-outline\")])],1):_vm._e()],2):_c('v-toolbar',{attrs:{\"flat\":\"\"}})]:_vm._e(),(_vm.conversation)?_c('section',{attrs:{\"id\":\"chat-box-wrapper\"}},[_c('v-card-text',{ref:\"chat_wrapper\",staticClass:\"messages-wrapper\",style:((\"height:\" + _vm.messageHeight + \"px;overflow-y:auto;\")),on:{\"scroll\":_vm.on_scroll_top}},[_c('v-progress-linear',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scrolling || _vm.message_loading),expression:\"scrolling || message_loading\"}],staticClass:\"mb-1\",attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"reverse\":\"\"}}),(_vm.messages.length === 0 && !(_vm.scrolling || _vm.message_loading))?_c('empty',{staticStyle:{\"height\":\"100%\"},attrs:{\"headline\":\"No Message yet\",\"icon\":\"mdi-wechat\"}}):(_vm.sorted_messages.length > 0)?_vm._l((_vm.sorted_messages),function(message){return _c('Message',{key:message.id,attrs:{\"message\":message}})}):_vm._e()],2),_c('v-divider'),_c('v-card-actions',{attrs:{\"id\":\"chat-input-wrapper\"}},[_c('ChatField',{staticClass:\"mt-2\",attrs:{\"mentionables\":_vm.mentionable_list},on:{\"typing\":_vm.typing,\"send-message\":_vm.send_conversation_message}})],1)],1):_c('empty',{style:((\"height:\" + _vm.no_active_convo_height + \"px;\")),attrs:{\"headline\":\"No active conversation\",\"icon\":\"mdi-wechat\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"msg\",class:_vm.me_sender},[(!_vm.mine)?_c('Avatar',{attrs:{\"iconOnly\":\"\",\"user\":_vm.message.sender}}):_vm._e(),_c('div',{staticClass:\"msg-bubble\"},[(_vm.mine)?_c('div',{staticClass:\"msg-info\"},[_c('div',{staticClass:\"msg-info-time caption\"},[_vm._v(\" \"+_vm._s(_vm._f(\"from_now\")(_vm.message.created_at))+\" \")]),_c('div',{staticClass:\"msg-info-name subtitle-2\"},[_vm._v(\"Me\")])]):_c('div',{staticClass:\"msg-info\"},[_c('div',{staticClass:\"msg-info-name subtitle-2\"},[_vm._v(\" \"+_vm._s(_vm.message.sender.fullname)+\" \")]),_c('div',{staticClass:\"msg-info-time caption\"},[_vm._v(\" \"+_vm._s(_vm._f(\"from_now\")(_vm.message.created_at))+\" \")])]),_c('div',{staticClass:\"msg-text\"},[_c('div',{staticClass:\"body-2\",domProps:{\"innerHTML\":_vm._s(_vm.message.body)}}),(_vm.message.media)?_c('div',[(_vm.isImage)?_c('Images',{attrs:{\"media\":_vm.message.media}}):_vm._e(),(_vm.isDocs)?_c('Docs',{attrs:{\"media\":_vm.message.media}}):_vm._e(),(_vm.isLink)?_c('Link',{attrs:{\"media\":_vm.message.media}}):_vm._e(),(_vm.isVideo)?_c('Video',{attrs:{\"media\":_vm.message.media}}):_vm._e(),(_vm.isOther)?_c('Other',{attrs:{\"media\":_vm.message.media}}):_vm._e()],1):_vm._e()])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"msg\" :class=\"me_sender\">\r\n        <Avatar iconOnly :user=\"message.sender\" v-if=\"!mine\" />\r\n\r\n        <div class=\"msg-bubble\">\r\n            <div class=\"msg-info\" v-if=\"mine\">\r\n                <div class=\"msg-info-time caption\">\r\n                    {{ message.created_at | from_now }}\r\n                </div>\r\n                <div class=\"msg-info-name subtitle-2\">Me</div>\r\n            </div>\r\n            <div class=\"msg-info\" v-else>\r\n                <div class=\"msg-info-name subtitle-2\">\r\n                    {{ message.sender.fullname }}\r\n                </div>\r\n                <div class=\"msg-info-time caption\">\r\n                    {{ message.created_at | from_now }}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"msg-text\">\r\n                <div v-html=\"message.body\" class=\"body-2\" />\r\n                <div v-if=\"message.media\">\r\n                    <Images v-if=\"isImage\" :media=\"message.media\" />\r\n                    <Docs v-if=\"isDocs\" :media=\"message.media\" />\r\n                    <Link v-if=\"isLink\" :media=\"message.media\" />\r\n                    <Video v-if=\"isVideo\" :media=\"message.media\" />\r\n                    <Other v-if=\"isOther\" :media=\"message.media\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<style lang=\"scss\" scoped src=\"./MessageV2.scss\"></style>\r\n\r\n<script type=\"text/javascript\">\r\n    import {global_utils} from '@/global_utils/global_utils'\r\n    import Images from './Images.vue'\r\n    import Docs from './Docs.vue'\r\n    import Link from './Link.vue'\r\n    import Other from './Other.vue'\r\n    import Video from './Video.vue'\r\n\r\n    export default {\r\n        mixins: [global_utils],\r\n        components: {\r\n            Images,\r\n            Docs,\r\n            Link,\r\n            Other,\r\n            Video\r\n        },\r\n        props: {\r\n            id: Number,\r\n            message: Object\r\n        },\r\n        computed: {\r\n            onlineUsers() {\r\n                return this.$store.getters['onlineUsers/all_users']\r\n            },\r\n            mine() {\r\n                return this.message.sender.id === this.$store.getters.user.id\r\n            },\r\n            me_sender() {\r\n                return this.mine ? 'right-msg' : 'left-msg'\r\n            },\r\n            is_user_online() {\r\n                let inx = this.onlineUsers.findIndex(\r\n                    ii => ii.id === this.message.sender.id\r\n                )\r\n                return ~inx ? 'online' : 'offline'\r\n            },\r\n            isImage() {\r\n                return this.message.media.category === `images`\r\n            },\r\n            isVideo() {\r\n                return this.message.media.category === `videos`\r\n            },\r\n            isOther() {\r\n                return this.message.media.category === `others`\r\n            },\r\n            isLink() {\r\n                return this.message.media.category === `links`\r\n            },\r\n            isDocs() {\r\n                return this.message.media.category === `documents`\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=dd40187c&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageV2.scss?vue&type=style&index=0&id=dd40187c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd40187c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <v-card outlined flat>\r\n        <template v-if=\"hasToolbar\">\r\n            <v-toolbar color=\"#3b589e\" dark v-if=\"conversation\">\r\n                <template v-if=\"conversation.type\">\r\n                    <Avatars :items=\"conversation.users\" :count=\"3\"/>\r\n                    <v-toolbar-title class=\"ml-2\">{{ conversation.data.group_name }}</v-toolbar-title>\r\n                </template>\r\n                <template v-else>\r\n                    <Avatar :user=\"conversation.user\"/>\r\n                </template>\r\n                <v-spacer/>\r\n                <v-btn class=\"mr-1\" icon v-if=\"conversation.type && is_group_creator\">\r\n                    <v-icon @click=\"$emit('manage-chat-members')\">mdi-account-multiple-plus-outline</v-icon>\r\n                </v-btn>\r\n            </v-toolbar>\r\n            <v-toolbar flat v-else/>\r\n        </template>\r\n        <section id=\"chat-box-wrapper\" v-if=\"conversation\">\r\n            <v-card-text ref=\"chat_wrapper\" class=\"messages-wrapper\"\r\n                         :style=\"`height:${messageHeight}px;overflow-y:auto;`\"\r\n                         @scroll=\"on_scroll_top\"\r\n            >\r\n                <v-progress-linear color=\"primary\" class=\"mb-1\" indeterminate reverse\r\n                                   v-show=\"scrolling || message_loading\"/>\r\n                <empty style=\"height: 100%;\" headline=\"No Message yet\" icon=\"mdi-wechat\"\r\n                       v-if=\"messages.length === 0 && !(scrolling || message_loading)\"/>\r\n                <template v-else-if=\"sorted_messages.length > 0\">\r\n                    <Message v-for=\"message in sorted_messages\" :message=\"message\" :key=\"message.id\"/>\r\n                </template>\r\n            </v-card-text>\r\n            <v-divider/>\r\n            <v-card-actions id=\"chat-input-wrapper\">\r\n                <ChatField class=\"mt-2\"\r\n                           :mentionables=\"mentionable_list\"\r\n                           @typing=\"typing\"\r\n                           @send-message=\"send_conversation_message\"\r\n                />\r\n            </v-card-actions>\r\n        </section>\r\n        <empty v-else :style=\"`height:${no_active_convo_height}px;`\" headline=\"No active conversation\" icon=\"mdi-wechat\"/>\r\n    </v-card>\r\n</template>\r\n\r\n<script>\r\n    import ChatField from \"@/common/ChatBox/ChatField.vue\";\r\n    import {chat_utils} from \"@/services/chats/chat_utils\";\r\n    import Avatars from \"@/common/Avatars.vue\";\r\n    import Message from \"../Message/Message.vue\";\r\n\r\n    export default {\r\n        name: \"ChatBox\",\r\n        mixins: [chat_utils],\r\n        components: {\r\n            Avatars,\r\n            ChatField,\r\n            Message\r\n        },\r\n        props: {\r\n            messageHeight: {type: Number, default: 500},\r\n            conversation: Object,\r\n            hasToolbar: { type: Boolean, default: true }\r\n        },\r\n        computed: {\r\n            no_active_convo_height() {\r\n                return this.messages.length === 0 ? this.messageHeight + this.chat_input_height : 0\r\n            },\r\n            chat_input_height() {\r\n                return document.getElementById('chat-input-wrapper')\r\n                    ? document.getElementById('chat-input-wrapper').offsetHeight\r\n                    : 0\r\n            }\r\n        },\r\n        mounted() {\r\n            //emit from Dashboard.js\r\n            this.$event.$on('new-chat-message-received', message => {\r\n                if (this.active_chat && this.active_chat.id === message.conversation.id) {\r\n                    this.add_new_message(message)\r\n                    this.scrollToEnd('.messages-wrapper')\r\n                }\r\n            })\r\n        },\r\n        watch: {\r\n            conversation: {\r\n                handler(val) {\r\n                    if (val) {\r\n                        this.active_chat = val\r\n                        this.get_conversation_messages(val)\r\n                    }\r\n                },\r\n                immediate: true,\r\n                deep: true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatBox.vue?vue&type=template&id=0f3c2b8c&scoped=true&\"\nimport script from \"./ChatBox.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f3c2b8c\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/jpeg;base64,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\""],"sourceRoot":""}