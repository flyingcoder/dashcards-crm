(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a0a8cc0"],{"13ea":function(t,e,i){var n=i("03dd"),s=i("42a2"),o=i("d370"),a=i("6747"),l=i("30c9"),r=i("0d24"),c=i("eac5"),u=i("73ac"),d="[object Map]",p="[object Set]",_=Object.prototype,f=_.hasOwnProperty;function g(t){if(null==t)return!0;if(l(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||r(t)||u(t)||o(t)))return!t.length;var e=s(t);if(e==d||e==p)return!t.size;if(c(t))return!n(t).length;for(var i in t)if(f.call(t,i))return!1;return!0}t.exports=g},"174f":function(t,e,i){},"259d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"breadcrumb-wrapper"},[i("v-breadcrumbs",{attrs:{items:t.paths},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[i("v-breadcrumbs-item",{staticClass:"page__title",attrs:{disabled:n.disabled}},[i("span",{on:{click:function(e){return t.navigate_from_breadcrumb(n)}}},[t._v(" "+t._s(n.text)+" ")])])]}}])},[i("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")])],1),t._t("extra")],2)},s=[],o={name:"Breadcrumb",props:{paths:{type:Array,default:function(){return[]}}},methods:{navigate_from_breadcrumb:function(t){if(t.hasOwnProperty("path"))t.path&&this.$router.push({path:t.path});else{var e=t.router_name;e&&this.$router.push({name:e})}}}},a=o,l=(i("fe54"),i("573a"),i("2877")),r=Object(l["a"])(a,n,s,!1,null,"5c807bcd",null);e["a"]=r.exports},"2ab4":function(t,e,i){},"2fac":function(t,e,i){},"573a":function(t,e,i){"use strict";var n=i("c5c4"),s=i.n(n);s.a},"57e5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":t.maxWidth,scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):i("v-card",{staticClass:"custom__dialog"},[i("div",{staticClass:"dialog__header"},[t._t("entire-header",[t._t("title",[i("h3",{staticClass:"dialog__title"},[t._v(t._s(t.title))])]),t._t("extra-buttons"),t._t("cancel-icon",[i("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:"",depressed:""},on:{click:t.close_dialog}},[i("v-icon",[t._v("close")])],1)])]),t._t("below-title")],2),i("v-card-text",{staticClass:"dialog__body"},[t._t("content",[i("div",{domProps:{innerHTML:t._s(t.content)}})])],2),t.hasFooter?i("v-card-actions",{staticClass:"dialog__actions"},[t._t("entire-actions",[t._t("extras"),t._t("button1",[i("v-btn",{attrs:{disabled:t.btnloading},on:{click:t.button1clicked}},[t._v(t._s(t.button1Text))])]),t._t("button2",[i("v-btn",{attrs:{loading:t.btnloading,disabled:t.mainBtnDisabled},on:{click:t.button2clicked}},[t._v(t._s(t.button2Text))])])])],2):t._e()],1)],1)],1)},s=[],o=(i("c5f6"),{props:{title:{type:String,default:""},content:{type:String,default:""},button1Text:{type:String,default:"Cancel"},button2Text:{type:String,default:"Delete"},open:Boolean,value:Boolean,mainBtnDisabled:{type:Boolean,default:!1},hasFooter:{type:Boolean,default:!0},maxWidth:{type:[Number,String],default:"600px"}},data:function(){return{dialog:!1,loading:!1,btnloading:!1}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){t.btnloading=!1}))},watch:{value:{handler:function(t){this.dialog=t},immediate:!0},open:function(t){this.dialog=t,this.btnloading=!1},dialog:function(t){this.$emit("update:open",t),this.$emit("input",t)}},methods:{button1clicked:function(){this.$emit("button1"),this.close_dialog()},button2clicked:function(){this.btnloading=!0,this.$emit("button2")},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1,this.btnloading=!1,this.$emit("click:close",!0)},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.close_dialog()},activate_loading:function(){this.loading=!0},disable_loading:function(){this.loading=!1}}}),a=o,l=(i("f436"),i("5882"),i("2877")),r=Object(l["a"])(a,n,s,!1,null,"17401548",null);e["a"]=r.exports},5882:function(t,e,i){"use strict";var n=i("5c1e"),s=i.n(n);s.a},"5b70":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("custom-dialog",{attrs:{title:t.title,content:t.textContent,"button1-text":t.cancelButtonText,"button2-text":t.deleteButtonText,open:t.open},on:{"update:open":function(e){t.open=e},button1:t.cancel_clicked,button2:t.delete_clicked},scopedSlots:t._u([{key:"content",fn:function(){return[t._t("content",[i("v-banner",{attrs:{"two-line":"",outlined:"",tile:"",flat:""}},[i("v-icon",{attrs:{slot:"icon","x-large":"",color:"red accent-4"},slot:"icon"},[t._v(" mdi-alert-octagram ")]),i("p",{staticClass:"subtitle-1",domProps:{innerHTML:t._s(t.textContent)}})],1)])]},proxy:!0}],null,!0)})],1)},s=[],o=i("57e5"),a={components:{CustomDialog:o["a"]},props:{title:{type:String,default:"Default Modal Title"},textContent:{type:String,default:"Default Modal Text Content"},cancelButtonText:{type:String,default:"Cancel"},deleteButtonText:{type:String,default:"Yes, Delete"},openDialog:Boolean},data:function(){return{open:!1}},watch:{openDialog:function(t){this.open=t},open:function(t){this.$emit("update:openDialog",t)}},methods:{cancel_clicked:function(){this.open=!1},delete_clicked:function(){this.$emit("delete")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},l=a,r=i("2877"),c=Object(r["a"])(l,n,s,!1,null,null,null);e["a"]=c.exports},"5c1e":function(t,e,i){},"7e7e":function(t,e,i){"use strict";var n=i("174f"),s=i.n(n);s.a},b709:function(t,e,i){},be11:function(t,e,i){"use strict";var n=i("e8b3"),s=i.n(n);s.a},c5c4:function(t,e,i){},cbd8:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"permissions-table"},[i("permissions-dialog",{ref:"add_dialog",attrs:{dialog:t.add_dialog,title:"Add Permission"},on:{"update:dialog":function(e){t.add_dialog=e},save:function(e){return t.add_item("add_new_permission",e)}}}),i("permissions-dialog",{ref:"edit_dialog",attrs:{dialog:t.edit_dialog,title:"Edit Permission","is-edit-dialog":t.edit_dialog,"fields-to-edit":t.edit_item},on:{"update:dialog":function(e){t.edit_dialog=e},save:function(e){return t.update_item("update_permission",e)}}}),i("delete-dialog",{attrs:{"open-dialog":t.delete_dialog,title:"Delete Permission","text-content":"Are you sure you want to delete this permission?"},on:{"update:openDialog":function(e){t.delete_dialog=e},"update:open-dialog":function(e){t.delete_dialog=e},delete:function(e){return t.delete_item("delete_permission")}}}),i("VueTable",{key:t.componentKey,attrs:{items:t.items,headers:t.headers,showRowActions:!0,icon:"widgets",title:"Permissions",noMoreData:t.noMoreData,showSelect:!1,loading:t.loading,hasFooter:!1},scopedSlots:t._u([{key:"header-toolbar",fn:function(){return[i("v-select",{staticClass:"col-md-3 permissions-selection",attrs:{solo:"",flat:"",outlined:"",dense:"","hide-details":"",label:"Select Group",items:t.groups},model:{value:t.selected_group,callback:function(e){t.selected_group=e},expression:"selected_group"}})]},proxy:!0},{key:"row-slot",fn:function(e){var n=e.item;return[i("td",[t._v(t._s(t._f("removeSlug")(n.name)))]),i("td",[t._v(t._s(n.description))]),i("td",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"mx-2",attrs:{color:t.getCapability(n,1)}},"v-icon",o,!1),s),[t._v("mdi-account-check-outline")])]}}],null,!0)},[i("span",[t._v("Can view")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"mx-2",attrs:{color:t.getCapability(n,2)}},"v-icon",o,!1),s),[t._v("mdi-account-multiple-plus-outline")])]}}],null,!0)},[i("span",[t._v("Can create")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"mx-2",attrs:{color:t.getCapability(n,3)}},"v-icon",o,!1),s),[t._v("mdi-account-edit-outline")])]}}],null,!0)},[i("span",[t._v("Can update")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[i("v-icon",t._g(t._b({staticClass:"mx-2",attrs:{color:t.getCapability(n,4)}},"v-icon",o,!1),s),[t._v("mdi-account-multiple-remove-outline")])]}}],null,!0)},[i("span",[t._v("Can delete")])])],1),i("Actions",{attrs:{item:n,hasDelete:!1,hasView:!1,permissions:t.$_permissions.get("permissions")},on:{edit:function(e){return t.open_edit_dialog(n)}}})]}}])})],1)},s=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("28a5"),i("6b54"),i("7f7f"),i("ade3")),a=(i("386d"),i("a481"),i("c5f6"),i("e06e")),l=i("13ea"),r=i.n(l),c=i("1be9"),u={get_permissions:function(){return c["a"].get("api/permission?all=true")},get_default_permissions:function(){return c["a"].get("api/permission/defaults")},get_role_permissions:function(){return c["a"].get("api/roles/permissions")},get_default_roles:function(){return c["a"].get("api/roles/defaults")},get_company_roles:function(){return c["a"].get("api/roles/company")}},d=i("259d"),p=i("5b70"),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{"justify-center":""}},[i("custom-dialog",{ref:"dialog",attrs:{title:t.title,open:t.open,"button2-text":"Save"},on:{"update:open":function(e){t.open=e},button1:function(e){t.open=!1},button2:t.save}},[i("template",{slot:"content"},[i("v-row",{staticClass:"custom-dialog",attrs:{"no-gutters":""}},[t.fieldsToEdit?t._e():i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-select",{staticClass:"dialog__selectfield",attrs:{placeholder:"Select Group",items:t.group_items,solo:"","hide-details":"",color:"#657186","item-text":"name","item-value":"slug"},model:{value:t.selected_group,callback:function(e){t.selected_group="string"===typeof e?e.trim():e},expression:"selected_group"}})],1),t.fieldsToEdit?t._e():i("v-col",{attrs:{xs:"12",sm:"6"}},[i("v-autocomplete",{staticClass:"dialog__selectfield",attrs:{items:t.permissions,loading:t.loading_permissions,placeholder:"Select Permission","item-text":"name","item-value":"id",solo:"","hide-details":"",color:"#657186"},model:{value:t.selected_permission,callback:function(e){t.selected_permission="string"===typeof e?e.trim():e},expression:"selected_permission"}})],1),t.fieldsToEdit?i("v-col",{attrs:{xs:"12",sm:"12"}},[i("label",[t._v("Edit permission for "),i("strong",[t._v(t._s(t.permission_name))])])]):t._e(),i("div",{staticClass:"permissions"},[i("div",{staticClass:"title"},[i("div",{staticClass:"left-line line"}),i("h4",[t._v("Permissions")]),i("div",{staticClass:"right-line line"})]),i("v-row",{staticClass:"items",attrs:{"no-gutters":""}},[i("v-col",[i("v-switch",{staticClass:"mx-auto",attrs:{label:"View"},model:{value:t.slug.view,callback:function(e){t.$set(t.slug,"view",e)},expression:"slug.view"}})],1),i("v-col",[i("v-switch",{staticClass:"mx-auto",attrs:{label:"Create"},model:{value:t.slug.create,callback:function(e){t.$set(t.slug,"create",e)},expression:"slug.create"}})],1),i("v-col",[i("v-switch",{staticClass:"mx-auto",attrs:{label:"Update"},model:{value:t.slug.update,callback:function(e){t.$set(t.slug,"update",e)},expression:"slug.update"}})],1),i("v-col",[i("v-switch",{staticClass:"mx-auto",attrs:{label:"Delete"},model:{value:t.slug.delete,callback:function(e){t.$set(t.slug,"delete",e)},expression:"slug.delete"}})],1)],1)],1),i("v-col",{attrs:{xs:"12"}},[i("v-textarea",{staticClass:"dialog__textarea",attrs:{flat:"",label:"Description",solo:"","hide-details":"",color:"#657186"},model:{value:t.description,callback:function(e){t.description="string"===typeof e?e.trim():e},expression:"description"}})],1)],1)],1)],2)],1)},f=[],g=i("0644"),m=i.n(g),v=i("57e5"),h=i("d4e9"),b={name:"PermissionDialog",components:{CustomDialog:v["a"]},props:{dialog:Boolean,title:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,description:null,permission_name:null,selected_permission:null,selected_group:null,permissions:[],group_items:[],loading_permissions:!1,slug:{create:!1,view:!1,update:!1,delete:!1}}},watch:{dialog:{handler:function(t){this.open=t,t&&this.fill_group_items()},immediate:!0},open:function(t){this.$emit("update:dialog",t)},fieldsToEdit:{handler:function(t){this.isEditDialog&&this.update_fields(t)},deep:!0},"slug.create":function(t){t?this.slug.view=!0:this.slug.update=!1},"slug.update":function(t){t?this.slug.create=!0:this.slug.delete=!1},"slug.delete":function(t){t&&(this.slug.update=!0)},"slug.view":function(t){t||(this.slug={create:!1,view:!1,update:!1,delete:!1})}},created:function(){var t=this;this.loading_permissions=!0,u.get_default_permissions().then((function(e){var i=e.data;return t.permissions=i})).finally((function(){return t.loading_permissions=!1}))},methods:{fill_group_items:function(){var t=this;this.loading=!1,h["a"].get_all_groups().then((function(e){var i=e.data;return t.group_items=i})).finally((function(){return t.loading=!1}))},cancel:function(){this.open=!1},save:function(){var t={permission_id:this.selected_permission,group:this.selected_group,description:this.description,slug:this.slug};this.$emit("save",t)},update_fields:function(t){var e=t.fields,i=m()(e);this.selected_group=i.selected_group,this.description=i.description,this.slug=i.slug,this.permission_name=i.name},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},y=b,w=(i("eb39"),i("2877")),x=Object(w["a"])(y,_,f,!1,null,"390413fc",null),C=x.exports,k=i("0ebe"),S=i("ee09");function D(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var O={name:"PermissionsTable",mixins:[a["a"]],components:{VueTable:k["a"],Breadcrumb:d["a"],PermissionsDialog:C,DeleteDialog:p["a"],Actions:S["a"]},data:function(){return{headers:[{text:"Name",value:"name",sortable:!0,align:"left"},{text:"Description",value:"description",sortable:!0,align:"left"},{text:"Capability",value:"capability",sortable:!1,align:"left"},{text:"Action",sortable:!1,value:"action",width:"120px",align:"center"}],table_config:{route_name:"settings",add_message:"New Permission added successfully!",update_message:"Permission updated successfully!",delete_message:"Permission deleted successfully!",refresh_table_message:"Table refreshed",refresh_table_api_name:"paginate_permissions_table"},groups:[],selected_group:null,paths:[{text:"Settings",disabled:!1,route:{name:"settings"}},{text:"Permission",disabled:!0,route:null}]}},watch:{api_query:function(t,e){var i=Number(this.extract_per_page(t)),n=Number(this.extract_per_page(e))||null;this.items_response&&this.rows_per_page===this.items.length&&i!==n||(this.$router.replace({name:this.table_config.route_name,query:{tab:"permissions",page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting,role:this.selected_group}}),this.loading=!0,this.refresh_table(t))},selected_group:function(t){this.fill_table("get_role_permissions",!0,t)}},mounted:function(){this.$event.$emit("path-change",this.paths),this.fill_groups();var t=$({},this.$route.query);r()(t)||this.update_table_actions(t)},methods:{toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},capability_column:function(t){switch(!0){case t.view&&!t.create&&!t.update&&!t.delete:return 1;case t.view&&t.create&&!t.update&&!t.delete:return 2;case t.view&&t.create&&t.update&&!t.delete:return 3;case t.view&&t.create&&t.update&&t.delete:return 4;default:return 0}},fill_groups:function(){var t=this;u.get_company_roles().then((function(e){var i=e.data;t.groups=i.map((function(t){return{value:t.id,text:t.name}}))})).finally((function(){t.selected_group=t.groups[0].value}))},getCapability:function(t,e){return this.capability_column(t.slug)===e?"success":"grey"}},filters:{removeSlug:function(t){return t?(t=t.toString(),t.split(".")[0]):""}}},j=O,P=(i("be11"),Object(w["a"])(j,n,s,!1,null,"7e151ae5",null));e["default"]=P.exports},e8b3:function(t,e,i){},eb39:function(t,e,i){"use strict";var n=i("2fac"),s=i.n(n);s.a},ee09:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[t.hasEdit?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_edit,expression:"can_edit"}],attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("edit")}}},n),[i("v-icon",[t._v(t._s(t.editIcon))])],1)]}}],null,!1,4170341451)},[i("span",[t._v("Edit")])]):t._e(),t.hasView?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_view,expression:"can_view"}],attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("view")}}},n),[i("v-icon",[t._v(t._s(t.viewIcon))])],1)]}}],null,!1,701816587)},[i("span",[t._v("View")])]):t._e(),t.hasDelete?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_delete,expression:"can_delete"}],attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("delete")}}},n),[i("v-icon",[t._v(t._s(t.deleteIcon))])],1)]}}],null,!1,4164065227)},[i("span",[t._v("Delete")])]):t._e(),t._t("extra")],2)},s=[],o={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-circle-edit-outline"},viewIcon:{type:String,default:"mdi-eye-circle-outline"},deleteIcon:{type:String,default:"mdi-delete-circle-outline"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(t){this.item&&this.$emit(t,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},a=o,l=(i("7e7e"),i("2877")),r=Object(l["a"])(a,n,s,!1,null,null,null);e["a"]=r.exports},f436:function(t,e,i){"use strict";var n=i("b709"),s=i.n(n);s.a},fe54:function(t,e,i){"use strict";var n=i("2ab4"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-1a0a8cc0.c4d27215.js.map