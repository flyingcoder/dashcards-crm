(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6740d75f"],{"0885":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{"no-gutters":""}},[i("v-row",{staticClass:"table-headers mb-1"},[i("v-col",{staticClass:"text-left pl-5",attrs:{md:"5"}},[t._v("Description"),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"text-center",attrs:{md:"2"}},[t._v("Rate"),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"text-center",attrs:{md:"2"}},[t._v("Hours"),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"text-center",attrs:{md:"2"}},[t._v("Amount")]),i("v-col",{attrs:{md:"1"}},[i("v-icon",{staticClass:"green--text"},[t._v("mdi-check-circle")])],1)],1),t._l(t.rows,(function(e,n){return i("v-row",{key:n},[i("v-col",{attrs:{md:"5"}},[i("v-text-field",{staticClass:"textfield",attrs:{label:"Descriptions",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":"",disabled:"view"===t.dialog.type,value:e.descriptions},on:{input:function(e){return t.row_updated("descriptions",e,n)}}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{min:"0",type:"number",label:"Rate",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":"",disabled:"view"===t.dialog.type,value:e.rate},on:{input:function(e){return t.row_updated("rate",e,n)}}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{min:"0",type:"number",label:"Hours",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":"",disabled:"view"===t.dialog.type,value:e.hours},on:{input:function(e){return t.row_updated("hours",e,n)}}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{label:"Amount",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":"",value:e.amount,disabled:""}})],1),i("v-col",{attrs:{md:"1"}},[i("v-spacer"),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return["view"!==t.dialog.type?i("v-btn",t._g({staticClass:"action",attrs:{color:"#ff7f7c",outlined:"",icon:""},on:{click:function(e){return t.delete_row(n)}}},o),[i("v-icon",[t._v("delete")])],1):t._e()]}}],null,!0)},[i("span",[t._v("Remove From Items")])]),i("v-spacer")],1)],1)})),"view"!==t.dialog.type?i("v-row",{staticClass:"active"},[i("v-col",{attrs:{md:"5"}},[i("v-text-field",{staticClass:"textfield",attrs:{label:"Descriptions",solo:"",flat:"",outlined:"",dense:"",tile:"",color:"#657186","hide-details":""},model:{value:t.active_row.descriptions,callback:function(e){t.$set(t.active_row,"descriptions","string"===typeof e?e.trim():e)},expression:"active_row.descriptions"}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{min:"0",type:"number",label:"Rate",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":""},model:{value:t.active_row.rate,callback:function(e){t.$set(t.active_row,"rate",t._n("string"===typeof e?e.trim():e))},expression:"active_row.rate"}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{min:"0",type:"number",label:"Hours",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":""},model:{value:t.active_row.hours,callback:function(e){t.$set(t.active_row,"hours",t._n("string"===typeof e?e.trim():e))},expression:"active_row.hours"}})],1),i("v-col",{attrs:{md:"2"}},[i("v-text-field",{staticClass:"textfield",attrs:{label:"Amount",solo:"",flat:"",outlined:"",dense:"",color:"#657186","hide-details":"",value:t.calculate_amount(t.active_row),disabled:""}})],1),i("v-col",{attrs:{md:"1"}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({staticClass:"action",attrs:{color:"#1fb868",outlined:"",icon:"",disabled:t.should_disable},on:{click:t.add_new_row}},n),[i("v-icon",[t._v("mdi-content-save-move-outline")])],1)]}}],null,!1,77688834)},[i("span",[t._v("Add to Items")])])],1)],1):t._e(),i("v-divider")],2)},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("c5f6"),i("ade3")),s=i("2f62"),r=i("e6d3");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={data:function(){return{active_row:{descriptions:"",rate:"",hours:""}}},computed:c(c({},Object(s["c"])("invoice",["dialog","rows","selected_project"])),{},{should_disable:function(){var t=this.active_row,e=t.descriptions,i=t.rate,n=t.hours;return!e||!i||!n}}),watch:{selected_project:function(t){t&&this.fetch_projects_tasks(t)}},methods:{calculate_amount:function(t){return t.rate*t.hours},add_new_row:function(){var t=this.active_row,e=t.descriptions,i=t.rate,n=t.hours,o=this.calculate_amount(this.active_row);this.$store.commit("invoice/add_new_row",{descriptions:e,rate:i,hours:n,amount:o}),this.active_row={descriptions:"",rate:"",hours:""}},delete_row:function(t){this.$store.commit("invoice/delete_row",t)},row_updated:function(t,e,i){var n=c({},this.rows[i]);n[t]=Number(e),n.amount=n.hours*n.rate,this.$store.commit("invoice/update_row",{row:n,index:i})},fetch_projects_tasks:function(t){var e=this;this.$store.commit("set_custom_loader",!0),r["a"].get_projects_tasks(t).then((function(t){var i=t.data;return e.$store.dispatch("invoice/set_table_rows",i)})).finally((function(){return e.$store.commit("set_custom_loader",!1)}))}}},d=u,p=(i("9107f"),i("279a"),i("2877")),v=Object(p["a"])(d,n,o,!1,null,"65c3d8ea",null);e["a"]=v.exports},"0d5d":function(t,e,i){},"174f":function(t,e,i){},"200f":function(t,e,i){"use strict";var n=i("ff09"),o=i.n(n);o.a},"210b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-side"},[i("h3",{staticClass:"subtotal"},[t._v("Subtotal: "+t._s(t.subtotal)+" $")]),i("field",{attrs:{title:"Tax","symbol-type":"tax_symbol",symbol:t.tax.symbol,value:t.tax.value,classes:["tax","field"],show:t.tax.show},on:{input:function(e){return t.set_field({new_val:e,field:"tax"})},"toggle-symbol":function(e){return t.toggle_symbol("tax")},toggle_visibility:function(e){return t.toggle_visibility({new_val:e,field:"tax"})}}}),i("field",{attrs:{title:"Discount","symbol-type":"discount_symbol",symbol:t.discount.symbol,value:t.discount.value,classes:["discount","field"],show:t.discount.show},on:{input:function(e){return t.set_field({new_val:e,field:"discount"})},"toggle-symbol":function(e){return t.toggle_symbol("discount")},toggle_visibility:function(t){}}}),i("field",{attrs:{"no-symbol":"",title:"Shipping",value:t.shipping.value,classes:["shipping","field"],show:t.shipping.show},on:{input:function(e){return t.set_field({new_val:e,field:"shipping"})},toggle_visibility:function(e){return t.toggle_visibility({new_val:e,field:"shipping"})}}}),i("div",{staticClass:"fields-to-add"},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.discount.show,expression:"!discount.show"}],staticClass:"btn mr-1",attrs:{color:"#3b589e",dark:""},on:{click:function(e){return t.toggle_visibility({new_val:!t.discount.show,field:"discount"})}}},[i("v-icon",[t._v("add")]),t._v(" Discount ")],1),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.tax.show,expression:"!tax.show"}],staticClass:"btn mr-1",attrs:{color:"#3b589e",dark:""},on:{click:function(e){return t.toggle_visibility({new_val:!t.tax.show,field:"tax"})}}},[i("v-icon",[t._v("add")]),t._v(" Tax ")],1),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.shipping.show,expression:"!shipping.show"}],staticClass:"btn mr-1",attrs:{color:"#3b589e",dark:""},on:{click:function(e){return t.toggle_visibility({new_val:!t.shipping.show,field:"shipping"})}}},[i("v-icon",[t._v("add")]),t._v(" Shipping ")],1)],1),i("h2",{staticClass:"total my-3"},[t._v("Total: "+t._s(t.total)+" $")])],1)},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("c5f6"),i("ade3")),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.classes},[i("div",{staticClass:"field__label mr-2"},[t._v(t._s(t.title))]),i("v-text-field",{staticClass:"textfield",attrs:{text:"","hide-details":"",color:"657186",solo:"",type:"number",min:"0","full-width":"",value:t.value},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([t.noSymbol?null:{key:"append",fn:function(){return[i("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.symbol))])]},proxy:!0}],null,!0)},[t.noSymbol?t._e():i("v-tooltip",{staticClass:"toggle-btn",attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{icon:"",color:"#657186",text:""},on:{click:function(e){return t.$emit("toggle-symbol",t.symbolType)}}},n),[i("v-icon",[t._v("compare_arrows")])],1)]}}],null,!1,3112006633)},[i("span",[t._v("Toggle "+t._s(t.title))])])],1),i("v-btn",{staticClass:"ml-2",attrs:{outlined:"",color:"#ff7f7c",icon:""},on:{click:function(e){return t.$emit("toggle_visibility",!t.show)}}},[i("v-icon",[t._v("delete")])],1)],1)},r=[],l={props:{title:String,show:Boolean,classes:Array,value:[String,Number],symbol:String,symbolType:String,noSymbol:Boolean}},c=l,u=(i("9e8c"),i("3bd4"),i("2877")),d=Object(u["a"])(c,s,r,!1,null,"6d57c786",null),p=d.exports,v=i("2f62");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _={components:{Field:p},computed:m(m({},Object(v["c"])("invoice",["rows","tax","discount","shipping","dialog"])),{},{subtotal:function(){return this.rows.length?this.rows.reduce((function(t,e){return t+e.amount}),0):"0"},total:function(){var t=Number(this.subtotal);return this.discount.show&&("%"===this.discount.symbol?t-=Number(this.subtotal*this.discount.value/100):t-=Number(this.discount.value)),this.tax.show&&("%"===this.tax.symbol?t+=Number(this.subtotal*this.tax.value/100):t+=Number(this.tax.value)),this.shipping.show&&(t+=Number(this.shipping.value)),t}}),watch:{total:function(t){this.$store.commit("invoice/set_total_amount",t)}},methods:m({},Object(v["d"])("invoice",["toggle_visibility","set_field","toggle_symbol"]))},h=_,g=(i("5c05"),i("200f"),Object(u["a"])(h,n,o,!1,null,"bd661934",null));e["a"]=g.exports},"279a":function(t,e,i){"use strict";var n=i("91a5"),o=i.n(n);o.a},"2f94":function(t,e,i){},"33b0":function(t,e,i){"use strict";var n=i("b49a"),o=i.n(n);o.a},"3bd4":function(t,e,i){"use strict";var n=i("4c45"),o=i.n(n);o.a},4917:function(t,e,i){"use strict";var n=i("cb7c"),o=i("9def"),a=i("0390"),s=i("5f1b");i("214f")("match",1,(function(t,e,i,r){return[function(i){var n=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=r(i,t,this);if(e.done)return e.value;var l=n(t),c=String(this);if(!l.global)return s(l,c);var u=l.unicode;l.lastIndex=0;var d,p=[],v=0;while(null!==(d=s(l,c))){var f=String(d[0]);p[v]=f,""===f&&(l.lastIndex=a(c,o(l.lastIndex),u)),v++}return 0===v?null:p}]}))},"4abc":function(t,e,i){"use strict";var n=i("a799"),o=i.n(n);o.a},"4c45":function(t,e,i){},"52e9":function(t,e,i){},"53ca":function(t,e,i){"use strict";function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}i.d(e,"a",(function(){return n}))},"579d":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("4917"),i("c1df"),i("7f45");var n=i("7eac"),o={methods:{scrollToBottom:function(t){this.$nextTick((function(){"undefined"!==typeof t&&(t.scrollTop=t.scrollHeight-t.getBoundingClientRect().height)}))},addHost:function(t){return"undefined"===typeof t?n["a"].apiHostBaseURL:0!==t.indexOf("http://")&&0!==t.indexOf("https://")?n["a"].apiHostBaseURL+t:t},altImage:function(t){t&&t.hasOwnProperty("collection_name")&&"project.files.videos"===t.collection_name?(t.thumb_url=i("7335"),t.public_url=i("7335")):(t.thumb_url=i("e55f"),t.public_url=i("e55f"))},generate_random:function(t,e,i){for(var n=[],o=0;o<t;o++)n.push(parseInt((Math.random()*(i-e)+e).toFixed(0)));return n},youtubeParser:function(t){var e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=t.match(e);return!(!i||11!==i[7].length)&&i[7]}}}},"57e5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{"justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":t.maxWidth,scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?i("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"}):i("v-card",{staticClass:"custom__dialog"},[i("div",{staticClass:"dialog__header"},[t._t("entire-header",[t._t("title",[i("h3",{staticClass:"dialog__title"},[t._v(t._s(t.title))])]),t._t("extra-buttons"),t._t("cancel-icon",[i("v-btn",{staticClass:"close__dialog",attrs:{fab:"",small:"",depressed:""},on:{click:t.close_dialog}},[i("v-icon",[t._v("close")])],1)])]),t._t("below-title")],2),i("v-card-text",{staticClass:"dialog__body"},[t._t("content",[i("div",{domProps:{innerHTML:t._s(t.content)}})])],2),t.hasFooter?i("v-card-actions",{staticClass:"dialog__actions"},[t._t("entire-actions",[t._t("extras"),t._t("button1",[i("v-btn",{attrs:{disabled:t.btnloading},on:{click:t.button1clicked}},[t._v(t._s(t.button1Text))])]),t._t("button2",[i("v-btn",{attrs:{loading:t.btnloading,disabled:t.mainBtnDisabled},on:{click:t.button2clicked}},[t._v(t._s(t.button2Text))])])])],2):t._e()],1)],1)],1)},o=[],a=(i("c5f6"),{props:{title:{type:String,default:""},content:{type:String,default:""},button1Text:{type:String,default:"Cancel"},button2Text:{type:String,default:"Delete"},open:Boolean,value:Boolean,mainBtnDisabled:{type:Boolean,default:!1},hasFooter:{type:Boolean,default:!0},maxWidth:{type:[Number,String],default:"600px"}},data:function(){return{dialog:!1,loading:!1,btnloading:!1}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){t.btnloading=!1}))},watch:{value:{handler:function(t){this.dialog=t},immediate:!0},open:function(t){this.dialog=t,this.btnloading=!1},dialog:function(t){this.$emit("update:open",t),this.$emit("input",t)}},methods:{button1clicked:function(){this.$emit("button1"),this.close_dialog()},button2clicked:function(){this.btnloading=!0,this.$emit("button2")},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1,this.btnloading=!1,this.$emit("click:close",!0)},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.close_dialog()},activate_loading:function(){this.loading=!0},disable_loading:function(){this.loading=!1}}}),s=a,r=(i("f436"),i("5882"),i("2877")),l=Object(r["a"])(s,n,o,!1,null,"17401548",null);e["a"]=l.exports},5882:function(t,e,i){"use strict";var n=i("5c1e"),o=i.n(n);o.a},"5b70":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("custom-dialog",{attrs:{title:t.title,content:t.textContent,"button1-text":t.cancelButtonText,"button2-text":t.deleteButtonText,open:t.open},on:{"update:open":function(e){t.open=e},button1:t.cancel_clicked,button2:t.delete_clicked},scopedSlots:t._u([{key:"content",fn:function(){return[i("v-alert",{staticClass:"my-4",attrs:{outlined:"",type:"warning",prominent:""}},[i("v-row",{attrs:{align:"center"}},[i("v-col",{staticClass:"grow",domProps:{innerHTML:t._s(t.textContent)}})],1)],1)]},proxy:!0}])})],1)},o=[],a=i("57e5"),s={components:{CustomDialog:a["a"]},props:{title:{type:String,default:"Default Modal Title"},textContent:{type:String,default:"Default Modal Text Content"},cancelButtonText:{type:String,default:"Cancel"},deleteButtonText:{type:String,default:"Yes, Delete"},openDialog:Boolean},data:function(){return{open:!1}},watch:{openDialog:function(t){this.open=t},open:function(t){this.$emit("update:openDialog",t)}},methods:{cancel_clicked:function(){this.open=!1},delete_clicked:function(){this.$emit("delete")},showDialog:function(){this.open=!0},closeDialog:function(){this.open=!1}}},r=s,l=i("2877"),c=Object(l["a"])(r,n,o,!1,null,null,null);e["a"]=c.exports},"5c05":function(t,e,i){"use strict";var n=i("2f94"),o=i.n(n);o.a},"5c1e":function(t,e,i){},7335:function(t,e,i){t.exports=i.p+"img/no-video-preview.6c0717ce.png"},"7e7e":function(t,e,i){"use strict";var n=i("174f"),o=i.n(n);o.a},9107:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"invoice-template-dialog"},[i("custom-dialog",{ref:"dialog",attrs:{hasFooter:!1,title:t.dialogTitle,maxWidth:900},on:{button1:t.cancel},scopedSlots:t._u([{key:"extra-buttons",fn:function(){return[i("v-spacer"),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({staticClass:"mr-2",attrs:{text:"",outlined:""},on:{click:t.downloadPDF}},n),[i("v-icon",{attrs:{left:""}},[t._v("mdi-download")]),t._v(" Download PDF ")],1)]}}])},[i("span",[t._v("Download PDF")])])]},proxy:!0},{key:"content",fn:function(){return[i("v-row",{staticClass:"custom-dialog",attrs:{wrap:""}},[t.item?i("v-col",{attrs:{grow:""}},[i("iframe",{staticClass:"iframe",style:t.style,attrs:{srcdoc:t.parseTemplate},on:{onload:t.resizeIframe}})]):t._e()],1)]},proxy:!0}])})],1)},o=[],a=i("1be9"),s=i("57e5"),r={components:{CustomDialog:s["a"]},data:function(){return{open:!1,loading:!1,parseTemplate:"",item:null}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){return t.btnloading=e}))},computed:{user:function(){return this.$store.getters.user},can_pay:function(){return this.item.billed_to===this.user.id},property:function(){return this.item.props?"string"===typeof this.item.props?JSON.parse(this.item.props):this.item.props:{send_email:!1,template:null}},style:function(){return"min-height:470px; width: 100%;border:none;"},dialogTitle:function(){return this.item?this.item.title:"View Invoice"}},methods:{cancel:function(){this.$refs.dialog.close_dialog()},open_dialog:function(t){this.item=t,this.getParseHtml(),this.$refs.dialog.open_dialog()},resizeIframe:function(t){t.style.height=t.contentWindow.document.documentElement.scrollHeight+"px"},getParseHtml:function(){var t=this;a["a"].get("api/invoice/".concat(this.item.id,"/parse-template")).then((function(e){var i=e.data;t.parseTemplate=i.html}))},downloadPDF:function(){a["a"].get("api/invoice/".concat(this.item.id,"/download")).then((function(t){var e=t.data;window.open(e.url,"_blank")}))}}},l=r,c=i("2877"),u=Object(c["a"])(l,n,o,!1,null,null,null);e["a"]=u.exports},"9107f":function(t,e,i){"use strict";var n=i("a72e"),o=i.n(n);o.a},"91a5":function(t,e,i){},"947e":function(t,e,i){"use strict";var n=i("0d5d"),o=i.n(n);o.a},9725:function(t,e,i){"use strict";var n=i("52e9"),o=i.n(n);o.a},"9e8c":function(t,e,i){"use strict";var n=i("e51b"),o=i.n(n);o.a},a72e:function(t,e,i){},a799:function(t,e,i){},b49a:function(t,e,i){},b709:function(t,e,i){},c97a:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g(t._b({attrs:{slot:"activator",value:t.value,solo:"","hide-details":"",color:"#657186",readonly:"",width:t.minWidth},slot:"activator"},"v-text-field",t.$attrs,!1),n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{clearable:"",color:"#657186",max:t.max,min:t.min,"no-title":"",scrollable:""},on:{"click:date":t.dateClick},model:{value:t.picker_date,callback:function(e){t.picker_date=e},expression:"picker_date"}},[i("v-spacer"),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.cancel}},[t._v("Cancel")]):t._e(),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.save}},[t._v("OK")]):t._e(),t.hasButtons?i("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.clear}},[t._v("Clear")]):t._e()],1)],1)},o=[],a={name:"DatePicker",inheritAttrs:!1,props:{value:{type:String,default:null},min:{type:String,default:null},max:{type:String,default:null},minWidth:{type:String,default:"290px"},hasButtons:{type:Boolean,default:!0}},data:function(){return{menu:!1,picker_date:null}},watch:{value:function(t){this.picker_date=t}},methods:{save:function(){this.$emit("input",this.picker_date),this.cancel()},cancel:function(){this.menu=!1},clear:function(){this.picker_date=null},dateClick:function(){this.hasButtons||this.save()}}},s=a,r=(i("33b0"),i("2877")),l=Object(r["a"])(s,n,o,!1,null,"7a290484",null);e["a"]=l.exports},cae5:function(t,e,i){"use strict";var n=i("cf8a"),o=i.n(n);o.a},cf8a:function(t,e,i){},d7fe:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("custom-dialog",{ref:"dialog",attrs:{title:t.dialogTitle,hasFooter:!1,open:t.open,maxWidth:"800px"},on:{"update:open":function(e){t.open=e}}},[i("template",{slot:"content"},[i("v-stepper",{staticClass:"invoice-dialog",attrs:{"alt-labels":"",flat:""},model:{value:t.stepper,callback:function(e){t.stepper=e},expression:"stepper"}},[i("v-stepper-header",{attrs:{flat:""}},[i("v-stepper-step",{attrs:{rules:[t.stepOneRules],complete:t.stepper>1,step:"1"}},[t._v("Basic Info")]),i("v-divider"),i("v-stepper-step",{attrs:{rules:[t.stepTwoRules],complete:t.stepper>2,step:"2"}},[t._v("Additional Info")]),i("v-divider"),i("v-stepper-step",{attrs:{step:"3"}},[t._v("Customize & Save")])],1),i("v-stepper-items",[i("v-stepper-content",{attrs:{step:"1"}},[i("v-card",{attrs:{flat:""}},[i("StepOne",{attrs:{projectLock:t.projectLock}})],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-spacer"),i("v-btn",{staticClass:"mx-1 action",attrs:{disabled:!t.can_proceed_two},on:{click:function(e){t.stepper=2}}},[t._v(" Next "),i("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",{staticClass:"mb-12",attrs:{flat:""}},[i("StepTwo")],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-btn",{staticClass:"mx-1 action",on:{click:function(e){t.stepper=1}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v(" Previous ")],1),i("v-spacer"),i("v-btn",{staticClass:"mx-1 action",attrs:{disabled:!t.can_proceed_three},on:{click:function(e){t.stepper=3}}},[t._v(" Next "),i("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"3"}},[i("v-card",{staticClass:"mb-12",attrs:{flat:""}},[i("StepThree")],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-btn",{staticClass:"mx-1 action",on:{click:function(e){t.stepper=2}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v(" Previous ")],1),i("v-spacer"),i("v-btn",{staticClass:"mx-1 action",attrs:{loading:t.btnloading,disabled:!t.can_submit},on:{click:t.save_invoice}},[t._v(" "+t._s(t.buttonLabel)+" "),i("v-icon",{attrs:{right:""}},[t._v("mdi-content-save-move-outline")])],1)],1)],1)],1)],1)],1)],2)},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("ade3")),s=i("2f62"),r=i("e6d3"),l=i("57e5"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{staticClass:"step-one",attrs:{align:"center","no-gutters":""}},["create"!==t.dialog.type?i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"12"}},[t._v("Invoice ID")]):t._e(),"create"!==t.dialog.type?i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"12"}},[i("v-text-field",{staticClass:"textfield",attrs:{disabled:"edit"===t.dialog.type,outlined:"",dense:"",color:"#657186",solo:"","hide-details":"",flat:"",placeholder:"#",value:"#INV-"+t.invoice_id}})],1):t._e(),i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Invoice Title "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("v-text-field",{staticClass:"titlefield",attrs:{color:"#657186",solo:"","hide-details":"",flat:"",dense:"",outlined:"",placeholder:"Add Invoice Title *"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}})],1),i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Select Type "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("v-select",{attrs:{disabled:t.projectLock,solo:"",outlined:"","full-width":"",dense:"","hide-details":"",color:"#657186",flat:"",items:["hourly","monthly"],placeholder:"Select Invoice Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),"hourly"===t.type?i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Project/Service "),i("span",{staticClass:"required"},[t._v("*")])]):t._e(),"hourly"===t.type?i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("v-select",{attrs:{disabled:t.projectLock,clearable:!t.projectLock,solo:"","hide-details":"",color:"#657186",flat:"","full-width":"",outlined:"",dense:"",items:t.projects,value:t.selected_project,"item-text":"title","item-value":"id",placeholder:"Select Project/Service"},on:{change:t.setBillingTargets}})],1):t._e(),i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Invoice Date "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("date-picker",{staticClass:"textfield",attrs:{hasButtons:!1,"prepend-inner-icon":"date_range",dense:"",outlined:"","hide-details":"",color:"#657186",flat:"",placeholder:"Select Date",value:t.date,max:t.due_date},on:{input:function(e){return t.update_date({date:e,field:"date"})}}})],1),i("v-col",{staticClass:"label",attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Due Date "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{staticClass:"value",attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("date-picker",{staticClass:"textfield",attrs:{hasButtons:!1,"prepend-inner-icon":"date_range",dense:"",outlined:"","hide-details":"",color:"#657186",flat:"",placeholder:"Select Date",value:t.due_date,min:t.date},on:{input:function(e){return t.update_date({date:e,field:"due_date"})}}})],1),i("v-col",{attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Billed From "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("v-autocomplete",{staticClass:"value",attrs:{color:"#657186","hide-details":"",items:t.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:t.billed_from,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(e){return t.show_add_member_dialog("billed_from")}},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("v-chip",t._b({attrs:{tile:"",outlined:""}},"v-chip",e.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[t._v("mdi-account-circle")])],1),t._v(" "+t._s(e.item.fullname)+" ")],1)]}},{key:"item",fn:function(e){var n=e.item;return[[i("v-list-item-avatar",[i("img",{attrs:{src:n.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:t._s(n.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:t._s(n.job_title)}})],1)]]}}]),model:{value:t.billed_from,callback:function(e){t.billed_from=e},expression:"billed_from"}})],1),i("v-col",{attrs:{cols:"12",md:"3",sm:"4",xs:"12"}},[t._v("Billed To "),i("span",{staticClass:"required"},[t._v("*")])]),i("v-col",{attrs:{cols:"12",md:"9",sm:"8",xs:"12"}},[i("v-autocomplete",{staticClass:"value",attrs:{color:"#657186","hide-details":"",items:t.members,chips:"","item-text":"fullname","item-value":"id",solo:"","full-width":"",outlined:"",flat:"",dense:"",value:t.billed_to,"prepend-inner-icon":"mdi-account-plus"},on:{"click:prepend-inner":function(e){return t.show_add_member_dialog("billed_to")}},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("v-chip",t._b({attrs:{tile:"",outlined:""}},"v-chip",e.attrs,!1),[i("v-avatar",{attrs:{left:""}},[i("v-icon",[t._v("mdi-account-circle")])],1),t._v(" "+t._s(e.item.fullname)+" ")],1)]}},{key:"item",fn:function(e){var n=e.item;return[i("v-list-item-avatar",[i("img",{attrs:{src:n.image_url}})]),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:t._s(n.fullname)}}),i("v-list-item-subtitle",{domProps:{innerHTML:t._s(n.job_title)}})],1)]}}]),model:{value:t.billed_to,callback:function(e){t.billed_to=e},expression:"billed_to"}})],1),i("teams-dialog",{ref:"add_dialog",attrs:{title:"Add New Member",dialog:t.add_dialog},on:{"update:dialog":function(e){t.add_dialog=e},save:t.add_member,"close-dialog":function(e){t.add_dialog=!1}}})],1)},u=[],d=i("1be9"),p=i("d4e9"),v=i("0644"),f=i.n(v),m=i("c97a"),_=i("23ca");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var b={name:"StepOne",components:{DatePicker:m["a"],TeamsDialog:_["a"]},props:{projectLock:{type:Boolean,default:!1}},data:function(){return{members:[],original:[],selected:0,add_dialog:!1,target_add:""}},mounted:function(){var t=this;setTimeout((function(){t.getMembers()}),1)},computed:g(g({},Object(s["c"])("invoice",["projects","selected_project","due_date","date","dialog","invoice_id","type","company_logo","dialog"])),{},{billed_to:{get:function(){return this.$store.getters["invoice/billed_to"]},set:function(t){this.$store.commit("invoice/set_billed_to",t)}},billed_from:{get:function(){return this.$store.getters["invoice/billed_from"]},set:function(t){this.$store.commit("invoice/set_billed_from",t)}},type:{get:function(){return this.$store.getters["invoice/type"]},set:function(t){this.set_type(t)}},title:{get:function(){return this.$store.getters["invoice/title"]},set:function(t){this.$store.commit("invoice/set_title",t)}}}),watch:{type:function(t){"monthly"===t&&this.type_changed_to_monthly()}},methods:g(g(g({},Object(s["b"])("invoice",["type_changed_to_monthly"])),Object(s["d"])("invoice",["init_date","set_type","set_selected_project","update_date"])),{},{setBillingTargets:function(t){this.set_selected_project(t)},setFrom:function(t){this.billed_from=t},setTo:function(t){this.billed_to=t},getMembers:function(){var t=this;p["a"].get_all_teams().then((function(e){var i=e.data;t.original=f()(i),t.members=i}))},show_add_member_dialog:function(t){this.target_add=t,this.add_dialog=!0},add_member:function(t){var e=this;p["a"].add_new_team(t).then((function(t){var i=t.data;e.members.push(i),"billed_from"===e.target_add?e.billed_from=i.id:"billed_to"===e.target_add&&(e.billed_to=i.id),e.$refs.add_dialog.clear_and_close()})).finally((function(){e.target_add="",e.$event.$emit("btnloading_off",!1)}))}})},y=b,w=(i("947e"),i("cae5"),i("2877")),x=Object(w["a"])(y,c,u,!1,null,"a9737782",null),A=x.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"12"}},[i("TableSection")],1),i("v-col",{staticClass:"my-2",attrs:{md:"12"}},[i("BottomRight")],1),i("v-col",{staticClass:"label mb-2",attrs:{md:"3",sm:"4"}},[t._v("Notes")]),i("v-col",{staticClass:"value mb-2",attrs:{md:"9",sm:"8"}},[i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Notes - any revelant information not already covered",value:t.notes,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(e){return t.update_textarea(e,"notes")}}})],1),i("v-divider"),i("v-col",{staticClass:"label mb-2",attrs:{md:"3",sm:"4"}},[t._v("Terms")]),i("v-col",{staticClass:"value mb-2",attrs:{md:"9",sm:"8"}},[i("v-textarea",{staticClass:"textarea__field",attrs:{label:"Terms and conditions - late fees, payment methods, delivery schedule",value:t.terms,flat:"",solo:"",dense:"",outlined:"",rows:2,"hide-details":"",color:"#657186"},on:{input:function(e){return t.update_textarea(e,"terms")}}})],1)],1)},O=[],j=i("0885"),k=i("210b");function B(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function D(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?B(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var S={name:"StepTwo",components:{TableSection:j["a"],BottomRight:k["a"]},computed:D({},Object(s["c"])("invoice",["notes","terms","dialog"])),methods:{update_textarea:function(t,e){this.$store.commit("invoice/set_textarea",{new_val:t,field:e})},isEmptyField:function(t,e){if(t&&!e)return!0}}},P=S,E=Object(w["a"])(P,C,O,!1,null,null,null),T=E.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{md:"5",sm:"6"}},[t._v("Company Logo")]),i("v-col",{attrs:{md:"7",sm:"6"}},[t.image_preview&&"null"!==t.image_preview?i("div",{staticClass:"add__logo_box"},[i("img",{staticClass:"image-preview",attrs:{src:t.image_preview}}),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.image_preview,expression:"image_preview"}],staticClass:"button",attrs:{outlined:""}},[t._v("Remove")])],1):i("div",{staticClass:"add__logo_box",on:{click:function(e){return t.$refs.hidden_input.click()}}},[i("span",{staticClass:"text"},[t._v("+ Add Your Logo")]),i("input",{ref:"hidden_input",staticClass:"hidden-input",attrs:{type:"file",accept:"image/*"},on:{change:t.file_selected}})])]),"monthly"===t.type?i("v-col",{staticClass:"label",attrs:{md:"5",sm:"6"}},[i("p",[t._v("Recurring Invoice? "),i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-icon",t._g({},n),[t._v("mdi-help-circle-outline")])]}}],null,!1,2575987712)},[i("span",[t._v("An recurring invoice is merely an invoice that is sent to the same recepient at regular monthly intervals, containing the same invoice details")])])],1)]):t._e(),"monthly"===t.type?i("v-col",{staticClass:"value",attrs:{md:"7",sm:"6"}},[i("v-radio-group",{staticClass:"mt-0 pt-0",attrs:{"hide-details":"",mandatory:!0,row:"","input-value":t.is_recurring},model:{value:t.is_recurring,callback:function(e){t.is_recurring=e},expression:"is_recurring"}},[i("v-radio",{attrs:{label:"Yes",value:"1",color:"#3b589e"}}),i("v-radio",{attrs:{label:"No",value:"0",color:"#3b589e"}})],1)],1):t._e(),i("v-col",{staticClass:"label",attrs:{md:"5",sm:"6"}},[i("p",[t._v("Send email to recepient?")])]),i("v-col",{staticClass:"value",attrs:{md:"7",sm:"6"}},[i("v-radio-group",{staticClass:"mt-0 pt-0",attrs:{mandatory:!0,row:"","input-value":t.props.send_email},model:{value:t.props.send_email,callback:function(e){t.$set(t.props,"send_email",e)},expression:"props.send_email"}},[i("v-radio",{attrs:{label:"Yes",value:"yes",color:"#3b589e"}}),i("v-radio",{attrs:{label:"No",value:"no",color:"#3b589e"}})],1)],1),i("v-col",{staticClass:"label",attrs:{md:"5",sm:"6"}},[t._v("Invoice Template ")]),i("v-col",{staticClass:"value",attrs:{md:"7",sm:"6"}},[i("v-select",{attrs:{color:"#657186",items:t.templates,placeholder:"Select template","item-text":"name","item-value":"id",solo:"",flat:"",outlined:"",dense:""},model:{value:t.props.template,callback:function(e){t.$set(t.props,"template",e)},expression:"props.template"}})],1)],1)},M=[],$=i("53ca");function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var z={name:"StepThree",data:function(){return{templates:[],image_preview:null}},computed:N({},Object(s["c"])("invoice",["props","dialog","company_logo","type","parent","is_recurring"])),watch:{company_logo:function(t){var e=this;if(t)if("object"===Object($["a"])(t)){var i=new FileReader;i.onload=function(t){e.image_preview=t.target.result},i.readAsDataURL(t)}else this.image_preview=t;else this.image_preview=null},is_recurring:function(t){this.$store.commit("invoice/set_is_recurring",t)}},mounted:function(){this.getTemplates()},methods:{file_selected:function(t){var e=this;if(t.target.files&&t.target.files[0]){var i=new FormData;i.append("file",t.target.files[0]),d["a"].post("api/file/image-upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var i=t.data;e.$store.commit("invoice/set_company_logo",i.url)}))}},getTemplates:function(){var t=this;d["a"].get("api/template/invoices").then((function(e){var i=e.data;t.templates=i.data}))}}},Q=z,L=(i("f6fc"),i("4abc"),Object(w["a"])(Q,I,M,!1,null,"253f93c4",null)),F=L.exports;function J(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function R(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?J(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var G={name:"StepperInvoiceDialog",components:{CustomDialog:l["a"],StepOne:A,StepTwo:T,StepThree:F},data:function(){return{open:!1,stepper:1,btnloading:!1}},props:{type:{type:String,default:"create"},projectLock:{type:Boolean,default:!1}},computed:R(R(R({},Object(s["c"])(["user"])),Object(s["c"])("invoice",["billed_to","selected_project","due_date","date","billed_from","company_logo","title","rows","toolbar","can_create_invoice","can_edit_invoice","dialog","invoice"])),{},{dialogTitle:function(){return this.toolbar.title},can_proceed_two:function(){return this.stepOneRules()},can_proceed_three:function(){return this.stepTwoRules()},can_submit:function(){return"create"===this.dialog.type?this.can_create_invoice:"edit"===this.dialog.type&&this.can_edit_invoice},buttonLabel:function(){return"create"===this.dialog.type?"Create":"Save"}}),methods:R(R({},Object(s["d"])("invoice",["set_dialog","revert_invoice"])),{},{openDialog:function(){this.open=!0,this.btnloading=!1,this.stepper=1,"create"===this.dialog.type&&this.$store.commit("invoice/clear")},closeDialog:function(){this.open=!1,["edit"].includes(this.dialog.type)&&this.revert_invoice(),this.set_dialog({type:null})},stepOneRules:function(){return!!(this.billed_from&&this.billed_to&&this.due_date&&this.date&&this.title)},stepTwoRules:function(){return this.rows.length>0},save_invoice:function(){this.can_submit&&("create"===this.dialog.type&&this.create_invoice(),"edit"===this.dialog.type&&this.update_invoice())},create_invoice:function(){var t=this;this.btnloading=!0,r["a"].create_invoice(this.get_invoice()).then((function(e){var i=e.data;return t.$emit("created",i)})).finally((function(){t.$store.commit("invoice/reset_state"),t.closeDialog(),t.$store.commit("invoice/clear"),t.btnloading=!1}))},update_invoice:function(){var t=this;this.btnloading=!0,r["a"].update_invoice(this.get_invoice(),this.invoice.invoice_id).then((function(e){var i=e.data;return t.$emit("updated",i)})).finally((function(){t.$store.commit("invoice/reset_state"),t.closeDialog(),t.$store.commit("invoice/clear"),t.btnloading=!1}))},get_invoice:function(){var t=new FormData;t.append("company_logo",this.invoice.company_logo),t.append("project_id",this.invoice.selected_project||0),t.append("type",this.invoice.type),t.append("title",this.invoice.title),t.append("billed_to",this.invoice.billed_to),t.append("billed_from",this.invoice.billed_from),t.append("date",this.invoice.date),t.append("due_date",this.invoice.due_date),t.append("total_amount",this.invoice.total_amount),t.append("items",JSON.stringify(this.invoice.rows)),t.append("terms",this.invoice.terms),t.append("notes",this.invoice.notes),t.append("parent",this.invoice.parent),t.append("is_recurring",this.invoice.is_recurring);var e=this.calculate_field(this.invoice,"tax"),i=this.calculate_field(this.invoice,"discount"),n=this.calculate_field(this.invoice,"shipping");return t.append("tax",0==e?0:e.value),t.append("discount",0==i?0:i.value),t.append("shipping",0==n?0:n.value),t.append("symbol",0==e?"":e.symbol),t.append("send_email",this.invoice.props.send_email),t.append("template",this.invoice.props.template),t},calculate_field:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t[e].show&&i?{value:t[e].value,symbol:t[e].symbol}:t[e].show&&!i?{value:t[e].value}:0}})},H=G,Z=(i("9725"),Object(w["a"])(H,n,o,!1,null,null,null));e["a"]=Z.exports},e3fe1:function(t,e,i){},e51b:function(t,e,i){},e55f:function(t,e){t.exports="data:image/jpeg;base64,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"},e6d3:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("1be9"),o={get_invoices:function(t){return n["a"].get("api/invoice?page=".concat(t))},delete_invoice:function(t){return n["a"].delete("api/invoice/".concat(t))},create_invoice:function(t){return n["a"].post("api/invoice",t)},update_invoice:function(t,e){return n["a"].post("api/invoice/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}})},get_all_projects:function(){return n["a"].get("api/projects?all=true")},get_projects_tasks:function(t){return n["a"].get("api/projects/".concat(t,"/tasks-for-invoice"))}}},ee09:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("td",{staticClass:"table-actions",attrs:{align:"center"}},[t.hasEdit?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_edit,expression:"can_edit"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",dense:"",icon:""},on:{click:function(e){return t.handle_action("edit")}}},n),[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.editIcon))])],1)]}}],null,!1,2293778615)},[i("span",[t._v("Edit")])]):t._e(),t.hasDelete?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_delete,expression:"can_delete"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("delete")}}},n),[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.deleteIcon))])],1)]}}],null,!1,1335204600)},[i("span",[t._v("Delete")])]):t._e(),t.hasView?i("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.can_view,expression:"can_view"}],attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{dense:"",icon:""},on:{click:function(e){return t.handle_action("view")}}},n),[i("v-icon",{attrs:{small:""}},[t._v(t._s(t.viewIcon))])],1)]}}],null,!1,3967608504)},[i("span",[t._v("View")])]):t._e(),t._t("extra")],2)},o=[],a={props:{item:{type:Object,default:null},permissions:{type:Object,default:function(){return{delete:!0,update:!0,create:!0,view:!0}}},editIcon:{type:String,default:"mdi-content-save-edit"},viewIcon:{type:String,default:"mdi-file-search"},deleteIcon:{type:String,default:"mdi-delete-alert"},hasDelete:{type:Boolean,default:!0},hasEdit:{type:Boolean,default:!0},hasView:{type:Boolean,default:!0}},computed:{logged_user:function(){return this.$store.getters.user}},methods:{handle_action:function(t){this.item&&this.$emit(t,this.item)},can_delete:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.delete},can_edit:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.update},can_view:function(){return!!this.logged_user.is_admin||this.permissions&&this.permissions.view}}},s=a,r=(i("7e7e"),i("2877")),l=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=l.exports},f436:function(t,e,i){"use strict";var n=i("b709"),o=i.n(n);o.a},f6fc:function(t,e,i){"use strict";var n=i("e3fe1"),o=i.n(n);o.a},ff09:function(t,e,i){}}]);
//# sourceMappingURL=chunk-6740d75f.b700e122.js.map