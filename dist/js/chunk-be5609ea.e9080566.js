(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be5609ea","chunk-a77dd9c0"],{"0ec0":function(t,e,a){"use strict";var i=a("6228"),s=a.n(i);s.a},"255b":function(t,e,a){"use strict";var i=a("b340"),s=a.n(i);s.a},"28c8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-dialog"},[a("custom-dialog",{ref:"dialog",attrs:{open:t.computedDialog,title:t.dialogTitle,maxWidth:850},on:{"update:open":function(e){t.computedDialog=e},button1:t.clear_and_close},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",{staticClass:"custom-dialog",attrs:{wrap:""}},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-select",{staticClass:"d-field",attrs:{items:t.milestones.items,"item-text":"title","item-value":"id",label:"Milestone",placeholder:"Select Milestone",filled:"",color:"#657186","hide-details":""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[a("v-btn",{staticClass:"btn-add-milestone",attrs:{icon:"",large:""},on:{click:t.open_add_milestone_dialog}},[a("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}]),model:{value:t.milestones.selected,callback:function(e){t.$set(t.milestones,"selected",e)},expression:"milestones.selected"}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{label:"Add task title",filled:"","hide-details":"",color:"#657186"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}})],1),a("v-col",{staticClass:"pt-0 pl-4",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__date d-field",attrs:{label:"Start Date","prepend-inner-icon":"event",readonly:"",max:t.end_date},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),a("v-col",{staticClass:"pt-0 pr-4",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__date d-field",attrs:{label:"End Date","prepend-inner-icon":"event",readonly:"",min:t.start_date},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("members-dropdown",{staticClass:"task-member",attrs:{members:t.members.selected,"member-items":t.members.items,"is-loading":t.members.loading},on:{"update:members":function(e){return t.$set(t.members,"selected",e)},search:function(e){return t.filter_dropdown_items("members",e)}}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("rich-editor",{staticClass:"task-description",attrs:{placeholder:"Task Details"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1)]},proxy:!0}])},[a("template",{slot:"button2"},[a("v-btn",{attrs:{loading:t.btnloading},on:{click:t.save}},[t._v("Save")])],1)],2),a("milestone-tab-dialog",{ref:"add_milestone_dialog",attrs:{dialog:t.add_milestone_dialog,"dialog-title":"Add New Milestone"},on:{"update:dialog":function(e){t.add_milestone_dialog=e},save:t.add_new_milestone}})],1)},s=[],n=(a("6762"),a("2fdb"),a("ac6a"),a("5df3"),a("768b")),o=(a("96cf"),a("3b8d")),r=(a("c5f6"),a("fcce")),l=a("0644"),c=a.n(l),d=a("1be9"),_=a("c97a"),u=a("4ad3"),f=a("bc29"),m=a("57e5"),p=a("4347"),h={components:{DatePicker:_["a"],RichEditor:u["a"],MembersDropdown:f["a"],CustomDialog:m["a"],MilestoneTabDialog:p["a"]},props:{id:[Number,String],dialog:Boolean,dialogTitle:String,task:Object,milestoneStartDate:String},data:function(){return{btnloading:!1,open:!1,title:null,description:null,status:"open",start_date:null,end_date:null,members:{selected:[],all_items:[],items:[],loading:!1},milestones:{selected:null,items:[]},add_milestone_dialog:!1}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){return t.btnloading=e}))},computed:{computedDialog:{get:function(){return this.dialog},set:function(t){!t&&this.$emit("close"),this.$emit("update:dialog",t)}}},watch:{dialog:{handler:function(t){this.open=t,!t||this.members.all_items.length||this.milestones.items.length||this.fill_dropdowns()}},open:function(t){this.$emit("update:dialog",t)}},methods:{cancel:function(){this.dialog=!1},open_dialog:function(){this.fill_dropdowns(),this.$refs.dialog.open_dialog(),this.task&&this.update_fields(this.task)},save:function(){this.btnloading=!0;var t={milestone_id:this.milestones.selected,title:this.title,description:this.description,status:this.status,started_at:this.start_date,end_at:this.end_date,assigned:this.members.selected};this.$emit("save",t)},update_fields:function(t){var e=c()(t);this.title=e.title,this.description=e.description,this.start_date=e.started_at,this.end_date=e.end_at,this.milestones.selected=e.milestone_id,this.$set(this.members,"selected",e.assignee)},clear_and_close:function(){this.title=this.description=this.start_date=this.end_date=null,this.members.selected=[],this.milestones.selected=null,this.cancel()},fill_dropdowns:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Promise.all([r["a"].get_project_members(this.id),r["a"].get_project_milestones(this.id)]);case 3:e=t.sent,a=Object(n["a"])(e,2),i=a[0],s=a[1],this.loading=!1,this.members.all_items=i.data,this.members.items=i.data,this.milestones.items=s.data;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filter_dropdown_items:function(t,e){var a=c()(this[t].all_items);if(e){var i=a.filter((function(t){return t.first_name.toLowerCase().includes(e.toLowerCase())||t.last_name.toLowerCase().includes(e.toLowerCase())}));this.$set(this[t],"items",i)}else this[t].items=a},open_add_milestone_dialog:function(){this.add_milestone_dialog=!0},add_new_milestone:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].post("api/project/".concat(this.id,"/milestone"),e).then((function(t){var e=t.data;a.milestones.items.push(e),a.milestones.selected=e,a.add_milestone_dialog=!1,a.$event.$emit("open_snackbar","New Milestone added successfully")})).finally((function(){a.$event.$emit("btnloading_off",!1)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},k=h,v=(a("43b2"),a("2877")),g=Object(v["a"])(k,i,s,!1,null,"9a9efdaa",null);e["a"]=g.exports},"33b0":function(t,e,a){"use strict";var i=a("b49a"),s=a.n(i);s.a},3436:function(t,e,a){},4347:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("custom-dialog",{ref:"dialog",attrs:{title:t.dialogTitle,open:t.open,"button2-text":"Save"},on:{"update:open":function(e){t.open=e},button1:t.cancel,button2:t.save},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{filled:"","hide-details":"",color:"#657186",label:"Add milestone title"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__datepicker d-field",attrs:{filled:"","hide-details":"",color:"#657186",label:"Start Date","prepend-icon":"event",readonly:"",value:t.start_date,max:t.end_date},on:{input:t.start_date_changed}})],1),a("v-col",{staticClass:"pt-0 pr-4",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__datepicker d-field",attrs:{filled:"","hide-details":"",color:"#657186",label:"End Date","prepend-icon":"event",readonly:"",value:t.end_date,min:t.start_date},on:{input:t.end_date_changed}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{filled:"","hide-details":"",color:"#657186",label:"Add days",min:"0",type:"number"},model:{value:t.days,callback:function(e){t.days=t._n(e)},expression:"days"}})],1)],1)]},proxy:!0}])})},s=[],n=a("c97a"),o=a("c1df"),r=a.n(o),l=a("57e5"),c={name:"MilestoneTabDialog",components:{DatePicker:n["a"],CustomDialog:l["a"]},props:{dialog:Boolean,dialogTitle:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,title:null,start_date:null,end_date:null,status:"active",days_init_value:0}},computed:{days:{get:function(){return this.start_date&&this.end_date?r()(this.end_date).diff(r()(this.start_date),"days"):this.days_init_value},set:function(t){this.start_date||this.end_date?(this.start_date?this.end_date=r()(this.start_date).add(t,"days").format("YYYY-MM-DD"):this.start_date=r()(this.end_date).subtract(t,"days").format("YYYY-MM-DD"),this.days_init_value=t):this.days_init_value=t}}},watch:{dialog:function(t){this.open=t},open:function(t){this.$emit("update:dialog",t)},fieldsToEdit:{handler:function(t){this.isEditDialog&&this.update_fields(t)},deep:!0}},methods:{end_date_changed:function(t){this.end_date=t,this.days&&t&&(this.start_date=r()(t).subtract(this.days,"days").format("YYYY-MM-DD"))},start_date_changed:function(t){this.start_date=t,this.days&&t&&(this.end_date=r()(t).add(this.days,"days").format("YYYY-MM-DD"))},cancel:function(){this.open=!1},save:function(){var t={title:this.title,status:this.status,days:this.days,started_at:this.start_date,end_at:this.end_date};this.$emit("save",t)},update_fields:function(t){var e=t.fields,a=Object.assign({},e);this.title=a.title,this.status=a.status,this.days=a.days,this.start_date=a.started_at,this.end_date=a.end_at},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},d=c,_=(a("c5f9"),a("2877")),u=Object(_["a"])(d,i,s,!1,null,"2222ebd6",null);e["a"]=u.exports},"4359f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timer__tab"},[a("VueTable",{key:t.componentKey,attrs:{items:t.items,headers:t.headers,showRowActions:!0,icon:"mdi-clock",title:"Project Timers",noMoreData:t.noMoreData,hasFooter:!0,showSelect:!1,loading:t.loading},on:{"load-more":t.get_more_timers},scopedSlots:t._u([{key:"row-slot",fn:function(e){var i=e.item;return[a("td",[a("Avatars",{attrs:{items:i.assignee,deep:!1,count:5}})],1),a("td",{staticClass:"text-cap clickable-td",on:{click:function(e){return t.set_and_view_task(i)}}},[t._v(" "+t._s(i.title)+" ")]),a("td",[t._v(" "+t._s(i.milestone.title)+" ")]),a("td",{staticClass:"text-cap"},[t._v(t._s(i.status))]),a("td",[a("PlayPause",{attrs:{item:i},on:{"row-item-updated":function(t){i=t}}})],1)]}}])}),a("TaskViewDialog",{ref:"view_task_dialog",attrs:{task:t.task},on:{"close-task-preview":t.closeViewDialog}})],1)},s=[],n=(a("c5f6"),a("e06e")),o=(a("1be9"),a("0ebe")),r=a("72c1"),l=a("a71c"),c=a("84a4"),d={name:"TimerTab",mixins:[n["a"]],components:{VueTable:o["a"],Avatars:r["a"],PlayPause:l["a"],TaskViewDialog:c["a"]},props:{id:[Number,String]},data:function(){return{sortList:[{title:"Sort by Client"},{title:"Sort by Task"},{title:"Sort by Services"},{title:"Sort by Time"},{title:"Sort by Date"}],headers:[{text:"Assigned To",sortable:!1},{text:"Task",sortable:!1},{text:"Milestone",sortable:!1},{text:"Status",sortable:!1},{text:"Total Time",sortable:!1}],task:null}},computed:{dynamic_api:function(){return"api/projects/".concat(this.id,"/project-tasks-timers")},client:function(){return this.id}},mounted:function(){this.get_timers()},methods:{view_task:function(t){this.$router.push("/dashboard/project-preview/".concat(this.id,"/tasks?id=")+t)},get_timers:function(){this.fill_table_via_url(this.dynamic_api)},get_more_timers:function(){this.load_more_via_url(this.dynamic_api)},closeViewDialog:function(){this.$refs.view_task_dialog.$refs.dialog.clear_and_close()},set_and_view_task:function(t){this.task=t,this.$refs.view_task_dialog.open_dialog()}}},_=d,u=(a("b89e"),a("2877")),f=Object(u["a"])(_,i,s,!1,null,"4b9aee14",null);e["default"]=f.exports},"43b2":function(t,e,a){"use strict";var i=a("7a7e"),s=a.n(i);s.a},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"5d73":function(t,e,a){t.exports=a("469f")},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})}))},6228:function(t,e,a){},"71b5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks-card"},[a("div",{staticClass:"tasks__content"},[a("dash-card",{staticClass:"task__content",attrs:{title:"Tasks","view-more-btn":!0,dashboard:t.dashboard},on:{close:function(e){return t.$emit("close")},expand:t.expand}},[a("div",{staticClass:"content-wrapper",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"tasks-items"},[a("tasks-content")],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.noMoreData?t._e():a("v-btn",{staticClass:"view__more_btn",attrs:{text:"",loading:t.btnloading},on:{click:t.loadMore}},[t._v(" VIEW MORE ")])],1)]),a("TaskDialog",{ref:"add_task_dialog",attrs:{"dialog-title":"Add Task",id:t.project_id},on:{save:function(e){return t.create_new_task(e)},close:function(e){return t.closeAddDialog()}}}),a("TaskDialog",{ref:"edit_task_dialog",attrs:{id:t.project_id,task:t.task,"dialog-title":"Edit Task"},on:{save:function(e){return t.edit_task(e)},close:function(e){return t.closeEditDialog()}}}),a("DeleteDialog",{attrs:{"open-dialog":t.delete_task_dialog,title:"Delete Task","text-content":"Are you sure you want to delete this task?"},on:{"update:openDialog":function(e){t.delete_task_dialog=e},"update:open-dialog":function(e){t.delete_task_dialog=e},delete:function(e){return t.delete_task()}}}),a("ConfirmDialog",{attrs:{"open-dialog":t.confirm_mark_as_complete_dialog,title:"Confirmation required!","confirm-button-text":"Yes","text-content":"Mark task as completed?"},on:{"update:openDialog":function(e){t.confirm_mark_as_complete_dialog=e},"update:open-dialog":function(e){t.confirm_mark_as_complete_dialog=e},confirm:function(e){return t.confirm_mark_as_complete_task()}}}),a("TaskViewDialog",{ref:"view_task_dialog",attrs:{task:t.task},on:{"close-task-preview":t.closeViewDialog}})],1)])},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("20d6"),a("bd86")),o=(a("c5f6"),a("2f62")),r=a("e06e"),l=(a("c1df"),a("0644"),a("1be9"),a("fcce")),c=a("6943"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks-content"},[a("v-tabs",{staticClass:"task__tabs",attrs:{centered:"",grow:"","hide-slider":""},model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},t._l(t.tabs,(function(e){return a("v-tab",{key:e.name,attrs:{href:"#"+e.name}},[a("span",[t._v(t._s(e.name))])])})),1),a("v-tabs-items",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},t._l(t.tabs,(function(e){return a("v-tab-item",{key:e.id,attrs:{value:e.name}},[a("v-card",{attrs:{flat:""}},[t.active_tab===e.name?a("tasks-tab",{attrs:{tab:t.active_tab}}):t._e()],1)],1)})),1)],1)},_=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{staticClass:"pa-0 ma-0",attrs:{md:"12"}},[t.loading?a("div",{staticClass:"loading"},[a("v-progress-linear",{attrs:{indeterminate:!0}})],1):t._e(),!t.loading&&t.tasks_are_empty?a("div",{staticClass:"no-data"},[a("div",{staticClass:"empty-content"},[a("v-icon",{staticClass:"empty-icon"},[t._v("list")]),a("p",{staticClass:"empty-text"},[t._v("List Empty")])],1)]):a("div",{staticClass:"tasks-tab"},[a("task-chips",{attrs:{"count-all":t.total,"count-completed":t.counter.completed,"count-pending":t.counter.pending,"count-behind":t.counter.behind,"count-open":t.counter.open,"active-chip":t.active_chip},on:{"update:activeChip":function(e){t.active_chip=e},"update:active-chip":function(e){t.active_chip=e}}}),a("task-custom-table",{attrs:{tasks:t.filtered_tasks,tab:t.tab}})],1)])},f=[],m=a("2f68"),p=a("3293");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={name:"TasksTab",components:{TaskChips:m["a"],TaskCustomTable:p["a"]},props:{tab:String},data:function(){return{active_chip:"all"}},computed:k({},Object(o["c"])("taskCards",["total","tasks","counter","loading"]),{filtered_tasks:function(){var t=this;return"all"===this.active_chip?this.tasks:this.tasks.filter((function(e){return e.status.toLowerCase()===t.active_chip}))},tasks_are_empty:function(){return!this.loading&&0===this.tasks.length}}),watch:{active_chip:{handler:function(t){}},tab:{handler:function(t){this.get_tasks(t)},immediate:!0}},methods:k({},Object(o["b"])("taskCards",["get_tasks"]))},g=v,b=(a("909d"),a("2877")),y=Object(b["a"])(g,u,f,!1,null,"4f73c37d",null),w=y.exports,$={name:"TasksContent",components:{TasksTab:w},props:{id:[Number,String]},data:function(){return{active_tab:"My Tasks"}},computed:{user:function(){return this.$store.getters.user},tabs:function(){var t=[{name:"My Tasks",help:"Tasks that are assigned to you "},{name:"All Tasks",help:"Tasks for all members in this project"}];return this.user.is_admin||this.$_permissions.get("tasks_own")||t.splice(1),t}}},D=$,C=(a("0ec0"),a("f01b"),Object(b["a"])(D,d,_,!1,null,"4b75637a",null)),x=C.exports,j=a("28c8"),O=a("5b70"),T=a("ab1d"),S=a("84a4");function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P={name:"TasksCard",mixin:[r["a"]],components:{DashCard:c["a"],TasksContent:x,TaskDialog:j["a"],DeleteDialog:O["a"],ConfirmDialog:T["a"],TaskViewDialog:S["a"]},props:{id:[Number,String],dashboard:Boolean,page:{type:String,default:"dashboard"}},beforeDestroy:function(){this.$event.$off("task-row-clicked")},computed:Y({},Object(o["c"])("taskCards",["total","loading","see_more_url","btnloading"]),{active_task_id:{get:function(){if(this.task)return this.task.id},set:function(t){return t}},tab_tasks:function(){return"My Tasks"===this.selected_tab?this.tasks_own:this.all_tasks},logged_user:function(){return this.$store.getters.user},project_id:function(){return this.$store.getters["taskCards/id"]},noMoreData:function(){return!this.see_more_url}}),data:function(){return{tasks_own:[],all_tasks:[],selected_tab:"My Tasks",task:null,add_task_dialog:!1,edit_task_dialog:!1,confirm_mark_as_complete_dialog:!1,delete_task_dialog:!1}},created:function(){var t=this;this.$route.query.id&&(this.active_task_id=this.$route.query.id),this.id&&this.set_id(this.id),this.set_page(this.page),this.$event.$on("task-row-clicked",(function(e){return t.set_and_open_side_preview(e)})),this.$event.$on("task-card-tab",(function(e){return t.selected_tab=e})),this.$event.$on("task-mark-as-complete",(function(e){return t.set_and_mark_complete_task(e)})),this.$event.$on("task-add",(function(){return t.set_and_add_task()})),this.$event.$on("task-edit",(function(e){return t.set_and_edit_task(e)})),this.$event.$on("task-delete",(function(e){return t.set_and_delete_task(e)})),this.$event.$on("task-view",(function(e){return t.set_and_view_task(e)}))},methods:Y({},Object(o["b"])("taskCards",["see_more","get_tasks"]),{},Object(o["d"])("taskCards",["set_id","set_page","add_task","del_task","replace_task"]),{loadMore:function(){this.see_more()},get_own_tasks:function(){var t=this;this.tasks_own.length||(this.loading=!0,l["a"].get_own_tasks(this.id).then((function(e){var a=e.data;return t.tasks_own=a})).finally((function(){return t.loading=!1})))},get_all_tasks:function(){var t=this;this.all_tasks.length||(this.loading=!0,l["a"].get_all_tasks(this.id).then((function(e){var a=e.data;return t.all_tasks=a})).finally((function(){return t.loading=!1})))},create_new_task:function(t){var e=this;l["a"].create_new_task(t).then((function(t){var a=t.data;e.add_task(a),e.$refs.add_task_dialog.clear_and_close(),e.$event.$emit("open_snackbar","New Task added successfully"),e.$event.$emit("btnloading_off",!1)}))},edit_task:function(t){var e=this;l["a"].edit_task(this.task.id,t).then((function(t){var a=t.data;e.update_task(a,e.task.id,"all_tasks"),e.update_task(a,e.task.id,"tasks_own"),e.$refs.edit_task_dialog.$refs.dialog.clear_and_close(),e.$event.$emit("open_snackbar","Task updated successfully"),e.$event.$emit("btnloading_off",!1),e.$event.$emit("task-is-updated",a)}))},delete_task:function(){var t=this;l["a"].delete_task(this.task.id).then((function(){t.remove_task(t.task),t.$event.$emit("btnloading_off",!1)}))},update_task:function(t,e,a){if(this.task=t,"all_tasks"===a){var i=this.all_tasks.findIndex((function(t){return t.id===e}));~i&&this.all_tasks.splice(i,1,t)}else{var s=this.tasks_own.findIndex((function(t){return t.id===e}));~s&&this.tasks_own.splice(s,1,t)}},remove_task:function(t){this.del_task(t),this.delete_dialog=!1,this.$event.$emit("open_snackbar","Task deleted successfully"),this.set_active_task_after_delete()},set_active_task_after_delete:function(){"My Tasks"===this.selected_tab?this.tasks_own.length?this.task=this.tasks_own[0]:this.task=null:this.all_tasks.length?this.task=this.all_tasks[0]:this.task=null},handle_dropdown_action:function(t){var e="open_".concat(t,"_task_dialog");this[e]()},open_add_task_dialog:function(){this.$refs.add_task_dialog.open_dialog()},open_edit_task_dialog:function(){this.$refs.edit_task_dialog.open_dialog()},closeEditDialog:function(){this.$refs.edit_task_dialog.$refs.dialog.clear_and_close()},closeAddDialog:function(){this.$refs.add_task_dialog.$refs.dialog.clear_and_close()},closeViewDialog:function(){this.$refs.view_task_dialog.$refs.dialog.clear_and_close()},open_delete_task_dialog:function(){this.delete_task_dialog=!0},open_mark_as_complete_task_dialog:function(){this.confirm_mark_as_complete_dialog=!0},confirm_mark_as_complete_task:function(){var t=this,e={status:"completed"};l["a"].mark_as_complete_task(this.task.id,e).then((function(e){var a=e.data;t.confirm_mark_as_complete_dialog=!1,t.$event.$emit("open_snackbar","Task is completed"),t.update_task(a,t.task.id,"all_tasks"),t.update_task(a,t.task.id,"tasks_own"),t.replace_task(a),t.$event.$emit("btnloading_off",!1),t.$event.$emit("task-is-updated",a)}))},set_and_delete_task:function(t){this.task=t,this.set_id(t.project_id),this.open_delete_task_dialog()},set_and_edit_task:function(t){this.task=t,this.set_id(t.project_id),this.open_edit_task_dialog()},set_and_mark_complete_task:function(t){this.task=t,this.set_id(t.project_id),this.open_mark_as_complete_task_dialog()},set_and_view_task:function(t){this.task=t,this.set_id(t.project_id),this.$refs.view_task_dialog.open_dialog()},set_and_add_task:function(){this.set_id(this.id),this.open_add_task_dialog()},set_and_open_side_preview:function(t){this.task=t,"project-preview"===this.page?this.$event.$emit("show-task-side-preview",t):this.set_and_view_task(t)},expand:function(){this.$router.push({name:"expanded-tasks"})}})},E=P,A=Object(b["a"])(E,i,s,!1,null,null,null);e["a"]=A.exports},"768b":function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var i=a("178b"),s=a("5d73"),n=a.n(s),o=a("c8bb"),r=a.n(o);function l(t,e){if(r()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],i=!0,s=!1,o=void 0;try{for(var l,c=n()(t);!(i=(l=c.next()).done);i=!0)if(a.push(l.value),e&&a.length===e)break}catch(d){s=!0,o=d}finally{try{i||null==c["return"]||c["return"]()}finally{if(s)throw o}}return a}}var c=a("1df6");function d(t,e){return Object(i["a"])(t)||l(t,e)||Object(c["a"])()}},"7a7e":function(t,e,a){},"7d7b":function(t,e,a){var i=a("e4ae"),s=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=s(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},8098:function(t,e,a){},8153:function(t,e,a){"use strict";var i=a("cda5"),s=a.n(i);s.a},"84a4":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.task?a("v-layout",{attrs:{"justify-center":""}},[a("v-dialog",{attrs:{scrollable:"","max-width":"800",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{tile:""}},[a("v-toolbar",{attrs:{dense:"",dark:"",color:"#3b589e"}},[a("v-toolbar-title",[t._v("Task Preview : "+t._s(t._f("ucwords")(t.task.title)))]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close_dialog}},[a("v-icon",[t._v("close")])],1)],1)],1),a("v-card-text",{staticClass:"pa-0",staticStyle:{height:"600px"}},[a("preview-card",{key:t.componentKey,attrs:{id:t.task.project_id,"active-id":t.task.id},on:{"dropdown-action":t.handle_dropdown_action}})],1)],1)],1)],1):t._e()},s=[],n=(a("fcce"),a("2f62"),a("0644"),a("3364")),o=a("71b5"),r=a("28c8"),l=a("5b70"),c=a("ab1d"),d={name:"TaskViewDialog",components:{PreviewCard:n["a"],TasksCard:o["a"],TaskDialog:r["a"],DeleteDialog:l["a"],ConfirmDialog:c["a"]},props:{task:{type:Object,default:null}},created:function(){this.task&&(this.id=this.task.id)},data:function(){return{dialog:!1,delete_task_dialog:!1,confirm_mark_as_complete_dialog:!1,id:null,componentKey:0}},methods:{forcerender:function(){this.componentKey+=1},open_dialog:function(){this.dialog=!0},close_dialog:function(){this.dialog=!1},handle_dropdown_action:function(t){var e="open_".concat(t,"_task_dialog");this[e]()},open_delete_task_dialog:function(){this.$event.$emit("task-delete",this.task)},open_edit_task_dialog:function(){this.$event.$emit("task-edit",this.task)},open_mark_as_complete_task_dialog:function(){this.$event.$emit("task-mark-as-complete",this.task)}}},_=d,u=(a("8153"),a("bd3f"),a("2877")),f=Object(u["a"])(_,i,s,!1,null,"44b8e40c",null);e["a"]=f.exports},"8aa5":function(t,e,a){},"909d":function(t,e,a){"use strict";var i=a("8098"),s=a.n(i);s.a},"91f9":function(t,e,a){},a71c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"timer my-0 py-0"},[a("v-col",{staticClass:"time",class:t.timer_started?"success--text":""},[t._v(t._s(t.display))]),a("v-spacer"),a("v-col",{staticClass:"time-control"},[t.task_is_done?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({attrs:{color:"error"}},i),[t._v("mdi-clock-alert-outline")])]}}],null,!1,1460511430)},[a("span",[t._v("Task is done!")])]):!t.timer_started&&t.can_start_timer?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:t.timerClick}},i),[a("v-icon",[t._v("play_arrow")])],1)]}}])},[a("span",[t._v("Start Timer")])]):t.timer_started&&t.can_stop_timer?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{loading:t.btnloading,outlined:"",small:"",icon:""},on:{click:t.timerClick}},i),[a("v-icon",[t._v("pause")])],1)]}}])},[a("span",[t._v("Pause Timer")])]):t._e()],1)],1)},s=[],n=(a("6b54"),a("28a5"),a("20d6"),a("2f62"),a("1be9")),o=(a("d4e9"),a("c1df")),r=a.n(o),l={name:"PlayPause",inheritAttrs:!1,props:{item:Object},data:function(){return{timer_started:!1,init_time:"00:00:00",interval:null,btnloading:!1}},computed:{display:{get:function(){return this.item.timer.timer_stats.format},set:function(t){this.init_time=t}},participants:function(){return this.item.assignee},is_viewer_a_participant:function(){var t=this,e=this.participants.findIndex((function(e){return e.id===t.viewer.id}));return!!~e},viewer:function(){return this.$store.getters.user},can_start_timer:function(){return this.is_viewer_a_participant},can_stop_timer:function(){return!!this.viewer.is_admin||this.is_viewer_a_participant},selectedDate:function(){return r()(this.forDate).format("YYYY-MM-DD")},now:function(){return r()().format("YYYY-MM-DD")},is_lapsed:function(){return r()(this.item.timer.timer_stopped,"YYYY-MM-DD")<r()()},task_is_done:function(){return!("Open"===this.item.status||"open"===this.item.status)},last_date_action:function(){return r()(this.item.timer.latest_timer.created_at).format("MMMM D YYYY")}},created:function(){var t=this;this.is_open()&&(this.start_timer(),this.timer_started=!0),this.$event.$on("task-timer-started",(function(e){t.item.id===e&&t.start_timer()})),this.$event.$on("task-timer-paused",(function(e){t.item.id===e&&t.paused_timer()}))},methods:{is_open:function(){return"ongoing"===this.item.timer.timer_status},get_hours:function(t){return t.split(":")[0]},get_mins:function(t){return t.split(":")[1]},get_secs:function(t){return t.split(":")[2]},pause_timer:function(){var t=this;this.btnloading=!0,this.item.timer.timer_disabled=!0,n["a"].post("api/timer/pause",{type:"task",id:this.item.id}).then((function(){t.paused_timer()})).finally((function(){t.btnloading=!1}))},timerClick:function(){var t=this;if(!this.item.timer.timer_disabled)if(this.timer_started)this.pause_timer();else{this.btnloading=!0,this.start_timer();var e="api/timer/start";"pause"===this.item.timer.timer_status&&(e="api/timer/back"),this.item.timer.timer_disabled=!0,n["a"].post(e,{type:"task",id:this.item.id}).then((function(){t.item.timer.timer_disabled=!1,t.item.timer.timer_status="ongoing"})).finally((function(){t.btnloading=!1}))}},paused_timer:function(){clearInterval(this.item.timer.timer_interval),this.item.timer.timer_disabled=!1,this.item.timer.timer_status="pause",this.timer_started=!1},start_timer:function(){var t=this;this.timer_started=!0,this.item.timer.timer_interval=setInterval((function(){var e=t.get_hours(t.item.timer.timer_stats.format),a=t.get_mins(t.item.timer.timer_stats.format),i=t.get_secs(t.item.timer.timer_stats.format);i>=59&&a>=59?(e++,a=i="00"):i>=59?(a++,i="00"):i++,t.item.timer.timer_stats.format=t.set_time_running(e,a,i)}),1e3)},set_time_running:function(t,e,a){return 1===t.toString().length&&(t="0"+t),1===e.toString().length&&(e="0"+e),1===a.toString().length&&(a="0"+a),"".concat(t,":").concat(e,":").concat(a)}}},c=l,d=(a("255b"),a("2877")),_=Object(d["a"])(c,i,s,!1,null,"7e9eda65",null);e["a"]=_.exports},b340:function(t,e,a){},b49a:function(t,e,a){},b89e:function(t,e,a){"use strict";var i=a("8aa5"),s=a.n(i);s.a},bd3f:function(t,e,a){"use strict";var i=a("91f9"),s=a.n(i);s.a},c5f9:function(t,e,a){"use strict";var i=a("c905"),s=a.n(i);s.a},c905:function(t,e,a){},c97a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g(t._b({attrs:{slot:"activator",value:t.value,solo:"","hide-details":"",color:"#657186",readonly:"",width:t.minWidth},slot:"activator"},"v-text-field",t.$attrs,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{clearable:"",color:"#657186",max:t.max,min:t.min,"no-title":"",scrollable:""},on:{"click:date":t.dateClick},model:{value:t.picker_date,callback:function(e){t.picker_date=e},expression:"picker_date"}},[a("v-spacer"),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.cancel}},[t._v("Cancel")]):t._e(),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.save}},[t._v("OK")]):t._e(),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.clear}},[t._v("Clear")]):t._e()],1)],1)},s=[],n={name:"DatePicker",inheritAttrs:!1,props:{value:{type:String,default:null},min:{type:String,default:null},max:{type:String,default:null},minWidth:{type:String,default:"290px"},hasButtons:{type:Boolean,default:!0}},data:function(){return{menu:!1,picker_date:null}},watch:{value:function(t){this.picker_date=t}},methods:{save:function(){this.$emit("input",this.picker_date),this.cancel()},cancel:function(){this.menu=!1},clear:function(){this.picker_date=null},dateClick:function(){this.hasButtons||this.save()}}},o=n,r=(a("33b0"),a("2877")),l=Object(r["a"])(o,i,s,!1,null,"7a290484",null);e["a"]=l.exports},cda5:function(t,e,a){},f01b:function(t,e,a){"use strict";var i=a("3436"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-be5609ea.e9080566.js.map