{"version":3,"sources":["webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/api.js","webpack:///./src/global_utils/global_utils.js","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?0626","webpack:///src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?d8c2","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue","webpack:///./src/assets/temp/no-video-preview.png","webpack:///./src/common/BaseComponents/Loader.vue?1d39","webpack:///./src/common/BaseComponents/Loader.vue?ed31","webpack:///src/common/BaseComponents/Loader.vue","webpack:///./src/common/BaseComponents/Loader.vue?932e","webpack:///./src/common/BaseComponents/Loader.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/TeamMessages.vue?d62f","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?8f98","webpack:///./src/assets/temp/no-image.jpg","webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/TeamMessages.vue?634a","webpack:///src/modules/ProjectPreview-Messages/subpages/TeamMessages/TeamMessages.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/TeamMessages.vue?05ce","webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/TeamMessages.vue"],"names":["get_team_messages","project_id","request","get","send_message","payload","post","global_utils","methods","scrollToBottom","e","this","$nextTick","scrollTop","scrollHeight","getBoundingClientRect","height","addHost","urlString","settings","apiHostBaseURL","indexOf","altImage","item","hasOwnProperty","collection_name","thumb_url","require","public_url","generate_random","qty","min","max","items","i","push","parseInt","Math","random","toFixed","render","_vm","_h","$createElement","_c","_self","staticClass","class","me","isMyMessage","attrs","message","sender","image_url","is_online","_v","_s","first_name","last_name","_f","created_at","body","staticRenderFns","mixins","props","Boolean","Object","computed","onlineUsers","$store","getters","findIndex","component","module","exports","_e","loading","ref","messages","_l","key","id","loggedUser","on","$event","type","_k","keyCode","sendMessage","target","value","model","callback","$$v","expression","Number","String","components","Loader","SingleMessage","data","user","mounted","$pusher","authenticate","subscribePusher","beforeDestroy","unsubscribe","created","api","add_new_message","some","$refs","user_can_message","can_message","can","$emit","team_message_channel","bind","from_id"],"mappings":"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","file":"js/chunk-ec9ac692.51cd9f0b.js","sourcesContent":["import request from '@/services/axios_instance'\r\n\r\nexport const get_team_messages = project_id => {\r\n  return request.get(`api/projects/${project_id}/messages?type=team`)\r\n}\r\n\r\nexport const send_message = (project_id, payload) => {\r\n  return request.post(`api/projects/${project_id}/messages`, payload)\r\n}\r\n","import moment from 'moment'\r\nimport timezone from 'moment-timezone'\r\nimport { settings } from '@/variables'\r\n\r\nexport const global_utils = {\r\n  methods: {\r\n    scrollToBottom(e) {\r\n      this.$nextTick(() => {\r\n        e.scrollTop = e.scrollHeight - e.getBoundingClientRect().height\r\n      })\r\n    },\r\n    addHost(urlString) {\r\n      if (typeof urlString === 'undefined') {\r\n        return settings.apiHostBaseURL\r\n      }\r\n\r\n      if (\r\n        !(\r\n          urlString.indexOf('http://') === 0 ||\r\n          urlString.indexOf('https://') === 0\r\n        )\r\n      ) {\r\n        return settings.apiHostBaseURL + urlString\r\n      }\r\n      return urlString\r\n    },\r\n    altImage(item) {\r\n      if (\r\n        item.hasOwnProperty('collection_name') &&\r\n        item.collection_name === 'project.files.videos'\r\n      ) {\r\n        item.thumb_url = require('@/assets/temp/no-video-preview.png')\r\n        item.public_url = require('@/assets/temp/no-video-preview.png')\r\n      } else {\r\n        item.thumb_url = require('@/assets/temp/no-image.jpg')\r\n        item.public_url = require('@/assets/temp/no-image.jpg')\r\n      }\r\n    },\r\n    generate_random(qty, min, max) {\r\n      var items = []\r\n      for (var i = 0; i < qty; i++) {\r\n        items.push(parseInt((Math.random() * (max - min) + min).toFixed(0)))\r\n      }\r\n      return items\r\n    }\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\",class:{ me: _vm.isMyMessage }},[_c('v-layout',{staticClass:\"sender\",attrs:{\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"sender__img\",attrs:{\"xs3\":\"\"}},[_c('v-img',{attrs:{\"src\":_vm.message.sender.image_url}}),_c('span',{staticClass:\"status\",class:_vm.is_online})],1),_c('v-flex',{staticClass:\"sender__name\",attrs:{\"xs5\":\"\"}},[_c('h5',[_vm._v(_vm._s(_vm.message.sender.first_name)+\" \"+_vm._s(_vm.message.sender.last_name))])]),_c('v-flex',{staticClass:\"date\",attrs:{\"xs4\":\"\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"from_now\")(_vm.message.created_at))+\" \")])],1),_c('div',{staticClass:\"sender__message\"},[_vm._v(\" \"+_vm._s(_vm.message.body)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"message\" :class=\"{ me: isMyMessage }\">\r\n    <v-layout wrap class=\"sender\">\r\n      <v-flex xs3 class=\"sender__img\">\r\n        <v-img :src=\"message.sender.image_url\" />\r\n        <span class=\"status\" :class=\"is_online\"></span>\r\n      </v-flex>\r\n      <v-flex xs5 class=\"sender__name\">\r\n        <h5>{{ message.sender.first_name }} {{ message.sender.last_name }}</h5>\r\n      </v-flex>\r\n      <v-flex xs4 class=\"date\"> {{ message.created_at | from_now }} </v-flex>\r\n    </v-layout>\r\n    <div class=\"sender__message\">\r\n      {{ message.body }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { global_utils } from '@/global_utils/global_utils'\r\n\r\nexport default {\r\n  mixins: [global_utils],\r\n  props: {\r\n    isMyMessage: Boolean,\r\n    message: Object // TODO implement message for displaying to the template\r\n  },\r\n  computed: {\r\n    is_online() {\r\n      var onlineUsers = this.$store.getters['onlineUsers/all_users']\r\n      var is_online = onlineUsers.findIndex(\r\n        ou => ou.id === this.message.sender.id\r\n      )\r\n      return ~is_online ? 'online' : 'offline'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/_variables';\r\n\r\n.message {\r\n  border-bottom: 1px solid $borderLightGray;\r\n  padding: 5px 25px;\r\n\r\n  &.me {\r\n    background-color: $tableBlueBg;\r\n\r\n    .sender {\r\n      flex-direction: row-reverse;\r\n\r\n      .sender__name {\r\n        text-align: right;\r\n      }\r\n      .date {\r\n        text-align: left;\r\n      }\r\n    }\r\n\r\n    .sender__message {\r\n      margin-left: 30px;\r\n      margin-right: 0;\r\n      text-align: justify;\r\n      display: flex;\r\n      flex-flow: column;\r\n      align-items: flex-end;\r\n    }\r\n  }\r\n\r\n  .sender {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  @include userImgWithStatus('.sender__img');\r\n\r\n  .sender__img {\r\n    text-align: center;\r\n    height: 50px;\r\n    width: 50px;\r\n    max-width: 50px;\r\n\r\n    .status {\r\n      width: 15px;\r\n      height: 15px;\r\n      border: 2px solid $lightViolete;\r\n    }\r\n  }\r\n\r\n  .sender__name h5 {\r\n    font-size: 18px;\r\n    margin: 0 5px;\r\n    color: $titleDarkBlue;\r\n  }\r\n\r\n  .date {\r\n    font-size: 12px;\r\n    opacity: 0.7;\r\n    margin: 0 5px;\r\n    color: $textDarkBlue;\r\n    text-align: right;\r\n  }\r\n\r\n  .sender__message {\r\n    padding: 10px;\r\n    font-size: 16px;\r\n    text-align: justify;\r\n    margin: 0;\r\n    color: $textDarkBlue;\r\n    margin-right: 30px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleMessage.vue?vue&type=template&id=5f52a627&scoped=true&\"\nimport script from \"./SingleMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleMessage.vue?vue&type=style&index=0&id=5f52a627&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f52a627\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/no-video-preview.6c0717ce.png\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=0a16da3c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=0a16da3c&lang=scss&scoped=true&\"","var render = function (_h,_vm) {var _c=_vm._c;return (_vm.props.loading)?_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"custom-loader\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"size\":72}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template functional>\r\n  <transition name=\"fade\" v-if=\"props.loading\">\r\n    <div class=\"custom-loader\">\r\n      <v-progress-circular\r\n        indeterminate\r\n        color=\"primary\"\r\n        :size=\"72\"\r\n      ></v-progress-circular>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    loading: Boolean\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-loader {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 2;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: rgba(224, 224, 189, 0.57);\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.5s;\r\n}\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=0a16da3c&scoped=true&functional=true&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&id=0a16da3c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  \"0a16da3c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMessages.vue?vue&type=style&index=0&id=4ac4f517&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMessages.vue?vue&type=style&index=0&id=4ac4f517&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=style&index=0&id=5f52a627&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=style&index=0&id=5f52a627&lang=scss&scoped=true&\"","module.exports = \"data:image/jpeg;base64,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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message__body team-messages\"},[_c('div',{ref:\"messages-container\",staticClass:\"messages\"},[_c('Loader',{attrs:{\"loading\":_vm.loading}}),(_vm.messages.length)?_vm._l((_vm.messages),function(message){return _c('SingleMessage',{key:message.id,attrs:{\"is-my-message\":message.sender.id === _vm.loggedUser.id,\"message\":message}})}):_vm._e()],2),_c('div',{staticClass:\"write\"},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"sender-avatar\",attrs:{\"src\":_vm.loggedUser.image_url}})]),_c('v-text-field',{staticClass:\"write__msg\",attrs:{\"solo\":\"\",\"flat\":\"\",\"hide-details\":\"\",\"color\":\"#667187\",\"label\":\"Type a message...\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event.target.value)}},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('div',{staticClass:\"write__actions\"},[_c('v-icon',{staticClass:\"action insert__emoticon\"},[_vm._v(\"insert_emoticon\")]),_c('v-icon',{staticClass:\"action attach_file\"},[_vm._v(\"attach_file\")]),_c('v-icon',{staticClass:\"action send\",on:{\"click\":function($event){return _vm.sendMessage(_vm.message)}}},[_vm._v(\"send\")])],1)],1),_c('div',{staticClass:\"view__more\"},[_c('v-btn',{staticClass:\"view__more_btn\",attrs:{\"text\":\"\"}},[_vm._v(\"VIEW MORE\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"message__body team-messages\">\r\n    <div class=\"messages\" ref=\"messages-container\">\r\n      <Loader :loading=\"loading\" />\r\n      <template v-if=\"messages.length\">\r\n        <SingleMessage\r\n          v-for=\"message of messages\"\r\n          :key=\"message.id\"\r\n          :is-my-message=\"message.sender.id === loggedUser.id\"\r\n          :message=\"message\"\r\n        />\r\n      </template>\r\n    </div>\r\n    <div class=\"write\">\r\n      <div class=\"avatar-wrapper\">\r\n        <img :src=\"loggedUser.image_url\" class=\"sender-avatar\" />\r\n      </div>\r\n      <v-text-field\r\n        v-model=\"message\"\r\n        class=\"write__msg\"\r\n        solo\r\n        flat\r\n        hide-details\r\n        color=\"#667187\"\r\n        label=\"Type a message...\"\r\n        @keyup.enter=\"sendMessage($event.target.value)\"\r\n      ></v-text-field>\r\n      <div class=\"write__actions\">\r\n        <v-icon class=\"action insert__emoticon\">insert_emoticon</v-icon>\r\n        <v-icon class=\"action attach_file\">attach_file</v-icon>\r\n        <v-icon class=\"action send\" @click=\"sendMessage(message)\">send</v-icon>\r\n      </div>\r\n    </div>\r\n    <div class=\"view__more\">\r\n      <v-btn text class=\"view__more_btn\">VIEW MORE</v-btn>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as apiTo from './api'\r\nimport { global_utils } from '@/global_utils/global_utils'\r\n// Components\r\nimport Loader from '@/common/BaseComponents/Loader.vue'\r\nimport SingleMessage from '../reusable/SingleMessage.vue'\r\n\r\nexport default {\r\n  mixins: [global_utils],\r\n  props: {\r\n    id: [Number, String]\r\n  },\r\n  components: {\r\n    Loader,\r\n    SingleMessage\r\n  },\r\n\r\n  data: () => ({\r\n    loading: false,\r\n    messages: [],\r\n    message: null,\r\n    can_message: false\r\n  }),\r\n\r\n  computed: {\r\n    loggedUser() {\r\n      return this.$store.getters.user\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$pusher.authenticate()\r\n    this.subscribePusher()\r\n  },\r\n  beforeDestroy() {\r\n    this.$pusher.unsubscribe(`private-project.team-message.${this.id}`)\r\n  },\r\n  created() {\r\n    this.loading = true\r\n    apiTo\r\n      .get_team_messages(this.id)\r\n      .then(({ data }) => {\r\n        this.messages = data.data\r\n        this.scrollToBottom(this.$refs['messages-container'])\r\n      })\r\n      .finally(() => (this.loading = false))\r\n  },\r\n\r\n  methods: {\r\n    add_new_message(message) {\r\n      if (!this.messages.some(msg => msg.id === message.id)) {\r\n        this.messages.push(message)\r\n      }\r\n      this.scrollToBottom(this.$refs['messages-container'])\r\n    },\r\n    user_can_message(can) {\r\n      this.can_message = can\r\n      if (can) this.$event.$emit('open_snackbar', 'Team chat connected')\r\n      else\r\n        this.$event.$emit('open_snackbar', 'Team chat disconnected.', 'error')\r\n    },\r\n    subscribePusher() {\r\n      const team_message_channel = this.$pusher.subscribe(\r\n        `private-project.team-message.${this.id}`\r\n      )\r\n      team_message_channel.bind('ProjectTeamMessage', data => {\r\n        if (data.type === 'team') this.add_new_message(data.message)\r\n      })\r\n      team_message_channel.bind('pusher:subscription_succeeded', () =>\r\n        this.user_can_message(true)\r\n      )\r\n      team_message_channel.bind('pusher:subscription_error', status =>\r\n        this.user_can_message(false)\r\n      )\r\n    },\r\n    sendMessage(message) {\r\n      if (!message) return\r\n      this.message = null\r\n      let payload = {\r\n        type: 'team',\r\n        message,\r\n        from_id: this.loggedUser.id\r\n      }\r\n      apiTo.send_message(this.id, payload).then(({ data }) => {\r\n        this.add_new_message(data)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/_variables';\r\n\r\n.message__body {\r\n  border: 1px solid $borderLightGray;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n\r\n  @include styledScrollFor('.messages'); //style the scroll\r\n\r\n  .messages {\r\n    background-color: $white;\r\n    overflow: auto;\r\n    max-height: 462px;\r\n    border-bottom: 1px solid $borderLightGray;\r\n  }\r\n\r\n  .write {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    align-items: center;\r\n    background-color: $white;\r\n    .write__actions {\r\n      .action {\r\n        margin: 5px 7px;\r\n        color: $lightGray-2;\r\n        cursor: pointer;\r\n\r\n        &:hover {\r\n          color: $blue;\r\n        }\r\n      }\r\n    }\r\n    .avatar-wrapper {\r\n      padding: 3px;\r\n      .sender-avatar {\r\n        width: 40px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .view__more {\r\n    text-align: center;\r\n    padding: 10px;\r\n    border-top: 1px solid $borderLightGray;\r\n    background-color: $white;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    .view__more_btn {\r\n      color: $tableDarkText;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TeamMessages.vue?vue&type=template&id=4ac4f517&scoped=true&\"\nimport script from \"./TeamMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./TeamMessages.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TeamMessages.vue?vue&type=style&index=0&id=4ac4f517&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ac4f517\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}