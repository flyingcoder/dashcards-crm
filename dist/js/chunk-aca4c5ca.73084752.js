(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aca4c5ca"],{"10f2":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"templates"},[i("milestone-template-dialog",{ref:"add_dialog",attrs:{dialog:e.milestone_add_dialog,isEditDialog:!1,title:"Add Milestone Template"},on:{"update:dialog":function(t){e.milestone_add_dialog=t},save:function(t){return e.add_item("add_new_milestone_template",t)}}}),i("milestone-template-dialog",{ref:"edit_dialog",attrs:{dialog:e.milestone_edit_dialog,title:"Edit Milestone Template",isEditDialog:!0,fieldsToEdit:e.activeTemplate},on:{"update:dialog":function(t){e.milestone_edit_dialog=t},save:function(t){e.update_item("edit_milestone_template",t,null,e.close_edit_milestone_dialog())}}}),i("delete-dialog",{attrs:{"open-dialog":e.milestone_delete_dialog,title:"Delete Template","text-content":"This will also deletes milestones associated with this template. Are you sure you want to delete these template? "},on:{"update:openDialog":function(t){e.milestone_delete_dialog=t},"update:open-dialog":function(t){e.milestone_delete_dialog=t},delete:function(t){e.delete_item("delete_milestone_template",null,null,e.close_milestone_delete_dialog())}}}),i("InvoiceTemplateDialog",{ref:"invoice_add_edit_dialog",attrs:{defaultTemplates:e.defaultTemplates,invoicefields:e.invoice_fields},on:{save:e.handleInvoiceTemplateSave,preview:e.open_template_view}}),i("InvoiceTemplatePreview",{ref:"invoice_template_view_dialog",attrs:{item:e.activeTemplate,invoicefields:e.invoice_fields}}),i("InvoiceTemplateHelp",{ref:"help_dialog",attrs:{invoicefields:e.invoice_fields}}),i("delete-dialog",{attrs:{"open-dialog":e.invoice_delete_dialog,title:"Delete Template","text-content":"Are you sure you want to delete this invoice template?"},on:{"update:openDialog":function(t){e.invoice_delete_dialog=t},"update:open-dialog":function(t){e.invoice_delete_dialog=t},delete:function(t){e.delete_item("delete_invoice_template",t,null,e.close_invoice_delete_dialog())}}}),i("delete-dialog",{attrs:{"open-dialog":e.report_add_dialog,title:"New Report Template"},on:{"update:openDialog":function(t){e.report_add_dialog=t},"update:open-dialog":function(t){e.report_add_dialog=t}},scopedSlots:e._u([{key:"content",fn:function(){return[i("Empty",{attrs:{headline:"Under construction!",icon:"mdi-hammer-wrench"}})]},proxy:!0}])}),i("VueTable",{attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"widgets",title:"Templates",noMoreData:e.noMoreData,showSelect:!1,loading:e.loading},on:{"load-more":e.load_more},scopedSlots:e._u([{key:"row-slot",fn:function(t){var a=t.item;return[i("td",{staticClass:"text-cap"},[e._v(e._s(e._f("remove_app")(a.replica_type)))]),i("td",{staticClass:"text-cap clickable-td ",on:{click:function(t){return e.open_template_view(a)}}},[e._v(" "+e._s(e._f("ucwords")(a.name))+" ")]),i("td",{staticClass:"text-cap text-center"},[e._v(e._s(a.milestones_count||""))]),a.creator?i("td",[i("Avatar",{attrs:{user:a.creator,iconOnly:""}})],1):i("td",[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,l=t.attrs;return[i("v-avatar",e._g(e._b({},"v-avatar",l,!1),a),[i("v-icon",{attrs:{large:""}},[e._v("mdi-monitor-clean")])],1)]}}],null,!0)},[i("span",[e._v("System Default")])])],1),i("td",{staticClass:"text-cap"},[e._v(e._s(a.status))]),i("Actions",{attrs:{item:a,hasEdit:0!==a.company_id,hasDelete:0!==a.company_id,permission:e.$_permissions.get("templates")},on:{delete:function(t){return e.open_template_delete_dialog(a)},edit:function(t){return e.open_template_edit_dialog(a)},view:function(t){return e.open_template_view(a)}}})]}},{key:"empty-slot",fn:function(){return[i("v-menu",{attrs:{top:"","offset-y":"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,l=t.attrs;return[i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-btn",e._g(e._b({attrs:{dark:"",color:"#3b589e"}},"v-btn",l,!1),Object.assign({},o,a)),[i("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle-multiple-outline ")]),e._v(" Create New Template ")],1)]}}],null,!0)},[i("span",[e._v("Create New")])])]}}])},[i("v-list",{attrs:{dense:""}},[i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("milestone")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Milestone Template ")],1)],1),i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("invoice")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Invoice Template ")],1)],1),i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("report")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Report Template ")],1)],1)],1)],1)]},proxy:!0}])},[i("template",{slot:"header-toolbar"},[i("div",[i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,l=t.attrs;return[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-icon",e._g(e._b({},"v-icon",l,!1),Object.assign({},o,a)),[e._v(" mdi-plus-circle-multiple-outline ")])]}}],null,!0)},[i("span",[e._v("Create New")])])]}}])},[i("v-list",{attrs:{dense:""}},[i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("milestone")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Milestone Template ")],1)],1),i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("invoice")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Invoice Template ")],1)],1),i("v-list-item",{on:{click:function(t){return e.open_template_add_dialog("report")}}},[i("v-list-item-title",[i("v-icon",{attrs:{left:""}},[e._v("mdi-plus-circle-outline")]),e._v(" New Report Template ")],1)],1)],1)],1),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,l=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"ml-2 action-btn",attrs:{fab:""},on:{click:e.open_help_dialog}},"v-icon",l,!1),a),[e._v(" mdi-help-circle-outline ")])]}}])},[i("span",[e._v("Invoice Template Guide and Rules")])]),i("v-btn-toggle",{staticClass:"ml-3",attrs:{mandatory:"",dense:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[i("v-btn",{attrs:{text:"",value:"all"},on:{click:function(t){return e.showByType("all")}}},[e._v(" All")]),i("v-btn",{attrs:{text:"",value:"milestone"},on:{click:function(t){return e.showByType("milestone")}}},[e._v(" Milestones")]),i("v-btn",{attrs:{text:"",value:"invoice"},on:{click:function(t){return e.showByType("invoice")}}},[e._v(" Invoices")]),i("v-btn",{attrs:{text:"",value:"report"},on:{click:function(t){return e.showByType("report")}}},[e._v(" Reports")])],1)],1)])],2)],1)},l=[],o=(i("20d6"),i("a481"),i("e06e")),n=i("1be9"),s=i("0ebe"),d=i("ee09"),c=i("602d"),r=i("5b70"),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-dialog",{ref:"dialog",attrs:{title:e.title,open:e.open,"button2-text":"Save"},on:{"update:open":function(t){e.open=t},button1:e.cancel,button2:e.save}},[i("template",{slot:"content"},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{label:"Add template name",color:"#667187",filled:"",counter:"",maxlength:"60"},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1)],2)},u=[],p=(i("7f7f"),i("57e5")),m={name:"MilestoneTemplateDialog",components:{CustomDialog:p["a"]},props:{dialog:Boolean,title:String,isEditDialog:{type:Boolean,default:!1},fieldsToEdit:Object},data:function(){return{open:!1,name:null,status:"active"}},watch:{dialog:function(e){this.open=e},open:function(e){this.$emit("update:dialog",e)},fieldsToEdit:{handler:function(e){this.isEditDialog&&(this.name=e.name,this.status=e.status)},deep:!0}},methods:{cancel:function(){this.open=!1},save:function(){var e={name:this.name,status:this.status};this.$emit("save",e)},update_fields:function(e){var t=e.fields,i=Object.assign({},t);this.name=i.name,this.status=i.status},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},v=m,f=(i("a42e"),i("2877")),g=Object(f["a"])(v,_,u,!1,null,"01fc4efc",null),h=g.exports,b=i("2c63"),y=i("2089"),T=i("bfc6"),w={name:"Templates",mixins:[o["a"]],components:{VueTable:s["a"],Actions:d["a"],MilestoneDialog:c["a"],DeleteDialog:r["a"],MilestoneTemplateDialog:h,InvoiceTemplateDialog:b["a"],InvoiceTemplatePreview:T["a"],InvoiceTemplateHelp:y["a"]},data:function(){return{paths:[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:"Templates",disabled:!0,route:null}],headers:[{text:"Type",value:"replica_type",width:100},{text:"Name",value:"name"},{text:"Milestones",value:"milestones_count",width:110,align:"center"},{text:"Added By",width:90,sortable:!1},{text:"Status",value:"status",width:100},{text:"Action",value:"action",align:"center",sortable:!1,width:180}],table_config:{route_name:"templates",add_message:"New Template added successfully!",update_message:"Template updated successfully!",delete_message:"Template deleted successfully!"},type:"all",activeTemplate:null,milestone_add_dialog:!1,milestone_edit_dialog:!1,milestone_delete_dialog:!1,invoice_add_dialog:!1,invoice_edit_dialog:!1,invoice_delete_dialog:!1,report_add_dialog:!1,report_edit_dialog:!1,report_delete_dialog:!1,invoice_fields:[]}},filters:{remove_app:function(e){return e.replace("App\\","")}},created:function(){var e=this;this.load_templates(),this.getFields(),this.$event.$on("show-invoice-template-guide",(function(){e.open_help_dialog()}))},mounted:function(){this.$event.$emit("path-change",this.paths)},computed:{dynamic_api:function(){return"api/template?type=".concat(this.type)},defaultTemplates:function(){return this.items.length>0?this.items.filter((function(e){return 0===e.company_id})):[]}},methods:{getType:function(e){return e.replica_type.replace("App\\","").toLowerCase()},load_templates:function(){this.fill_table_via_url(this.dynamic_api)},load_more:function(){this.load_more_via_url(this.dynamic_api)},showByType:function(e){this.type=e,this.load_templates()},open_template_add_dialog:function(e){"milestone"===e?(this.milestone_add_dialog=!0,this.milestone_edit_dialog=!1):"invoice"===e?(this.invoice_add_dialog=!0,this.invoice_edit_dialog=!1,this.$refs.invoice_add_edit_dialog.open_dialog(!1,null)):(this.report_add_dialog=!0,this.report_edit_dialog=!1)},open_template_delete_dialog:function(e){var t=this.getType(e);this.activeTemplate=e,"milestone"===t?this.milestone_delete_dialog=!0:"invoice"===t?this.invoice_delete_dialog=!0:this.report_delete_dialog=!0},open_template_edit_dialog:function(e){var t=this.getType(e);this.activeTemplate=e,this.edit_item.id=e.id,"milestone"===t?(this.milestone_edit_dialog=!0,this.milestone_add_dialog=!1):"invoice"===t?(this.invoice_edit_dialog=!0,this.invoice_add_dialog=!1,this.$refs.invoice_add_edit_dialog.open_dialog(!0,e)):(this.report_edit_dialog=!0,this.report_add_dialog=!1)},open_template_view:function(e){this.activeTemplate=e;var t=this.getType(e);"milestone"===t?this.$router.push({name:"templates/milestone",params:{id:e.id}}):"invoice"===t&&this.$refs.invoice_template_view_dialog.open_dialog(e)},open_help_dialog:function(){this.$refs.help_dialog.open_dialog()},handleInvoiceTemplateSave:function(e){this.invoice_edit_dialog?this.updateInvoiceTemplate(e):this.createInvoiceTemplate(e)},createInvoiceTemplate:function(e){var t=this;n["a"].post("api/template/invoices",e).then((function(e){var i=e.data;t.items.push(i),t.invoice_add_dialog=!1,t.$refs.invoice_add_edit_dialog.clear_and_close()})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},updateInvoiceTemplate:function(e){var t=this;n["a"].put("api/template/invoices",e).then((function(e){var i=e.data,a=t.items.findIndex((function(e){return e.id===i.id}));~a&&t.items.splice(a,1,i),t.invoice_edit_dialog=!1,t.$refs.invoice_add_edit_dialog.clear_and_close()})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},getFields:function(){var e=this;n["a"].get("api/template/invoices/fields").then((function(t){var i=t.data;e.invoice_fields=i}))},close_edit_milestone_dialog:function(){this.milestone_edit_dialog=!1},close_milestone_delete_dialog:function(){this.milestone_delete_dialog=!1},close_invoice_delete_dialog:function(){this.invoice_delete_dialog=!1}}},x=w,k=(i("2858"),Object(f["a"])(x,a,l,!1,null,"5f8ecfb3",null));t["default"]=k.exports},2858:function(e,t,i){"use strict";var a=i("879b"),l=i.n(a);l.a},"3e53":function(e,t,i){"use strict";var a=i("a38d"),l=i.n(a);l.a},"602d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("custom-dialog",{ref:"dialog",attrs:{title:e.dialogTitle,open:e.open},on:{"update:open":function(t){e.open=t},button1:e.cancel},scopedSlots:e._u([{key:"button2",fn:function(){return[i("v-btn",{attrs:{disabled:e.disabled_btn,loading:e.btnloading},on:{click:e.save}},[e._v("Save")])]},proxy:!0}])},[i("template",{slot:"content"},[i("v-card",{attrs:{flat:""}},[i("v-card-text",[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{dense:"",label:"Milestone Title *",filled:"",counter:"","hide-details":"auto",maxlength:"60"},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-select",{staticClass:"dialog__selectfield d-field",attrs:{dense:"",label:"Status *",items:["Active","Inactive"],filled:"","hide-details":"auto"},model:{value:e.status,callback:function(t){e.status="string"===typeof t?t.trim():t},expression:"status"}})],1),i("v-col",[i("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{dense:"",label:e.days_label,type:"number",filled:"",min:"1","hide-details":"auto",disabled:e.disabled},model:{value:e.days,callback:function(t){e.days=e._n(t)},expression:"days"}})],1),i("v-col",{attrs:{cols:"5"}},[i("v-checkbox",{staticClass:"mx-2",attrs:{label:"No Specific Days"},model:{value:e.disabled,callback:function(t){e.disabled=t},expression:"disabled"}})],1)],1)],1)],1)],1)],2)},l=[],o=i("57e5"),n={name:"MilestoneDialog",components:{CustomDialog:o["a"]},props:{dialog:Boolean,dialogTitle:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,title:null,status:"Active",days_init_value:1,disabled:!1,btnloading:!1}},computed:{days:{get:function(){return this.days_init_value},set:function(e){parseInt(e)<1?this.days_init_value=1:this.days_init_value=e}},days_label:function(){return this.disabled?"Days":"Days *"},disabled_btn:function(){return!this.title||!this.status}},watch:{dialog:function(e){this.open=e,this.btnloading=!1},open:function(e){this.$emit("update:dialog",e)},fieldsToEdit:{handler:function(e){this.isEditDialog&&this.update_fields(e)},deep:!0}},methods:{cancel:function(){this.open=!1},save:function(){var e={title:this.title,status:this.status,days:this.disabled?0:this.days};this.btnloading=!0,this.$emit("save",e),console.log(e)},update_fields:function(e){var t=e.fields,i=Object.assign({},t);this.title=i.title,this.status=i.status,this.days=this.disabled?0:i.days,console.log(i)},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},s=n,d=(i("3e53"),i("2877")),c=Object(d["a"])(s,a,l,!1,null,"303d9f35",null);t["a"]=c.exports},"879b":function(e,t,i){},a38d:function(e,t,i){},a42e:function(e,t,i){"use strict";var a=i("f2c0"),l=i.n(a);l.a},f2c0:function(e,t,i){}}]);
//# sourceMappingURL=chunk-aca4c5ca.73084752.js.map