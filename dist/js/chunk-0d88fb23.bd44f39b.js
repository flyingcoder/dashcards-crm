(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d88fb23"],{"06e1":function(t,e,a){"use strict";var i=a("a545"),s=a.n(i);s.a},"07be":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks-tab"},[a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:!0}}),a("div",{staticClass:"cards"},[a("v-card",{attrs:{flat:""}},[a("v-row",{staticClass:"actions",attrs:{"no-gutters":"","justify-between":""}},[a("v-autocomplete",{staticClass:"col-md-6",attrs:{"hide-details":"",dense:"",solo:"",flat:"",items:t.searchResult,loading:t.isFetching,"search-input":t.search,clearable:"","cache-items":"","item-text":"title",placeholder:"Start typing to Search","prepend-inner-icon":"search",outlined:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("v-list-item",[a("v-list-item-title",[t._v(" Search for "),a("strong",[t._v("Task")])])],1)]},proxy:!0},{key:"item",fn:function(e){var i=e.item;return[a("v-list-item",{on:{click:function(e){return t.showTask(i)}}},[a("v-list-item-avatar",[i.assigned.length>0?a("v-img",{attrs:{src:i.assigned[0].image_url}}):a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._f("truncate")(i.title,25)}}),a("v-list-item-subtitle",{domProps:{innerHTML:t._f("truncate")(i.description,25)}})],1)],1)]}}]),model:{value:t.searchbox,callback:function(e){t.searchbox=e},expression:"searchbox"}}),a("v-spacer"),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({on:{click:t.open_new_task_dialog}},"v-icon",s,!1),i),[t._v(" mdi-plus-circle-outline ")])]}}])},[a("span",[t._v("New Task")])])],1),a("v-card-text",[a("tasks-content",{attrs:{hasLoadMoreBtn:"",id:t.id}})],1)],1),a("preview-card",{directives:[{name:"show",rawName:"v-show",value:t.active_task_id,expression:"active_task_id"}],attrs:{id:t.id,"active-id":t.active_task_id}}),t.active_task_id?t._e():a("Empty",{attrs:{headline:"Add more task..."},scopedSlots:t._u([{key:"extra",fn:function(){return[a("v-btn",{attrs:{large:"",dark:"",color:"#3b589e"},on:{click:t.open_new_task_dialog}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-plus-circle-outline")]),t._v(" New Task ")],1)]},proxy:!0}],null,!1,3796416138)})],1)],1)},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=(a("c5f6"),a("1be9")),r=a("71b5"),c=a("3364"),l=a("72c1"),d=a("fa26"),u=a("2f62");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"TasksTab",components:{TasksCard:r["a"],PreviewCard:c["a"],Avatars:l["a"],TasksContent:d["a"]},props:{id:[Number,String]},data:function(){return{loading:!1,active_task_id:null,page:"project-preview",searchbox:null,search:null,showSearchbox:!0,isFetching:!1,searchResult:[],timeout:null}},created:function(){this.set_page(this.page),this.set_id(this.id),this.set_user_id(this.user.id)},computed:f(f({},Object(u["c"])(["user"])),{},{type:function(){return this.$route.params.type||"project"},paths:function(){return[{text:"Dashboard",disabled:!1,route:{name:"default-content"}},{text:this.type,disabled:!1,route:{path:"/dashboard/".concat(this.type,"/preview/").concat(this.id)}},{text:"Tasks",disabled:!0,route:null}]}}),beforeRouteUpdate:function(t,e,a){this.active_task_id=t.params.task_id},mounted:function(){var t=this;this.$event.$emit("path-change",this.paths),this.$event.$on("show-task-side-preview",(function(e){t.active_task_id=e.id}))},provide:function(){var t=this,e={};return Object.defineProperty(e,"loading",{get:function(){return t.loading}}),{properties:e,bodyMaxHeight:"auto"}},watch:{search:function(t){var e=this;!t||t.length<2||this.isFetching||(this.isFetching=!0,clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.fetchEntries(t)}),500))}},methods:f(f({},Object(u["d"])("taskCards",["set_page","set_id","set_user_id"])),{},{fetchEntries:function(t){var e=this;this.searchResult=[],o["a"].get("api/projects/".concat(this.id,"/tasks/search?keyword=").concat(t)).then((function(t){var a=t.data;e.searchResult=a.data})).finally((function(){return e.isFetching=!1}))},open_new_task_dialog:function(){this.$event.$emit("task-add")},showTask:function(t){this.$event.$emit("show-task-side-preview",t)}})},m=p,h=(a("2cbe"),a("5d58"),a("2877")),v=Object(h["a"])(m,i,s,!1,null,"52c59a9a",null);e["default"]=v.exports},"0a72":function(t,e,a){"use strict";var i=a("125c"),s=a.n(i);s.a},"0bd4":function(t,e,a){"use strict";var i=a("d1ea"),s=a.n(i);s.a},"125c":function(t,e,a){},"22b8":function(t,e,a){},24742:function(t,e,a){"use strict";var i=a("97a7"),s=a.n(i);s.a},"2cbe":function(t,e,a){"use strict";var i=a("61ad"),s=a.n(i);s.a},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"386d":function(t,e,a){"use strict";var i=a("cb7c"),s=a("83a1"),n=a("5f1b");a("214f")("search",1,(function(t,e,a,o){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=o(a,t,this);if(e.done)return e.value;var r=i(t),c=String(this),l=r.lastIndex;s(l,0)||(r.lastIndex=0);var d=n(r,c);return s(r.lastIndex,l)||(r.lastIndex=l),null===d?-1:d.index}]}))},"408c":function(t,e,a){var i=a("2b3e"),s=function(){return i.Date.now()};t.exports=s},4347:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("custom-dialog",{ref:"dialog",attrs:{title:t.dialogTitle,open:t.open},on:{"update:open":function(e){t.open=e},button1:t.cancel},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dialog__textfield",attrs:{filled:"","hide-details":"",color:"#657186",label:"Milestone Title *"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__textfield",attrs:{filled:"","hide-details":"auto",color:"#657186",label:"Start Date","prepend-inner-icon":"event",readonly:"",value:t.start_date,max:t.end_date,hasButtons:!1},on:{input:t.start_date_changed}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__textfield",attrs:{filled:"","hide-details":"auto",color:"#657186",label:"End Date","prepend-inner-icon":"event",readonly:"",value:t.end_date,min:t.start_date,hasButtons:!1},on:{input:t.end_date_changed}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"dialog__textfield",attrs:{filled:"","hide-details":"",color:"#657186",label:"Add days",min:"0",type:"number"},model:{value:t.days,callback:function(e){t.days=t._n(e)},expression:"days"}})],1)],1)]},proxy:!0},{key:"button2",fn:function(){return[a("v-btn",{attrs:{disabled:t.disabled,loading:t.btnloading},on:{click:t.save}},[t._v("Save milestone")])]},proxy:!0}])})},s=[],n=a("c97a"),o=a("c1df"),r=a.n(o),c=a("57e5"),l={name:"MilestoneTabDialog",components:{DatePicker:n["a"],CustomDialog:c["a"]},props:{dialog:Boolean,dialogTitle:String,isEditDialog:Boolean,fieldsToEdit:{type:Object,default:function(){}}},data:function(){return{open:!1,title:null,start_date:null,end_date:null,status:"active",days_init_value:0,btnloading:!1}},created:function(){var t=this;this.$event.$on("btnloading_off",(function(){t.btnloading=!1}))},computed:{disabled:function(){return!this.title},days:{get:function(){return this.start_date&&this.end_date?r()(this.end_date).diff(r()(this.start_date),"days"):this.days_init_value},set:function(t){this.start_date||this.end_date?(this.start_date?this.end_date=r()(this.start_date).add(t,"days").format("YYYY-MM-DD"):this.start_date=r()(this.end_date).subtract(t,"days").format("YYYY-MM-DD"),this.days_init_value=t):this.days_init_value=t}}},watch:{dialog:function(t){this.btnloading=!1,this.open=t},open:function(t){this.$emit("update:dialog",t)},fieldsToEdit:{handler:function(t){this.isEditDialog&&this.update_fields(t)},deep:!0}},methods:{end_date_changed:function(t){this.end_date=t,this.days&&t&&(this.start_date=r()(t).subtract(this.days,"days").format("YYYY-MM-DD"))},start_date_changed:function(t){this.start_date=t,this.days&&t&&(this.end_date=r()(t).add(this.days,"days").format("YYYY-MM-DD"))},cancel:function(){this.open=!1},save:function(){var t={title:this.title,status:this.status,days:this.days,started_at:this.start_date,end_at:this.end_date};this.$emit("save",t)},update_fields:function(t){var e=t.fields,a=Object.assign({},e);this.title=a.title,this.status=a.status,this.days=a.days,this.start_date=a.started_at,this.end_date=a.end_at},clear_and_close:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.cancel()}}},d=l,u=(a("24742"),a("2877")),_=Object(u["a"])(d,i,s,!1,null,"0ec2d04f",null);e["a"]=_.exports},4469:function(t,e,a){},"48f6":function(t,e,a){},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),s=a("d8e8"),n=a("4bf8"),o=a("79e5"),r=[].sort,c=[1,2,3];i(i.P+i.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),s(t))}})},5872:function(t,e,a){"use strict";var i=a("b718"),s=a.n(i);s.a},"5aa9":function(t,e,a){},"5d58":function(t,e,a){"use strict";var i=a("76c4"),s=a.n(i);s.a},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})}))},"60a9":function(t,e,a){},"61ad":function(t,e,a){},6943:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dash__card"},[a("div",{staticClass:"card__header"},[a("h3",{staticClass:"card__title"},[t._v(t._s(t.title))]),t.dashboard?t._t("actions",[a("div",{staticClass:"actions"},[t.hasListView?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("list-view")}}},[t._v("list")]):t._e(),t.hasGridView?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("grid-view")}}},[t._v("grid_on")]):t._e(),t.hasRemove?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("remove")}}},[t._v("remove")]):t._e(),t.hasAdd?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("add")}}},[t._v("mdi-plus-circle-outline")]):t._e(),t.hasExpand?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("expand")}}},[t._v("zoom_out_map")]):t._e(),t.hasClose?a("v-icon",{staticClass:"action",attrs:{fab:""},on:{click:function(e){return t.$emit("close")}}},[t._v("close")]):t._e()],1)]):t._e()],2),a("div",{staticClass:"card__content"},[t._t("content")],2),a("v-row",{staticClass:"card__footer",attrs:{"no-gutters":""}},[t._t("footer",[t.viewMoreBtn?a("v-btn",{staticClass:"view__more_btn mx-auto",attrs:{text:"",loading:t.btnloading2},on:{click:function(e){return t.$emit("view-more")}}},[t._v(" VIEW MORE ")]):t._e()])],2)],1)},s=[],n={name:"DashCard",props:{title:String,viewMoreBtn:Boolean,dashboard:Boolean,hasListView:{type:Boolean,default:!1},hasGridView:{type:Boolean,default:!1},hasRemove:{type:Boolean,default:!1},hasAdd:{type:Boolean,default:!1},hasExpand:{type:Boolean,default:!0},hasClose:{type:Boolean,default:!0}},data:function(){return{btnloading2:!1}},created:function(){var t=this;this.$event.$on("btnloading_off",(function(){t.btnloading2=!1}))}},o=n,r=(a("ad81"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"636cac56",null);e["a"]=c.exports},"71b5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks-card"},[a("div",{staticClass:"tasks__content"},[a("dash-card",{staticClass:"task__content",attrs:{title:"Tasks","view-more-btn":!0,dashboard:t.dashboard},on:{close:function(e){return t.$emit("close")},expand:t.expand}},[a("div",{staticClass:"content-wrapper",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"tasks-items"},[a("tasks-content",{attrs:{hasLoadMoreBtn:!1,"show-project":t.showProject}})],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.noMoreData?t._e():a("v-btn",{staticClass:"view__more_btn",attrs:{text:"",loading:t.btnloading},on:{click:t.loadMore}},[t._v(" VIEW MORE ")])],1)])],1)])},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=(a("c5f6"),a("2f62")),r=a("e06e"),c=a("6943"),l=a("fa26");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"TasksCard",mixin:[r["a"]],components:{DashCard:c["a"],TasksContent:l["a"]},props:{id:[Number,String],dashboard:Boolean,page:{type:String,default:"dashboard"},showProject:{type:Boolean,default:!0}},computed:u(u({},Object(o["c"])("taskCards",["see_more_url","btnloading"])),{},{active_task_id:{get:function(){return this.task?this.task.id:null},set:function(t){return t}},noMoreData:function(){return!this.see_more_url}}),data:function(){return{task:null}},created:function(){this.$route.query.id&&(this.active_task_id=this.$route.query.id)},methods:u(u({},Object(o["b"])("taskCards",["see_more"])),{},{loadMore:function(){this.see_more()},expand:function(){this.$router.push({name:"expanded-tasks"})}})},f=_,p=a("2877"),m=Object(p["a"])(f,i,s,!1,null,null,null);e["a"]=m.exports},7653:function(t,e,a){"use strict";var i=a("48f6"),s=a.n(i);s.a},"76c4":function(t,e,a){},"77af":function(t,e,a){"use strict";var i=a("60a9"),s=a.n(i);s.a},"7d0a":function(t,e,a){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"92a0":function(t,e,a){"use strict";var i=a("5aa9"),s=a.n(i);s.a},"94f3":function(t,e,a){"use strict";var i=a("7d0a"),s=a.n(i);s.a},"97a7":function(t,e,a){},a3b6:function(t,e,a){},a545:function(t,e,a){},ad81:function(t,e,a){"use strict";var i=a("4469"),s=a.n(i);s.a},b047c:function(t,e,a){var i=a("1a8c"),s=a("408c"),n=a("b4b0"),o="Expected a function",r=Math.max,c=Math.min;function l(t,e,a){var l,d,u,_,f,p,m=0,h=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError(o);function k(e){var a=l,i=d;return l=d=void 0,m=e,_=t.apply(i,a),_}function b(t){return m=t,f=setTimeout($,e),h?k(t):_}function y(t){var a=t-p,i=t-m,s=e-a;return v?c(s,u-i):s}function w(t){var a=t-p,i=t-m;return void 0===p||a>=e||a<0||v&&i>=u}function $(){var t=s();if(w(t))return C(t);f=setTimeout($,y(t))}function C(t){return f=void 0,g&&l?k(t):(l=d=void 0,_)}function x(){void 0!==f&&clearTimeout(f),m=0,l=p=d=f=void 0}function O(){return void 0===f?_:C(s())}function j(){var t=s(),a=w(t);if(l=arguments,d=this,p=t,a){if(void 0===f)return b(p);if(v)return clearTimeout(f),f=setTimeout($,e),k(p)}return void 0===f&&(f=setTimeout($,e)),_}return e=n(e)||0,i(a)&&(h=!!a.leading,v="maxWait"in a,u=v?r(n(a.maxWait)||0,e):u,g="trailing"in a?!!a.trailing:g),j.cancel=x,j.flush=O,j}t.exports=l},b4b0:function(t,e,a){var i=a("1a8c"),s=a("ffd6"),n=NaN,o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(t){if("number"==typeof t)return t;if(s(t))return n;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var a=c.test(t);return a||l.test(t)?d(t.slice(2),a?2:8):r.test(t)?n:+t}t.exports=u},b51a:function(t,e,a){"use strict";var i=a("a3b6"),s=a.n(i);s.a},b718:function(t,e,a){},bc29:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"members-dropdown"},[a("v-autocomplete",t._b({attrs:{value:t.members,items:t.items,"search-input":t.search,loading:t.isLoading,"item-value":"id","item-text":"first_name","prepend-inner-icon":"search","no-filter":"",chips:"",multiple:t.multiple,clearable:"","hide-details":"","hide-selected":"",color:"#657186",label:"Assign member(s)",filled:"","clear-icon":"mdi-close-circle-outline","append-outer-icon":t.showOuterIcon?"mdi-plus-circle-outline":""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e},"click:append-outer":t.open_add_new_member},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",t._b({attrs:{"input-value":e.selected,close:""},on:{click:e.select,"click:close":function(a){return t.remove_chip(e.index)}}},"v-chip",e.attrs,!1),[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:e.item.image_url}})],1),t._v(" "+t._s(e.item.fullname)+" ")],1)]}},{key:"item",fn:function(e){return[a("v-list-item",{key:e.item.id,on:{click:function(a){return t.add_to_selected(e.item)}}},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.item.image_url}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.fullname)}}),a("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.item.job_title)}})],1),a("v-list-item-action",[t.is_item_active(e.item.id)?t._e():a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v(" check_circle_outline ")]),t.is_item_active(e.item.id)?a("v-icon",{attrs:{color:"success"}},[t._v(" check_circle ")]):t._e()],1)],1)]}}])},"v-autocomplete",t.$attrs,!1))],1)},s=[],n=(a("6762"),a("2fdb"),a("2909")),o=a("0644"),r=a.n(o),c={name:"MembersDropdown",inheritAttrs:!1,props:{members:Array,memberItems:Array,isLoading:Boolean,multiple:{type:Boolean,default:!0},showOuterIcon:{type:Boolean,default:!1}},data:function(){return{items:[],search:null}},watch:{search:function(t){this.$emit("search",t)},memberItems:function(t){this.items=Object(n["a"])(t)}},methods:{members_selected:function(t){this.$emit("update:members",t)},is_item_active:function(t){return this.members.includes(t)},remove_chip:function(t){var e=r()(this.members);e.splice(t,1),this.$emit("update:members",e)},add_to_selected:function(t){this.is_item_active(t.id)||this.members.push(t.id)},open_add_new_member:function(){this.$event.$emit("open-new-member-dialog",!0)}}},l=c,d=(a("b51a"),a("e5d6"),a("2877")),u=Object(d["a"])(l,i,s,!1,null,"7f070529",null);e["a"]=u.exports},c97a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g(t._b({attrs:{slot:"activator",value:t.value,solo:"","hide-details":"",color:"#657186",readonly:"",width:t.minWidth},slot:"activator"},"v-text-field",t.$attrs,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{clearable:"",color:"#657186",max:t.max,min:t.min,"no-title":"",scrollable:""},on:{"click:date":t.dateClick},model:{value:t.picker_date,callback:function(e){t.picker_date=e},expression:"picker_date"}},[a("v-spacer"),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.cancel}},[t._v("Cancel")]):t._e(),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.save}},[t._v("OK")]):t._e(),t.hasButtons?a("v-btn",{attrs:{text:"",outlined:"",color:"#657186"},on:{click:t.clear}},[t._v("Clear")]):t._e()],1)],1)},s=[],n={name:"DatePicker",inheritAttrs:!1,props:{value:{type:String,default:null},min:{type:String,default:null},max:{type:String,default:null},minWidth:{type:String,default:"290px"},hasButtons:{type:Boolean,default:!0}},data:function(){return{menu:!1,picker_date:null}},watch:{value:function(t){this.picker_date=t}},methods:{save:function(){this.$emit("input",this.picker_date),this.cancel()},cancel:function(){this.menu=!1},clear:function(){this.picker_date=null},dateClick:function(){this.hasButtons||this.save()}}},o=n,r=(a("7653"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"29eaae64",null);e["a"]=c.exports},d1ea:function(t,e,a){},e06e:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("386d"),a("a481"),a("c5f6"),a("28a5"),a("55dd"),a("2fdb"),a("ac6a"),a("6762"),a("20d6");var i=a("2909"),s=a("b047c"),n=a.n(s),o=a("d4e9"),r=a("1be9"),c={methods:{resetPagination:function(){this.pagination.current=1,this.pagination.total=0,this.noMoreData=!1},clear_selected:function(){this.selected=[],this.$event.$emit("clear_selected",[]),this.$event.$emit("btnloading_off",!1)},add_item:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;o["a"][t](e,s).then((function(t){var e=t.data;if(Array.isArray(e)){var s;(s=a.items).push.apply(s,Object(i["a"])(e.reverse()))}else{var o=a.items.findIndex((function(t){return t.id===e.id}));~o?a.items.splice(o,1,e):a.items.push(e)}a.clear_selected(),a.$refs.add_dialog&&a.$refs.add_dialog.clear_and_close(),a.$event.$emit("open_snackbar",a.table_config.add_message),"function"===typeof n&&n(t)})).finally((function(){return a.$event.$emit("btnloading_off",!1)}))},extract_per_page:function(t){var e=t.search("per_page");return t.substring(e+9,e+10)},calc_per_page_items:function(t,e){var a=[5,10,15,20,25];return a.includes(t)||a.push(t),!a.includes(e)&&e<=25&&a.push(e),a},update_item:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;o["a"][t](this.edit_item.id,e,i).then((function(t){var e=a.items.findIndex((function(e){return e.id===t.data.id}));~e&&a.items.splice(e,1,t.data),a.edit_item={id:null,fields:null},a.edit_dialog=!1,a.clear_selected(),a.$event.$emit("open_snackbar",a.table_config.update_message),"function"===typeof s&&s(t)})).finally((function(){return a.$event.$emit("btnloading_off",!1)}))},delete_item:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;o["a"][t](this.delete_item_id,a).then((function(){var t=e.items.findIndex((function(t){return t.id===e.delete_item_id}));~t&&e.items.splice(t,1),e.delete_item_id=null,e.delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",e.table_config.delete_message),"function"===typeof i&&i(response)})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},bulk_delete:function(t){var e=this,a={ids:this.selected.map((function(t){return t.id}))};o["a"][t]({data:a}).then((function(t){var a=t.data;e.selected.forEach((function(t){var a=e.items.findIndex((function(e){return e.id===t.id}));~a&&e.items.splice(a,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",a.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},bulk_delete_via_url:function(t){var e=this,a={ids:this.selected.map((function(t){return t.id}))};r["a"].delete(t,{data:a}).then((function(t){var a=t.data;e.selected.forEach((function(t){var a=e.items.findIndex((function(e){return e.id===t.id}));~a&&e.items.splice(a,1)})),e.bulk_delete_dialog=!1,e.clear_selected(),e.$event.$emit("open_snackbar",a.message)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},open_edit_dialog:function(t){this.edit_dialog=!0,this.$set(this.edit_item,"id",t.id),this.$set(this.edit_item,"fields",t)},open_delete_dialog:function(t){this.delete_dialog=!0,this.delete_item_id=t.id},open_bulk_delete_dialog:function(t){this.bulk_delete_dialog=!0,this.selected=t},fill_table:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0,o["a"][t](i).then((function(t){e.items_response=t.data,a?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},fill_table_via_url:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.loading=!0;var s={page:this.pagination.current};t.includes("per_page")||(s.per_page=this.$store.getters["configs/general_page_limits"]),r["a"].get(t,{params:s}).then((function(t){e.items_response=t.data,a?(e.items=t.data.data,e.pagination.current=t.data.current_page,e.pagination.total=t.data.last_page,e.hasMoreData()):e.items=t.data,"function"===typeof i&&i(t)})).finally((function(){e.clear_selected(),e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},load_more_on_table:function(t){var e=this;this.loading=!0;var a={page:this.pagination.current+1};o["a"][t]({params:a}).then((function(t){var a=t.data;e.items_response=a.data,a.data.forEach((function(t){e.items.push(t)})),e.pagination.current=a.current_page,e.pagination.total=a.last_page,e.hasMoreData()})).finally((function(){e.clear_selected(),e.loading=!1,e.scrollToBottom(),e.$event.$emit("btnloading_off",!1)}))},load_more_via_url:function(t,e){var a=this;this.loading=!0;var i={page:this.pagination.current+1};t.includes("per_page")||(i.per_page=this.$store.getters["configs/general_page_limits"]),r["a"].get(t,{params:i}).then((function(t){var i=t.data;a.items_response=i.data,i.data.forEach((function(t){a.items.push(t)})),a.pagination.current=i.current_page,a.pagination.total=i.last_page,a.hasMoreData(),"function"===typeof e&&e(i)})).finally((function(){a.clear_selected(),a.loading=!1,a.scrollToBottom(),a.$event.$emit("btnloading_off",!1)}))},fill_table_with_data:function(t){this.items=t},add_table_rows:function(t,e){this.items=t,this.items_response=e},changeSort:function(t){this.sort.sortBy===t?this.sort.descending=!this.sort.descending:(this.sort.sortBy=t,this.sort.descending=!1)},refresh_table:function(t){var e=this;o["a"][this.table_config.refresh_table_api_name](t).then((function(t){e.$event.$emit("open_snackbar",e.table_config.refresh_table_message),e.loading=!1,e.clear_selected(),e.items_response=t.data,e.items=t.data.data})).finally((function(){return e.$event.$emit("btnloading_off",!1)}))},update_table_actions:function(t){if(t.page&&(this.page=Number(t.page)),t.per_page&&(this.rows_per_page=Number(t.per_page)),t.search&&(this.search=t.search),t.sort){var e=t.sort.split("|");this.sort.sortBy=e[0],"asc"===e[1]?this.sort.descending=!1:"desc"===e[1]&&(this.sort.descending=!0)}},hasMoreData:function(){this.componentKey+=1,this.pagination.current>=this.pagination.total&&(this.noMoreData=!0)},toggleAll:function(){this.selected.length?this.clear_selected():this.selected=this.items.slice()},setPreferredView:function(t){window.localStorage.setItem("bzk_prefer_view",t),this.view=t},getPreferredView:function(){return window.localStorage.getItem("bzk_prefer_view")||"list"},scrollToBottom:function(){setTimeout((function(){var t=document.getElementsByClassName("v-data-table__wrapper")[0];t&&(t.scrollTop=t.scrollHeight)}),1)},debounce:n()((function(t){this.search=t}),500)}},l={mixins:[c],data:function(){return{edit_dialog:!1,add_dialog:!1,delete_dialog:!1,permissionDialog:!1,bulk_delete_dialog:!1,loading:!1,items:[],items_response:null,edit_item:{id:null,fields:null},delete_item_id:null,show_delete_selected:!1,selected_ids:[],selected:[],rows_per_page:null,page:1,sort:{sortBy:null,descending:!1},search:"",pagination:{current:1,total:0},noMoreData:!1,componentKey:1,view:"list",btnloading:!1}},watch:{selected_ids:function(t){t.length>0?this.show_delete_selected=!0:this.show_delete_selected=!1},api_query:function(t,e){var a=Number(this.extract_per_page(t)),i=Number(this.extract_per_page(e))||null;this.items_response&&this.rows_per_page===this.items.length&&a!==i||(this.$router.replace({name:this.table_config.route_name,query:{page:this.page,per_page:this.rows_per_page,search:this.search,sort:this.query_for_sorting}}),this.loading=!0,this.refresh_table(t))}}}},e5d6:function(t,e,a){"use strict";var i=a("22b8"),s=a.n(i);s.a},fa26:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks-content"},[t.hasTabs?[a("v-tabs",{staticClass:"task__tabs",attrs:{height:"45",centered:"",grow:"","hide-slider":""},model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},t._l(t.tabs,(function(e){return a("v-tab",{key:e.name,attrs:{href:"#"+e.name}},[a("span",[t._v(t._s(e.name))])])})),1),a("v-tabs-items",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},t._l(t.tabs,(function(e){return a("v-tab-item",{key:e.id,attrs:{value:e.name}},[a("v-card",{attrs:{flat:""}},[t.active_tab===e.name?a("tasks-tab",{attrs:{tab:t.active_tab,"user-id":t.userId,showProject:t.showProject}}):t._e()],1)],1)})),1)]:[a("tasks-tab",{attrs:{tab:"My Tasks",showProject:t.showProject}})],t.hasLoadMoreBtn?a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"view__more_btn",attrs:{text:"",disabled:!t.has_see_more_url},on:{click:t.loadMore}},[t._v(" VIEW MORE ")]),a("v-spacer")],1):t._e(),a("TaskDialog",{ref:"add_task_dialog",attrs:{"dialog-title":"Add Task",id:t.project_id},on:{save:function(e){return t.create_new_task(e)},close:function(e){return t.closeAddDialog()}}}),a("TaskDialog",{ref:"edit_task_dialog",attrs:{"dialog-title":"Edit Task",id:t.project_id},on:{save:function(e){return t.edit_task(e)},close:function(e){return t.closeEditDialog()}}}),a("DeleteDialog",{attrs:{"open-dialog":t.delete_task_dialog,title:"Delete Task","text-content":"Are you sure you want to delete this task?"},on:{"update:openDialog":function(e){t.delete_task_dialog=e},"update:open-dialog":function(e){t.delete_task_dialog=e},delete:function(e){return t.delete_task()}}}),a("TaskViewDialog",{ref:"view_task_dialog",attrs:{task:t.task},on:{"close-task-preview":t.closeViewDialog}}),a("ConfirmDialog",{attrs:{"open-dialog":t.confirm_mark_as_complete_dialog,title:"Confirmation required!","confirm-button-text":"Yes"},on:{"update:openDialog":function(e){t.confirm_mark_as_complete_dialog=e},"update:open-dialog":function(e){t.confirm_mark_as_complete_dialog=e},confirm:function(e){return t.confirm_mark_as_complete_task()}},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"title",attrs:{md:"12"}},[a("v-banner",{attrs:{"two-line":"",outlined:"",tile:""}},[a("v-avatar",{attrs:{slot:"icon",color:"deep-purple accent-4",size:"40"},slot:"icon"},[a("v-icon",{attrs:{icon:"mdi-lock",color:"white"}},[t._v(" mdi-clipboard-check-outline ")])],1),a("p",[t._v("Mark task as completed?")]),a("p",{staticClass:"body-2"},[a("v-checkbox",{attrs:{label:"Notify project|campaign members"},model:{value:t.notify_task_complete,callback:function(e){t.notify_task_complete=e},expression:"notify_task_complete"}})],1)],1)],1)],1)]},proxy:!0}])}),a("ConfirmDialog",{attrs:{"open-dialog":t.confirm_mark_as_urgent_dialog,title:"Confirmation required!","confirm-button-text":"Yes"},on:{"update:openDialog":function(e){t.confirm_mark_as_urgent_dialog=e},"update:open-dialog":function(e){t.confirm_mark_as_urgent_dialog=e},confirm:function(e){return t.confirm_mark_as_urgent_task()}},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"title",attrs:{md:"12"}},[a("v-banner",{attrs:{"two-line":"",outlined:"",tile:""}},[a("v-avatar",{attrs:{slot:"icon",color:"deep-purple accent-4",size:"40"},slot:"icon"},[a("v-icon",{attrs:{icon:"mdi-lock",color:"white"}},[t._v(" mdi-clipboard-alert-outline ")])],1),t.task&&"urgent"!==t.task.status.toLowerCase()?a("p",[t._v("Mark task as urgent?")]):a("p",[t._v("Mark task as not urgent?")]),t.task&&"urgent"!==t.task.status.toLowerCase()?a("p",{staticClass:"body-2"},[t._v(" Setting task to urgent will notify assigned user(s) ")]):t._e()],1)],1)],1)]},proxy:!0}])})],2)},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("20d6"),a("ade3")),o=(a("c5f6"),a("2f62")),r=a("e06e"),c=a("1be9"),l={get_project_members:function(t){return c["a"].get("api/projects/".concat(t,"/member?all=true"))},get_project_milestones:function(t){return c["a"].get("api/project/".concat(t,"/milestone?all=true"))},create_new_task:function(t){return c["a"].post("api/task",t)},edit_task:function(t,e){return c["a"].put("api/task/".concat(t),e)},delete_task:function(t){return c["a"].delete("api/task/".concat(t))},mark_as_complete_task:function(t,e){return c["a"].put("api/task/".concat(t,"/mark-as-complete"),e)},mark_as_urgent_task:function(t,e){return c["a"].put("api/task/".concat(t,"/mark-as-urgent"),e)}},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{staticClass:"pa-0 ma-0",attrs:{md:"12"}},[a("div",{staticClass:"tasks-tab"},[a("task-chips",{attrs:{"count-all":t.total,"count-completed":t.counter.completed,"count-pending":t.counter.pending,"count-behind":t.counter.behind,"count-open":t.counter.open,"count-urgent":t.counter.urgent,"active-chip":t.active_chip},on:{"update:activeChip":function(e){t.active_chip=e},"update:active-chip":function(e){t.active_chip=e}}}),a("task-custom-table",{attrs:{tasks:t.filtered_tasks,tab:t.tab,showProject:t.showProject}}),t.loading?a("div",{staticClass:"loading"},[a("v-progress-linear",{attrs:{indeterminate:!0}})],1):t._e()],1)])},u=[],_=function(t,e){var a=e._c;return a("div",{staticClass:"task__chips text-xs-center"},[a("v-chip",{staticClass:"mx-1",class:["task__chip",{active:"all"===e.props.activeChip}],attrs:{small:""},on:{click:function(t){return e.listeners["update:activeChip"]("all")}}},[a("v-avatar",{staticClass:"task__avatar",attrs:{left:""}},[e._v(e._s(e.props.countAll))]),e._v(" All ")],1),a("v-chip",{staticClass:"mx-1",class:["task__chip",{active:"completed"===e.props.activeChip}],attrs:{small:""},on:{click:function(t){return e.listeners["update:activeChip"]("completed")}}},[a("v-avatar",{staticClass:"task__avatar",attrs:{left:""}},[e._v(e._s(e.props.countCompleted))]),e._v(" Completed ")],1),a("v-chip",{staticClass:"mx-1",class:["task__chip",{active:"pending"===e.props.activeChip}],attrs:{small:""},on:{click:function(t){return e.listeners["update:activeChip"]("pending")}}},[a("v-avatar",{staticClass:"task__avatar",attrs:{left:""}},[e._v(e._s(e.props.countPending))]),e._v(" Pending ")],1),a("v-chip",{staticClass:"mx-1",class:["task__chip",{active:"open"===e.props.activeChip}],attrs:{small:""},on:{click:function(t){return e.listeners["update:activeChip"]("open")}}},[a("v-avatar",{staticClass:"task__avatar",attrs:{left:""}},[e._v(e._s(e.props.countOpen))]),e._v(" Open ")],1),a("v-chip",{staticClass:"mx-1",class:["task__chip",{active:"urgent"===e.props.activeChip}],attrs:{small:""},on:{click:function(t){return e.listeners["update:activeChip"]("urgent")}}},[a("v-avatar",{staticClass:"task__avatar",attrs:{left:""}},[e._v(e._s(e.props.countUrgent))]),e._v(" Urgent ")],1)],1)},f=[],p={name:"TaskChips",props:{countAll:{type:Number,default:0},countCompleted:{type:Number,default:0},countPending:{type:Number,default:0},countBehind:{type:Number,default:0},countUrgent:{type:Number,default:0},countOpen:{type:Number,default:0},activeChip:{type:String,default:"all"}}},m=p,h=(a("06e1"),a("0bd4"),a("2877")),v=Object(h["a"])(m,_,f,!0,null,"4d2f3398",null),g=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-custom-table"},[a("v-row",{staticClass:"task_header",attrs:{"no-gutters":""}},[t.is_my_task_tab?t._e():a("v-col",{staticClass:"task__tableHead",attrs:{cols:"2"}},[t._v("Assigned")]),a("v-col",{staticClass:"task__tableHead",attrs:{cols:t.is_my_task_tab?8:6}},[t._v("Task")]),a("v-col",{staticClass:"task__tableHead text-center",attrs:{cols:"2"}},[t._v("Status")]),a("v-col",{staticClass:"task__tableHead text-center",attrs:{cols:"2"}},[t._v("Action")])],1),a("div",{staticClass:"task_body",style:{height:t.bodyMaxHeight}},[t.tasks.length>0?a("v-list",{attrs:{dense:""}},[t._l(t.tasks,(function(e){return[a("v-list-item",{key:e.id,staticClass:"px-0"},[a("v-list-item-content",{staticClass:"pa-0"},[a("v-list-item-title",[a("v-row",{class:["task__tableBody",{active:e.id===t.active_task_id}],attrs:{"no-gutters":""},on:{click:function(a){return a.stopPropagation(),t.task_view_action(e)}}},[t.is_my_task_tab?t._e():a("v-col",{staticClass:"assignee__col",attrs:{md:"2"}},[e.assigned.length>0?a("Avatars",{staticStyle:{display:"inline-block"},attrs:{deep:!1,items:e.assigned,count:1}}):a("v-avatar",{attrs:{size:"40"}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-account-question-outline")])],1)],1),a("v-col",{staticClass:"project__col",attrs:{md:t.is_my_task_tab?8:6}},[a("p",{staticClass:"subtitle-2"},[t._v(" "+t._s(t._f("truncate")(t._f("ucwords")(e.title),35))),a("br"),t.showProject&&e.project?a("router-link",{attrs:{to:t.get_project_url(e.project)},nativeOn:{click:function(t){return t.stopImmediatePropagation()}}},[a("small",{staticClass:"caption"},[t._v(t._s(t._f("truncate")(t._f("ucwords")(e.project.title),20))+" | ")])]):t._e(),e.milestone?a("small",{staticClass:"caption"},[t._v(t._s(t._f("truncate")(t._f("ucwords")(e.milestone.title),20)))]):t._e()],1)]),a("v-col",{staticClass:"status__col text-center",attrs:{md:"2",sm:"2"}},["completed"===e.status.toLowerCase()?a("v-icon",{attrs:{color:"success"}},[t._v(" mdi-clipboard-check-outline ")]):"pending"===e.status.toLowerCase()?a("v-icon",{attrs:{color:"warning"}},[t._v(" mdi-clipboard-pulse-outline ")]):"behind"===e.status.toLowerCase()?a("v-icon",{attrs:{color:"danger"}},[t._v(" mdi-clipboard-arrow-left-outline ")]):"open"===e.status.toLowerCase()?a("v-icon",{attrs:{color:"info"}},[t._v(" mdi-clipboard-text-play-outline ")]):"urgent"===e.status.toLowerCase()?a("v-icon",{attrs:{color:"red"}},[t._v(" mdi-clipboard-alert-outline ")]):t._e(),a("br"),t._v(" "+t._s(t._f("ucwords")(e.status))+" ")],1),a("v-col",{staticClass:"action__col",attrs:{md:"2",sm:"2"}},[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mt-2",attrs:{color:"grey",dark:"",icon:""}},Object.assign({},s,i)),[a("v-icon",[t._v("mdi-dots-horizontal-circle-outline")])],1)]}}],null,!0)},[a("span",[t._v("Actions")])])]}}],null,!0)},[a("v-list",{attrs:{dense:""}},["completed"!==e.status.toLowerCase()&&t.can_edit_task?a("v-list-item",{on:{click:function(a){return t.task_action(e,"task-edit")}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:"grey",left:""}},[t._v(" mdi-file-document-edit-outline ")]),t._v(" Edit Task ")],1)],1):t._e(),t.can_delete_task?a("v-list-item",{on:{click:function(a){return t.task_action(e,"task-delete")}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:"grey",left:""}},[t._v("mdi-delete-alert-outline")]),t._v(" Delete Task ")],1)],1):t._e(),t.can_view_task?a("v-list-item",{on:{click:function(a){return t.task_view_action(e)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:"grey",left:""}},[t._v("mdi-clipboard-text-play")]),t._v(" View Task ")],1)],1):t._e(),"completed"!==e.status.toLowerCase()&&t.can_edit_task?a("v-list-item",{on:{click:function(a){return t.task_action(e,"task-mark-as-complete")}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:"grey",left:""}},[t._v("mdi-clipboard-check")]),t._v(" Mark as Complete ")],1)],1):t._e(),"completed"!==e.status.toLowerCase()&&t.can_edit_task?a("v-list-item",{on:{click:function(a){return t.task_action(e,"task-mark-as-urgent")}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:"grey",left:""}},[t._v("mdi-clipboard-alert-outline")]),t._v(" "+t._s("urgent"===e.status.toLowerCase()?"Mark as Non-urgent":"Mark as Urgent")+" ")],1)],1):t._e()],1)],1)],1)],1)],1)],1)],1)]}))],2):a("Empty",{attrs:{icon:"mdi-clipboard-list-outline",headline:"No task found!"}})],1)],1)},b=[],y=a("72c1");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var C={name:"TaskCustomTable",components:{Avatars:y["a"]},props:{tasks:Array,tab:String,showProject:{type:Boolean,default:!1}},inject:{bodyMaxHeight:{from:"bodyMaxHeight",default:"100%"}},data:function(){return{active_task_id:null}},created:function(){var t=this;this.tasks.length>0&&(this.active_task_id=this.tasks[0].id,this.$event.$emit("show-task-side-preview",this.tasks[0])),this.$event.$on("task_completed",(function(e){t.active_task_id||(t.active_task_id=e.id),t.task_is_completed()})),this.$event.$on("task_deleted",(function(e){t.active_task_id||(t.active_task_id=e.id),t.task_is_deleted()})),this.$event.$on("task-is-updated",(function(e){t.replace_task(e)}))},computed:$($({},Object(o["c"])("taskCards",["page"])),{},{user:function(){return this.$store.getters.user},permission:function(){return this.$_permissions.get("tasks_own")},can_view_task:function(){return!!this.user.is_admin||this.permission&&this.permission.view},can_edit_task:function(){return!!this.user.is_admin||this.permission&&this.permission.update},can_delete_task:function(){return!!this.user.is_admin||this.permission&&this.permission.delete},is_my_task_tab:function(){return"All Tasks"!==this.tab}}),methods:$($({},Object(o["d"])("taskCards",["replace_task"])),{},{row_clicked:function(t){this.active_task_id=t.id,this.$event.$emit("show-task-side-preview",t)},task_action:function(t,e){this.$event.$emit(e,t)},task_view_action:function(t){"project-preview"===this.page?this.row_clicked(t):this.task_action(t,"task-view")},remove_task:function(t){var e=this.tasks.findIndex((function(e){return e.id===t}));~e&&this.tasks.splice(e,1)},task_is_completed:function(){var t=this,e={status:"completed"};l.mark_as_complete_task(this.active_task_id,e).then((function(e){var a=e.data;t.replace_task(a),t.$event.$emit("btnloading_off",!1),t.$event.$emit("open_snackbar","Task is completed"),t.$event.$emit("close_confirm_dialog",!0)}))},task_is_deleted:function(){var t=this;l.delete_task(this.active_task_id).then((function(){t.remove_task(t.active_task_id),t.$event.$emit("btnloading_off",!1),t.$event.$emit("close_delete_dialog",!0),t.$event.$emit("open_snackbar","Task is deleted")}))},get_project_url:function(t){return"/dashboard/".concat(t.type,"/preview/").concat(t.id)}})},x=C,O=(a("92a0"),Object(h["a"])(x,k,b,!1,null,"11f75d7a",null)),j=O.exports;function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P={name:"TasksTab",components:{TaskChips:g,TaskCustomTable:j},props:{tab:String,showProject:{type:Boolean,default:!1}},data:function(){return{active_chip:"all"}},computed:T(T({},Object(o["c"])("taskCards",["total","tasks","counter","loading","user_id"])),{},{filtered_tasks:function(){var t=this;return"all"===this.active_chip?this.tasks:this.tasks.filter((function(e){return e.status.toLowerCase()===t.active_chip.toLowerCase()}))},tasks_are_empty:function(){return!this.loading&&0===this.tasks.length}}),watch:{tab:{handler:function(t){this.get_tasks({tab:t,filter:this.active_chip})},immediate:!0}},methods:T(T({},Object(o["d"])("taskCards",["set_user_id"])),Object(o["b"])("taskCards",["get_tasks"]))},M=P,S=(a("5872"),Object(h["a"])(M,d,u,!1,null,"34cf25cd",null)),E=S.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-dialog"},[a("custom-dialog",{ref:"dialog",attrs:{open:t.computedDialog,title:t.dialogTitle,maxWidth:850},on:{"update:open":function(e){t.computedDialog=e},button1:t.clear_and_close},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-row",{staticClass:"custom-dialog",attrs:{wrap:""}},[a("v-col",{staticClass:"pt-0",attrs:{cols:"6"}},[a("v-text-field",{staticClass:"dialog__textfield d-field",attrs:{label:"Add task title *",filled:"","hide-details":"",color:"#657186"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"6"}},[a("v-select",{staticClass:"d-field",attrs:{items:t.milestones.items,"item-text":"title","item-value":"id",label:"Milestone",placeholder:"Select Milestone",filled:"",color:"#657186","hide-details":""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[a("v-btn",{staticClass:"btn-add-milestone",attrs:{icon:"",large:""},on:{click:t.open_add_milestone_dialog}},[a("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}]),model:{value:t.milestones.selected,callback:function(e){t.$set(t.milestones,"selected",e)},expression:"milestones.selected"}})],1),a("v-col",{staticClass:"pt-0 pl-4",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__date d-field",attrs:{hasButtons:!1,label:"Start Date","prepend-inner-icon":"event",readonly:"",max:t.end_date},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),a("v-col",{staticClass:"pt-0 pr-4",attrs:{cols:"12",md:"6"}},[a("date-picker",{staticClass:"dialog__date d-field",attrs:{hasButtons:!1,label:"End Date","prepend-inner-icon":"event",readonly:"",min:t.start_date},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("members-dropdown",{staticClass:"task-member d-field",attrs:{members:t.members.selected,"member-items":t.members.items,"is-loading":t.members.loading},on:{"update:members":function(e){return t.$set(t.members,"selected",e)},search:function(e){return t.filter_dropdown_items("members",e)}}})],1),a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("Editor",{key:t.task?t.task.id:0,ref:"editor",attrs:{hasFloatingTools:!1,content:t.description,placeholder:"Task description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1)]},proxy:!0}])},[a("template",{slot:"button2"},[a("v-btn",{attrs:{disabled:t.disabled,loading:t.btnloading},on:{click:t.save}},[t._v("Save")])],1)],2),a("milestone-tab-dialog",{ref:"add_milestone_dialog",attrs:{dialog:t.add_milestone_dialog,"dialog-title":"Add New Milestone"},on:{"update:dialog":function(e){t.add_milestone_dialog=e},save:t.add_new_milestone}})],1)},A=[],I=(a("6762"),a("2fdb"),a("5df3"),a("3835")),L=(a("96cf"),a("1da1")),N=a("0644"),Y=a.n(N),R=a("c97a"),V=a("5d98"),H=a("bc29"),q=a("57e5"),W=a("4347"),z={components:{DatePicker:R["a"],Editor:V["a"],MembersDropdown:H["a"],CustomDialog:q["a"],MilestoneTabDialog:W["a"]},props:{id:[Number,String],dialog:Boolean,dialogTitle:String,milestoneStartDate:String},data:function(){return{task:null,btnloading:!1,open:!1,title:null,description:null,status:"open",start_date:null,end_date:null,members:{selected:[],all_items:[],items:[],loading:!1},milestones:{selected:null,items:[]},add_milestone_dialog:!1}},mounted:function(){var t=this;this.$event.$on("btnloading_off",(function(e){return t.btnloading=e}))},computed:{computedDialog:{get:function(){return this.dialog},set:function(t){!t&&this.$emit("close"),this.$emit("update:dialog",t)}},disabled:function(){return!this.title}},watch:{dialog:{handler:function(t){this.open=t,!t||this.members.all_items.length||this.milestones.items.length||this.fill_dropdowns()}},open:function(t){this.$emit("update:dialog",t)}},methods:{cancel:function(){this.dialog=!1},setTask:function(t){this.task=t},open_dialog:function(){this.fill_dropdowns(),this.$refs.dialog.open_dialog(),this.task&&this.update_fields(this.task)},save:function(){this.btnloading=!0;var t={project_id:this.id,milestone_id:this.milestones.selected,title:this.title,description:this.description,status:this.status,started_at:this.start_date,end_at:this.end_date,assigned:this.members.selected};this.$emit("save",t)},update_fields:function(t){var e=Y()(t);this.title=e.title,this.description=e.description,this.start_date=e.started_at,this.end_date=e.end_at,this.milestones.selected=e.milestone_id,this.$set(this.members,"selected",e.assigned)},clear_and_close:function(){this.title=this.description=this.start_date=this.end_date=null,this.members.selected=[],this.milestones.selected=null,this.$refs.editor.setValue(null),this.cancel()},fill_dropdowns:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e=this.task?this.task.project_id:this.id,t.next=4,Promise.all([l.get_project_members(e),l.get_project_milestones(e)]);case 4:a=t.sent,i=Object(I["a"])(a,2),s=i[0],n=i[1],this.loading=!1,this.members.all_items=s.data,this.members.items=s.data,this.milestones.items=n.data;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filter_dropdown_items:function(t,e){var a=Y()(this[t].all_items);if(e){var i=a.filter((function(t){return t.first_name.toLowerCase().includes(e.toLowerCase())||t.last_name.toLowerCase().includes(e.toLowerCase())}));this.$set(this[t],"items",i)}else this[t].items=a},open_add_milestone_dialog:function(){this.add_milestone_dialog=!0},add_new_milestone:function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].post("api/project/".concat(this.id,"/milestone"),e).then((function(t){var e=t.data;a.milestones.items.push(e),a.milestones.selected=e,a.add_milestone_dialog=!1,a.$event.$emit("open_snackbar","New Milestone added successfully")})).finally((function(){a.$event.$emit("btnloading_off",!1)}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},F=z,U=(a("94f3"),Object(h["a"])(F,B,A,!1,null,"5e7d4905",null)),K=U.exports,G=a("5b70"),J=a("ab1d"),Q=a("84a4");function X(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?X(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var tt={name:"TasksContent",mixins:[r["a"]],components:{TasksTab:E,TaskDialog:K,DeleteDialog:G["a"],ConfirmDialog:J["a"],TaskViewDialog:Q["a"]},props:{userId:[Number,String],id:{type:[Number,String],default:null},hasLoadMoreBtn:{type:Boolean,default:!1},hasTabs:{type:Boolean,default:!0},showProject:{type:Boolean,default:!1}},computed:Z(Z(Z({},Object(o["c"])(["user"])),Object(o["c"])("taskCards",["see_more_url"])),{},{tabs:function(){return[{name:"My Tasks",help:"Tasks that are assigned to you "},{name:"All Tasks",help:"Tasks for all members in this project"}]},active_task_id:{get:function(){return this.task?this.task.id:null},set:function(t){return t}},project_id:{get:function(){return this.$store.getters["taskCards/id"]},set:function(t){return t}},has_see_more_url:function(){return!!this.see_more_url}}),data:function(){return{active_tab:"My Tasks",tasks_own:[],all_tasks:[],selected_tab:"My Tasks",task:null,add_task_dialog:!1,edit_task_dialog:!1,confirm_mark_as_complete_dialog:!1,confirm_mark_as_urgent_dialog:!1,notify_task_complete:!1,delete_task_dialog:!1}},watch:{id:function(t){this.set_id(t)},userId:function(t){this.set_user_id(parseInt(t))}},created:function(){var t=this;this.$event.$on("task-row-clicked",(function(e){return t.set_and_open_side_preview(e)})),this.$event.$on("task-card-tab",(function(e){return t.selected_tab=e})),this.$event.$on("task-mark-as-complete",(function(e){return t.set_and_mark_complete_task(e)})),this.$event.$on("task-mark-as-urgent",(function(e){return t.set_and_mark_urgent_task(e)})),this.$event.$on("task-add",(function(){return t.set_and_add_task()})),this.$event.$on("task-edit",(function(e){return t.set_and_edit_task(e)})),this.$event.$on("task-delete",(function(e){return t.set_and_delete_task(e)})),this.$event.$on("task-view",(function(e){return t.set_and_view_task(e)}))},methods:Z(Z(Z({},Object(o["d"])("taskCards",["set_id","set_user_id","add_task","del_task","replace_task"])),Object(o["b"])("taskCards",["see_more"])),{},{loadMore:function(){this.see_more()},create_new_task:function(t){var e=this;l.create_new_task(t).then((function(t){var a=t.data;e.add_task(a),e.$refs.add_task_dialog.clear_and_close(),e.$event.$emit("open_snackbar","New Task added successfully")})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},edit_task:function(t){var e=this;l.edit_task(this.task.id,t).then((function(t){var a=t.data;e.$refs.edit_task_dialog.$refs.dialog.clear_and_close(),e.$event.$emit("open_snackbar","Task updated successfully"),e.$event.$emit("task-is-updated",a)})).finally((function(){e.$event.$emit("btnloading_off",!1)}))},delete_task:function(){var t=this;l.delete_task(this.task.id).then((function(){t.remove_task(t.task)})).finally((function(){t.$event.$emit("btnloading_off",!1)}))},update_task:function(t,e,a){if(this.task=t,"all_tasks"===a){var i=this.all_tasks.findIndex((function(t){return t.id===e}));~i&&this.all_tasks.splice(i,1,t)}else{var s=this.tasks_own.findIndex((function(t){return t.id===e}));~s&&this.tasks_own.splice(s,1,t)}},remove_task:function(t){this.del_task(t),this.delete_dialog=!1,this.$event.$emit("open_snackbar","Task deleted successfully"),this.set_active_task_after_delete()},set_active_task_after_delete:function(){"My Tasks"===this.selected_tab?this.tasks_own.length?this.task=this.tasks_own[0]:this.task=null:this.all_tasks.length?this.task=this.all_tasks[0]:this.task=null},handle_dropdown_action:function(t){var e="open_".concat(t,"_task_dialog");this[e]()},open_add_task_dialog:function(){this.$refs.add_task_dialog.open_dialog()},open_edit_task_dialog:function(){this.$refs.edit_task_dialog&&(this.$refs.edit_task_dialog.setTask(this.task),this.$refs.edit_task_dialog.open_dialog())},closeEditDialog:function(){this.$refs.edit_task_dialog.$refs.dialog.clear_and_close()},closeAddDialog:function(){this.$refs.add_task_dialog.$refs.dialog.clear_and_close()},closeViewDialog:function(){this.$refs.view_task_dialog.$refs.dialog.clear_and_close()},open_delete_task_dialog:function(){this.delete_task_dialog=!0},open_mark_as_urgent_task_dialog:function(){this.confirm_mark_as_urgent_dialog=!0},open_mark_as_complete_task_dialog:function(){this.confirm_mark_as_complete_dialog=!0},confirm_mark_as_urgent_task:function(){var t=this,e={status:"urgent"};l.mark_as_urgent_task(this.task.id,e).then((function(e){var a=e.data;t.confirm_mark_as_urgent_dialog=!1,t.$event.$emit("open_snackbar","Task updated"),t.replace_task(a),t.$event.$emit("btnloading_off",!1),t.$event.$emit("task-is-updated",a)}))},confirm_mark_as_complete_task:function(){var t=this,e={status:"completed",notify_complete:this.notifytaskcomplete};l.mark_as_complete_task(this.task.id,e).then((function(e){var a=e.data;t.confirm_mark_as_complete_dialog=!1,t.$event.$emit("open_snackbar","Task is completed"),t.replace_task(a),t.$event.$emit("btnloading_off",!1),t.$event.$emit("task-is-updated",a)}))},set_and_delete_task:function(t){this.task=t,this.open_delete_task_dialog()},set_and_edit_task:function(t){this.task=t,this.open_edit_task_dialog()},set_and_mark_complete_task:function(t){this.task=t,this.open_mark_as_complete_task_dialog()},set_and_mark_urgent_task:function(t){this.task=t,this.open_mark_as_urgent_task_dialog()},set_and_view_task:function(t){this.task=t,this.$refs.view_task_dialog.open_dialog()},set_and_add_task:function(){this.open_add_task_dialog()},set_and_open_side_preview:function(t){this.task=t,"project-preview"===this.page?this.$event.$emit("show-task-side-preview",t):this.set_and_view_task(t)},expand:function(){this.$router.push({name:"expanded-tasks"})}})},et=tt,at=(a("0a72"),a("77af"),Object(h["a"])(et,i,s,!1,null,"865b66f8",null));e["a"]=at.exports}}]);
//# sourceMappingURL=chunk-0d88fb23.bd44f39b.js.map