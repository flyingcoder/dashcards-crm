{"version":3,"sources":["webpack:///./src/common/BaseComponents/Loader.vue?d9e1","webpack:///./src/modules/ProjectPreview-Messages/subpages/TeamMessages/api.js","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?9878","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?737a","webpack:///src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue?d8c2","webpack:///./src/modules/ProjectPreview-Messages/subpages/reusable/SingleMessage.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?19c3","webpack:///./src/common/BaseComponents/Loader.vue?e156","webpack:///src/common/BaseComponents/Loader.vue","webpack:///./src/common/BaseComponents/Loader.vue?932e","webpack:///./src/common/BaseComponents/Loader.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?9542","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/api.js","webpack:///src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue?e86c","webpack:///./src/modules/ProjectPreview-Messages/subpages/ClientMessages/ClientMessages.vue"],"names":["get_team_messages","project_id","request","get","send_message","payload","post","render","_vm","this","_h","$createElement","_c","_self","staticClass","class","me","isMyMessage","attrs","message","sender","image_url","_v","_s","first_name","last_name","_f","created_at","body","staticRenderFns","mixins","global_utils","props","Boolean","Object","component","_e","loading","ref","messages","_l","key","id","loggedUser","on","$event","type","indexOf","_k","keyCode","sendMessage","target","value","model","callback","$$v","expression","get_client_messages","Number","String","components","Loader","SingleMessage","data","computed","$store","getters","user","created","mounted","$pusher","authenticate","subscribePusher","beforeDestroy","unsubscribe","methods","add_new_message","some","push","scrollToBottom","$refs","user_can_message","can_message","can","$emit","client_message_channel","bind","from_id","api"],"mappings":"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","file":"js/chunk-a6e5080c.cc0b59fb.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=62591aaa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=62591aaa&lang=scss&scoped=true&\"","import request from '@/services/axios_instance'\n\nexport const get_team_messages = project_id => {\n  return request.get(`api/projects/${project_id}/messages?type=team`)\n}\n\nexport const send_message = (project_id, payload) => {\n  return request.post(`api/projects/${project_id}/messages`, payload)\n}\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=style&index=0&id=89a318b6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=style&index=0&id=89a318b6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\",class:{ me: _vm.isMyMessage }},[_c('v-layout',{staticClass:\"sender\",attrs:{\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"sender__img\",attrs:{\"xs3\":\"\"}},[_c('v-img',{attrs:{\"src\":_vm.message.sender.image_url}}),_c('span',{staticClass:\"status online\"})],1),_c('v-flex',{staticClass:\"sender__name\",attrs:{\"xs5\":\"\"}},[_c('h5',[_vm._v(_vm._s(_vm.message.sender.first_name)+\" \"+_vm._s(_vm.message.sender.last_name))])]),_c('v-flex',{staticClass:\"date\",attrs:{\"xs4\":\"\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"from_now\")(_vm.message.created_at))+\" \")])],1),_c('div',{staticClass:\"sender__message\"},[_vm._v(\" \"+_vm._s(_vm.message.body)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message\" :class=\"{ me: isMyMessage }\">\n    <v-layout wrap class=\"sender\">\n      <v-flex xs3 class=\"sender__img\">\n        <v-img :src=\"message.sender.image_url\" />\n        <span class=\"status online\"></span>\n      </v-flex>\n      <v-flex xs5 class=\"sender__name\">\n        <h5>{{ message.sender.first_name }} {{ message.sender.last_name }}</h5>\n      </v-flex>\n      <v-flex xs4 class=\"date\"> {{ message.created_at | from_now }} </v-flex>\n    </v-layout>\n    <div class=\"sender__message\">\n      {{ message.body }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { global_utils } from '@/global_utils/global_utils'\n\nexport default {\n  mixins: [global_utils],\n  props: {\n    isMyMessage: Boolean,\n    message: Object // TODO implement message for displaying to the template\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/sass/_variables';\n\n.message {\n  border-bottom: 1px solid $borderLightGray;\n  padding: 5px 25px;\n\n  &.me {\n    background-color: $tableBlueBg;\n\n    .sender {\n      flex-direction: row-reverse;\n\n      .sender__name {\n        text-align: right;\n      }\n      .date {\n        text-align: left;\n      }\n    }\n\n    .sender__message {\n      margin-left: 30px;\n      margin-right: 0;\n      text-align: justify;\n      display: flex;\n      flex-flow: column;\n      align-items: flex-end;\n    }\n  }\n\n  .sender {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  @include userImgWithStatus('.sender__img');\n\n  .sender__img {\n    text-align: center;\n    height: 50px;\n    width: 50px;\n    max-width: 50px;\n\n    .status {\n      width: 15px;\n      height: 15px;\n      border: 2px solid $lightViolete;\n    }\n  }\n\n  .sender__name h5 {\n    font-size: 18px;\n    margin: 0 5px;\n    color: $titleDarkBlue;\n  }\n\n  .date {\n    font-size: 12px;\n    opacity: 0.7;\n    margin: 0 5px;\n    color: $textDarkBlue;\n    text-align: right;\n  }\n\n  .sender__message {\n    padding: 10px;\n    font-size: 16px;\n    text-align: justify;\n    margin: 0;\n    color: $textDarkBlue;\n    margin-right: 30px;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SingleMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleMessage.vue?vue&type=template&id=89a318b6&scoped=true&\"\nimport script from \"./SingleMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleMessage.vue?vue&type=style&index=0&id=89a318b6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"89a318b6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=style&index=0&id=50c8d0d0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=style&index=0&id=50c8d0d0&lang=scss&scoped=true&\"","var render = function (_h,_vm) {var _c=_vm._c;return (_vm.props.loading)?_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"custom-loader\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"size\":72}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template functional>\n  <transition name=\"fade\" v-if=\"props.loading\">\n    <div class=\"custom-loader\">\n      <v-progress-circular\n        indeterminate\n        color=\"primary\"\n        :size=\"72\"\n      ></v-progress-circular>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    loading: Boolean\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-loader {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(224, 224, 189, 0.57);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 1;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=62591aaa&scoped=true&functional=true&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&id=62591aaa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  \"62591aaa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message__body team-messages\"},[_c('div',{ref:\"messages-container\",staticClass:\"messages\"},[_c('Loader',{attrs:{\"loading\":_vm.loading}}),(_vm.messages.length)?_vm._l((_vm.messages),function(message){return _c('SingleMessage',{key:message.id,attrs:{\"is-my-message\":message.sender.id === _vm.loggedUser.id,\"message\":message}})}):_c('div',{staticClass:\"no-messages\"},[_vm._v(\" No messages yet \")])],2),_c('div',{staticClass:\"write\"},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"sender-avatar\",attrs:{\"src\":_vm.loggedUser.image_url}})]),_c('v-text-field',{staticClass:\"write__msg\",attrs:{\"solo\":\"\",\"flat\":\"\",\"hide-details\":\"\",\"color\":\"#667187\",\"label\":\"Type a message...\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event.target.value)}},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('div',{staticClass:\"write__actions\"},[_c('v-icon',{staticClass:\"action insert__emoticon\"},[_vm._v(\"insert_emoticon\")]),_c('v-icon',{staticClass:\"action attach_file\"},[_vm._v(\"attach_file\")]),_c('v-icon',{staticClass:\"action send\",on:{\"click\":function($event){return _vm.sendMessage(_vm.message)}}},[_vm._v(\"send\")])],1)],1),_c('div',{staticClass:\"view__more\"},[_c('v-btn',{staticClass:\"view__more_btn\",attrs:{\"text\":\"\"}},[_vm._v(\"VIEW MORE\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/services/axios_instance'\nimport { send_message } from '../TeamMessages/api'\n\nexport const get_client_messages = project_id => {\n  return request.get(`api/projects/${project_id}/messages?type=client`)\n}\n\nexport { send_message }\n","<template>\n  <div class=\"message__body team-messages\">\n    <div class=\"messages\" ref=\"messages-container\">\n      <Loader :loading=\"loading\" />\n      <template v-if=\"messages.length\">\n        <SingleMessage\n          v-for=\"message of messages\"\n          :key=\"message.id\"\n          :is-my-message=\"message.sender.id === loggedUser.id\"\n          :message=\"message\"\n        />\n      </template>\n      <div class=\"no-messages\" v-else>\n        No messages yet\n      </div>\n    </div>\n    <div class=\"write\">\n      <div class=\"avatar-wrapper\">\n        <img :src=\"loggedUser.image_url\" class=\"sender-avatar\" />\n      </div>\n      <v-text-field\n        v-model=\"message\"\n        class=\"write__msg\"\n        solo\n        flat\n        hide-details\n        color=\"#667187\"\n        label=\"Type a message...\"\n        @keyup.enter=\"sendMessage($event.target.value)\"\n      ></v-text-field>\n      <div class=\"write__actions\">\n        <v-icon class=\"action insert__emoticon\">insert_emoticon</v-icon>\n        <v-icon class=\"action attach_file\">attach_file</v-icon>\n        <v-icon class=\"action send\" @click=\"sendMessage(message)\">send</v-icon>\n      </div>\n    </div>\n    <div class=\"view__more\">\n      <v-btn text class=\"view__more_btn\">VIEW MORE</v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as apiTo from './api'\nimport { global_utils } from '@/global_utils/global_utils'\n// Components\nimport Loader from '@/common/BaseComponents/Loader.vue'\nimport SingleMessage from '../reusable/SingleMessage.vue'\n\nexport default {\n  mixins: [global_utils],\n  props: {\n    id: [Number, String]\n  },\n  components: {\n    Loader,\n    SingleMessage\n  },\n\n  data: () => ({\n    loading: false,\n    messages: [],\n    message: null,\n    can_message: false\n  }),\n\n  computed: {\n    loggedUser() {\n      return this.$store.getters.user\n    }\n  },\n\n  created() {\n    this.loading = true\n    apiTo\n      .get_client_messages(this.id)\n      .then(({ data }) => {\n        this.messages = data.data\n        this.scrollToBottom(this.$refs['messages-container'])\n      })\n      .finally(() => (this.loading = false))\n  },\n  mounted() {\n    this.$pusher.authenticate()\n    this.subscribePusher()\n  },\n  beforeDestroy() {\n    this.$pusher.unsubscribe(`private-project.client-message.${this.id}`)\n  },\n  methods: {\n    add_new_message(message) {\n      if (!this.messages.some(msg => msg.id === message.id)) {\n        this.messages.push(message)\n      }\n      this.scrollToBottom(this.$refs['messages-container'])\n    },\n    user_can_message(can) {\n      this.can_message = can\n      if (can) this.$event.$emit('open_snackbar', 'Client chat connected')\n      else\n        this.$event.$emit(\n          'open_snackbar',\n          'Client chat unavailable for you.',\n          'error'\n        )\n    },\n    subscribePusher() {\n      const client_message_channel = this.$pusher.subscribe(\n        `private-project.client-message.${this.id}`\n      )\n      client_message_channel.bind('ProjectClientMessage', data => {\n        if (data.type === 'client') this.add_new_message(data.message)\n      })\n      client_message_channel.bind('pusher:subscription_succeeded', () =>\n        this.user_can_message(true)\n      )\n      client_message_channel.bind('pusher:subscription_error', status =>\n        this.user_can_message(false)\n      )\n    },\n    sendMessage(message) {\n      if (!message) return\n      this.message = null\n      let payload = {\n        type: 'client',\n        message,\n        from_id: this.loggedUser.id\n      }\n      apiTo.send_message(this.id, payload).then(({ data }) => {\n        this.add_new_message(data)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/sass/_variables';\n\n.message__body {\n  border: 1px solid $borderLightGray;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n\n  @include styledScrollFor('.messages'); //style the scroll\n\n  .messages {\n    background-color: $white;\n    overflow: auto;\n    max-height: 462px;\n    border-bottom: 1px solid $borderLightGray;\n  }\n\n  .write {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    align-items: center;\n    background-color: $white;\n    .write__actions {\n      .action {\n        margin: 5px 7px;\n        color: $lightGray-2;\n        cursor: pointer;\n\n        &:hover {\n          color: $blue;\n        }\n      }\n    }\n    .avatar-wrapper {\n      padding: 3px;\n      .sender-avatar {\n        width: 40px;\n      }\n    }\n  }\n\n  .view__more {\n    text-align: center;\n    padding: 10px;\n    border-top: 1px solid $borderLightGray;\n    background-color: $white;\n    border-bottom-left-radius: 10px;\n    border-bottom-right-radius: 10px;\n    .view__more_btn {\n      color: $tableDarkText;\n    }\n  }\n\n  .no-messages {\n    padding: 20px;\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClientMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClientMessages.vue?vue&type=template&id=50c8d0d0&scoped=true&\"\nimport script from \"./ClientMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./ClientMessages.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClientMessages.vue?vue&type=style&index=0&id=50c8d0d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50c8d0d0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}