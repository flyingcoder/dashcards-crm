(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39533644"],{"0457":function(e,t,i){"use strict";var n=i("c418"),o=i.n(n);o.a},2238:function(e,t,i){"use strict";var n=i("e7853"),o=i.n(n);o.a},a0e5:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice"},[i("ViewInvoice",{ref:"view_invoice_dialog",attrs:{item:e.view_item,open:e.view_invoice_dialog},on:{close:function(t){e.view_invoice_dialog=!1}}}),i("InvoiceDialog",{attrs:{type:"edit"},on:{updated:e.invoice_updated}}),i("delete-dialog",{attrs:{"open-dialog":e.delete_dialog,title:"Delete Invoice","text-content":"Are you sure you want to delete this invoice?"},on:{"update:openDialog":function(t){e.delete_dialog=t},"update:open-dialog":function(t){e.delete_dialog=t},delete:e.delete_invoice}}),i("delete-dialog",{attrs:{"open-dialog":e.bulk_delete_dialog,title:"Delete Invoices","text-content":"Are you sure you want to delete these invoices? This can't be undone."},on:{"update:openDialog":function(t){e.bulk_delete_dialog=t},"update:open-dialog":function(t){e.bulk_delete_dialog=t},delete:function(t){return e.bulk_delete("bulk_delete_invoices")}}}),i("VueTable",{key:e.componentKey,attrs:{items:e.items,headers:e.headers,showRowActions:!0,icon:"list",loading:e.loading,title:"Project Invoice",noMoreData:e.noMoreData},on:{"load-more":e.getMoreInvoices,"delete-selected":function(t){return e.open_bulk_delete_dialog(t)}},scopedSlots:e._u([{key:"row-slot",fn:function(t){var n=t.item;return[i("td",[e._v(e._s(n.title))]),i("td",[i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[i("v-avatar",e._g({attrs:{color:"teal",size:"35"}},o),[i("v-img",{attrs:{src:n.billed_to.image_url}})],1)]}}],null,!0)},[i("span",[e._v(e._s(n.billed_to.fullname))])]),e._v(" "+e._s(n.billed_to.fullname)+" ")],1),i("td",[e._v(e._s(e._f("format")(n.due_date)))]),i("td",[e._v(e._s(e._f("money")(n.total_amount)))]),i("Actions",{attrs:{item:n},on:{delete:function(t){return e.open_delete_dialog(n)},edit:function(t){return e.open_edit_dialog(n)},view:function(t){return e.open_view_dialog(n)}}})]}}])})],1)},o=[],a=(i("8e6e"),i("456d"),i("ac6a"),i("20d6"),i("96cf"),i("3b8d")),c=i("bd86"),r=(i("c5f6"),i("1be9")),l={getInvoices:function(e,t){return r["a"].get("api/projects/".concat(e,"/invoice?page=").concat(t))},delete_invoice:function(e){return r["a"].delete("api/invoice/".concat(e))},update_invoice:function(e,t){return r["a"].post("api/invoice/".concat(t),e,{headers:{"Content-Type":"multipart/form-data"}})},get_all_projects:function(){return r["a"].get("api/projects?all=true")}},d=i("e06e"),s=i("2f62"),u=i("0644"),_=i.n(u),p=i("579d"),v=i("9107"),f=i("5b70"),g=i("e93d"),h=i("0ebe"),m=i("ee09");function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){Object(c["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y={name:"Invoice",mixins:[d["a"],p["a"]],components:{VueTable:h["a"],DeleteDialog:f["a"],ViewInvoice:v["a"],InvoiceDialog:g["a"],Actions:m["a"]},props:{id:[Number,String]},data:function(){return{headers:[{text:"Invoice",value:"invoice",width:"30%"},{text:"Client",value:"client",width:"20%"},{text:"Due Date",value:"due_date",width:"20%"},{text:"Amount",value:"amount",width:"10%"},{text:"Actions",value:"action",width:"20%",align:"center"}],view_invoice_dialog:!1,view_item:null}},created:function(){this.loading=!0,this.fetch_data(),this.getInvoices()},methods:w({},Object(s["d"])("invoice",["set_dialog","set_toolbar","set_projects","open_invoice_for_editing","set_selected_project"]),{delete_invoice:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.delete_dialog=!1,e.next=4,l.delete_invoice(this.delete_item_id);case 4:this.loading=!1,t=this.items.findIndex((function(e){return e.id===i.delete_item_id})),~t&&this.items.splice(t,1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),open_view_dialog:function(e){this.view_item=e,this.view_invoice_dialog=!0},open_edit_dialog:function(e){this.set_toolbar({title:"Edit Dialog"}),this.open_invoice_for_editing(_()(e)),this.set_selected_project(e.project_id),this.set_dialog({type:"edit",open:!0})},fetch_data:function(){var e=this;l.get_all_projects().then((function(t){e.set_projects(t.data)}))},getInvoices:function(){var e=this;this.loading=!0,l.getInvoices(this.id,this.pagination.current).then((function(t){var i=t.data;e.items=i.data,e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},getMoreInvoices:function(){var e=this;this.loading=!0,l.getInvoices(this.id,this.pagination.current+1).then((function(t){var i=t.data;i.data.forEach((function(t){e.items.push(t)})),e.pagination.current=i.current_page,e.pagination.total=i.last_page,e.hasMoreData()})).finally((function(){e.loading=!1,e.$event.$emit("btnloading_off",!1)}))},invoice_updated:function(e){var t=this.items.findIndex((function(t){return t.id===e.id}));~t&&this.items.splice(t,1,e)}})},j=y,O=(i("0457"),i("2238"),i("2877")),D=Object(O["a"])(j,n,o,!1,null,"9e192ed4",null);t["default"]=D.exports},c418:function(e,t,i){},e7853:function(e,t,i){}}]);
//# sourceMappingURL=chunk-39533644.247a8aea.js.map